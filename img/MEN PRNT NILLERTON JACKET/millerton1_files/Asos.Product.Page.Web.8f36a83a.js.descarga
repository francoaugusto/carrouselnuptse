define("Models/Component",[],(function(){return function(){this.componentConfig=null,this.type=null,this.elementId=null,this.element=null,this.useComponentTemplate=!1,this.data=null,this.state=void 0,this.setComponentConfig=function(ue){this.componentConfig=void 0!==ue?ue:null},this.setType=function(ue){this.type=void 0!==ue?ue:null},this.setElementId=function(ue){this.elementId=void 0!==ue?ue:this.type,this.element=document.getElementById(this.elementId)},this.setUseComponentTemplate=function(ue){ue=void 0===ue||ue,this.useComponentTemplate="boolean"!=typeof ue||ue},this.setData=function(ue){this.data=void 0!==ue?ue:null},this.setState=function(ue){this.state=void 0!==ue?ue:this.state},this.getComponentPath=function(){return null!==this.type?"Components/"+this.type+"/"+this.type:null},this.getElement=function(){return this.element},this.getDictionary=function(){if(!this.element||!this.element.hasAttribute("dictionary"))return null;try{return JSON.parse(this.element.getAttribute("dictionary"))}catch(ue){return null}},this.getComponentConfig=function(){return!this.useComponentTemplate&&this.element&&(this.componentConfig.template={element:this.element}),this.componentConfig}}})),define("ProductUtils/ComponentLoader",["ko","Models/Component"],(function(ue,he){return function(){this.register=function(pe,me,fe){var ge=new he;return ge.setType(pe.type),ge.setElementId(pe.elementId),ge.setData(me),ge.setState(fe),ge.setUseComponentTemplate(pe.useComponentTemplate),require([ge.getComponentPath()],(function(he){ge.setComponentConfig(he),ue.components.register(pe.name,ge.getComponentConfig()),(null!==ge.getElement()||ge.getElement()!=={})&&ue.applyBindingsToNode(ge.getElement(),{component:{name:pe.name,params:{dictionary:ge.getDictionary(),data:ge.data,state:ge.state}}})})),ge},this.unregister=function(he){he&&0!==he.length&&ue.components.isRegistered(he)&&ue.components.unregister(he)}}})),define("videoPlayerView",[],(function(){return'<div class="asos-media-players">\r\n    <div class="amp-video-player amp-relative">\r\n        <video class="amp-page amp-video-element" data-bind="foreach: sources" controls="controls" muted>\r\n            <source data-bind="attr: { type: type, src: src }" />\r\n        </video>\r\n        <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                    <p data-bind="html: messages.errorMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="amp-page amp-page-message amp-unsupported-page" data-bind="visible: isUnsupportedPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.unsupportedHeaderText"></h2>\r\n                    <p data-bind="html: messages.unsupportedMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.closeButtonText, click: closeButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'})),define("utils/scene7.config",[],(function(){"use strict";return function(ue,he){this.jsonpCallback="s7jsonResponse",this.jsonpErrorCallback="s7jsonError",this.scene7imageServer=ue,this.scene7videoServer=he,this.spinsetManifestFileUrlPattern=this.scene7imageServer+"/products/test-desc/[productID]-spinset",this.imageUrlPattern=this.scene7imageServer+"/products/[assetID]",this.maxImageSize={width:4e3,height:4e3},this.imageMinPartitionFactors={horizontal:3,vertical:4}}})),define("utils/scene7.DataProvider",["$"],(function(ue){"use strict";var t=function(ue){this.scene7config=ue,this.manifestCache={}};return t.prototype.ABSOLUTE_URL_REGEX=/^https?:\/\/|^\/\//i,t.requests=[],t.prototype.getJson=function(he,pe,me){Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpErrorCallback)||(window[this.scene7config.jsonpErrorCallback]=function(ue,he){var pe=t.requests[he];"function"==typeof pe.onError&&pe.onError()}),Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpCallback)||(window[this.scene7config.jsonpCallback]=function(ue,he){var pe=t.requests[he];"function"==typeof pe.onSuccess&&pe.onSuccess(ue)}),t.requests.push({onSuccess:pe,onError:me});var fe=t.requests.length-1;ue.ajax({url:he.replace("[requestID]",fe),jsonp:!1,jsonpCallback:this.scene7config.jsonpCallback+fe,dataType:"jsonp",cache:!0,success:pe,error:me})},t.prototype.getManifestData=function(he){this.ABSOLUTE_URL_REGEX.test(he)||(he="//"+he);var pe=new ue.Deferred;if(!this.manifestCache[he]){var me=he+(-1===he.indexOf("?")?"?":"&")+"req=set,json&id=[requestID]";return this.getJson(me,function(me){this.manifestCache[he]=me,pe.resolve(ue.extend(!0,{},me))}.bind(this),(function(){pe.reject()})),pe.promise()}return pe.resolve(ue.extend(!0,{},this.manifestCache[he])),pe.promise()},t})),define("videoPlayer/DataMapper",[],(function(){"use strict";var e=function(ue){this.scene7config=ue};return e.prototype.VIDEO_FILE_URL_PATTERN="/products/[assetID]",e.prototype.VIDEO_TYPE_FORMAT={m3u8:"application/x-mpegurl",mp4:"video/mp4"},e.prototype.map=function(ue){return ue.set.item.map(this.getAssetFromServerItem.bind(this))},e.prototype.getAssetFromServerItem=function(ue){return{bitrate:parseInt(ue.v.bitrate,10),width:parseInt(ue.v.dx,10),height:parseInt(ue.v.dy,10),src:this.scene7config.scene7videoServer+this.VIDEO_FILE_URL_PATTERN.replace("[assetID]",ue.v.path),format:ue.v.suffix,type:this.VIDEO_TYPE_FORMAT[ue.v.suffix],fps:ue.userdata&&ue.userdata[0]&&ue.userdata[0].Video_Frame_Rate?parseFloat(ue.userdata[0].Video_Frame_Rate):null}},e})),define("utils/deviceHelper",[],(function(){"use strict";var e=function(){return this};return e.prototype.getScreenProperties=function(ue){return{width:ue.screen.width,height:ue.screen.height}},e.prototype.isPhysicalSizeGreaterThanLogicalSize=function(ue){return ue&&void 0!==ue.systemXDPI&&void 0!==ue.logicalXDPI&&ue.systemXDPI>ue.logicalXDPI},e.prototype.getDevicePixelRatio=function(ue){var he=1;return this.isPhysicalSizeGreaterThanLogicalSize(ue.screen)?he=ue.screen.systemXDPI/ue.screen.logicalXDPI:void 0!==ue.devicePixelRatio&&(he=ue.devicePixelRatio),he},e.prototype.getWidthInPhysicalPixels=function(ue){return this.getScreenProperties(ue).width*this.getDevicePixelRatio(ue)},e.prototype.getHeightInPhysicalPixels=function(ue){return this.getScreenProperties(ue).height*this.getDevicePixelRatio(ue)},new e})),define("videoPlayer/AssetsProvider",["$","utils/deviceHelper"],(function(ue,he){"use strict";var i=function(ue,he,pe){this.scene7config=ue,this.dataProvider=he,this.dataMapper=pe};return i.prototype.MANIFEST_PATH_PATTERN="/products/test-desc/[productID]-catwalk-AVS",i.prototype.DEFAULT_FPS=50,i.prototype.DEFAULT_BITRATES={480:800,720:1200,1080:2500},i.prototype.getAssetsByFormat=function(ue,he){return ue.filter((function(ue){return ue.format===he}))},i.prototype.isBetterWidthDifference=function(ue,he){return 0===ue||ue>0&&0>he||!(0>ue&&he>0)&&Math.abs(ue)<=Math.abs(he)},i.prototype.getBestAssetsByWidth=function(ue){var pe=he.getWidthInPhysicalPixels(window),me=ue[0].width,fe=ue[0].width-pe,ge=fe;return ue.forEach(function(ue){ge=ue.width-pe,this.isBetterWidthDifference(ge,fe)&&(me=ue.width,fe=ge)}.bind(this)),ue.filter((function(ue){return ue.width===me}))},i.prototype.getPreferredBitrateForDevice=function(ue){ue=ue||this.DEFAULT_BITRATES;var pe=Object.keys(ue).map((function(ue){return parseInt(ue,10)})),me=he.getWidthInPhysicalPixels(window),fe=pe[0],ge=pe[0]-me,ve=ge;return pe.forEach((function(ue){ve=ue-me,Math.abs(ve)<=Math.abs(ge)&&(fe=ue,ge=ve)})),1e3*ue[fe]},i.prototype.getBestAssetsByBitrate=function(ue,he){var pe=this.getPreferredBitrateForDevice(he),me=ue[0].bitrate,fe=ue[0].bitrate-pe,ge=fe;return ue.forEach(function(ue){ge=ue.bitrate-pe,Math.abs(ge)<=Math.abs(fe)&&(me=ue.bitrate,fe=ge)}.bind(this)),ue.filter((function(ue){return ue.bitrate===me}))},i.prototype.getBestAssetsByFPS=function(ue,he){var pe=ue[0].fps,me=ue[0].fps-he,fe=me;return ue.forEach(function(ue){fe=ue.fps-he,Math.abs(fe)<=Math.abs(me)&&(pe=ue.fps,me=fe)}.bind(this)),ue.filter((function(ue){return ue.fps===pe}))},i.prototype.getBestAsset=function(ue,he,pe){if(ue&&ue.length){pe=pe||this.DEFAULT_FPS;var me=this.getBestAssetsByWidth(ue);if(me.length<=1)return me[0];var fe=this.getBestAssetsByBitrate(me,he);return fe.length<=1?fe[0]:this.getBestAssetsByFPS(fe,pe)[0]}},i.prototype.getBestAssets=function(ue,he,pe){var me=this.getBestAssetsFromManifest(he,pe);return-1!==pe.formats.indexOf("m3u8")&&this.addM3U8Asset(ue,me),me},i.prototype.getBestAssetsFromManifest=function(ue,he){var pe=[];return he.formats.forEach(function(me){var fe=this.getBestAsset(this.getAssetsByFormat(ue,me),he.preferredBitrates,he.preferredFPS);fe&&pe.push(fe)}.bind(this)),pe},i.prototype.addM3U8Asset=function(ue,he){he.push({src:ue+".m3u8",format:"m3u8",type:this.dataMapper.VIDEO_TYPE_FORMAT.m3u8})},i.prototype.hasAudio=function(ue){return ue.set.item.some(function(ue){return!!ue.userdata&&ue.userdata.some((function(ue){return!!ue.Audio_Codec}))}.bind(this))},i.prototype.getAssets=function(ue,he,pe,me){return isNaN(parseInt(ue,10))||(ue=this.scene7config.scene7videoServer+this.MANIFEST_PATH_PATTERN.replace("[productID]",ue)),this.dataProvider.getManifestData(ue).then(function(me){var fe=this.dataMapper.map(me),ge=this.getBestAssets(ue,fe,he);ge.sort((function(ue,pe){return he.formats.indexOf(ue.format)-he.formats.indexOf(pe.format)}));var ve={assets:ge,hasAudio:this.hasAudio(me)};return"function"==typeof pe&&pe(ve),ve}.bind(this)).fail((function(){"function"==typeof me&&me()}))},i})),define("videoPlayer/ViewModel",["ko"],(function(ue){return function t(he,pe){this.events=he,this.sources=ue.observableArray(),this.messages=pe,this.isErrorPageVisible=ue.observable(!1),this.isUnsupportedPageVisible=ue.observable(!1),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.closeButtonClicked=function(){this.events.trigger("closeButtonClicked")}.bind(this)}})),define("utils/fullScreenHelper",["$"],(function(ue){"use strict";var t=function(ue,he){this.events=ue,this.fullscreenLauncherName=this.getFullscreenLauncherName(he),this.fullscreenElementName=this.getFullscreenElementName(he),this.fullscreenCancelName=this.getFullscreenCancelName(he),this.elementStyle={position:null,top:null,left:null,width:null,height:null,backgroundColor:null,zIndex:null},this.setEventListeners(he)};return t.prototype.getFullscreenLauncherName=function(ue){return ue.body.requestFullscreen?"requestFullscreen":ue.body.mozRequestFullScreen?"mozRequestFullScreen":ue.body.webkitRequestFullscreen?"webkitRequestFullscreen":ue.body.msRequestFullscreen?"msRequestFullscreen":null},t.prototype.getFullscreenCancelName=function(ue){return ue.exitFullscreen?"exitFullscreen":ue.mozCancelFullScreen?"mozCancelFullScreen":ue.webkitExitFullscreen?"webkitExitFullscreen":null},t.prototype.getFullscreenElementName=function(ue){return"fullscreenElement"in ue?"fullscreenElement":"webkitFullscreenElement"in ue?"webkitFullscreenElement":"msFullscreenElement"in ue?"msFullscreenElement":"mozFullScreenElement"in ue?"mozFullScreenElement":null},t.prototype.getNativeFullScreenElement=function(ue){return this.fullscreenElementName?ue[this.fullscreenElementName]:void 0},t.prototype.getFullScreenElement=function(ue){return this.fullscreenElement?this.fullscreenElement:this.getNativeFullScreenElement(ue)},t.prototype.launchIntoFullscreen=function(ue,he){if(!this.getFullScreenElement(ue)){if(this.fullscreenLauncherName)return void he[this.fullscreenLauncherName]();this.fullscreenElement=he,this.onFullScreenChange(ue)}},t.prototype.exitFullScreen=function(ue,he){if(!he||!this.getNativeFullScreenElement(ue)||this.getNativeFullScreenElement(ue)===he){if(this.fullscreenCancelName)return void(this.getNativeFullScreenElement(ue)&&ue[this.fullscreenCancelName]());if(this.fullscreenElement)try{var pe=this.fullscreenElement.parentNode,me=this.fullscreenElement.nextSibling;pe.removeChild(this.fullscreenElement),pe.insertBefore(this.fullscreenElement,me)}catch(ue){}finally{this.onFullScreenChange(ue)}}},t.prototype.onFullScreenChange=function(ue){return this.getFullScreenElement(ue)?void this.events.trigger("fullScreenEntered"):void this.events.trigger("fullScreenExited")},t.prototype.setEventListeners=function(he){ue(he).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",this.onFullScreenChange.bind(this,he))},new t(ue({}),document)})),define("videoPlayer/Controller",["$","utils/fullScreenHelper"],(function(ue,he){"use strict";var i=function(he,pe,me,fe,ge){this.loadedAssets=null,this.unmuteVideosWithAudio=!1,this.loadedSources=void 0,this.progressEvents={0:!1,25:!1,50:!1,75:!1,100:!1},this.assetsProvider=he,this.events=fe,this.viewModel=me,this.videoElement=ge,this.params={},this.isError=!1,ue.extend(!0,this.params,pe),this.setEventListeners()};return i.prototype.setEventListeners=function(){var pe=ue(this.videoElement);pe.on("timeupdate",function(){this.onVideoTimeUpdated(),this.videoElement.ended&&this.onVideoPlaybackEnded()}.bind(this)),pe.on("webkitendfullscreen",function(){this.onFullScreenExited()}.bind(this)),pe.on("error",function(ue){var he=ue.target;if(he===this.videoElement)this.onVideoError();else if("SOURCE"===he.tagName){var pe=Array.prototype.indexOf.call(this.videoElement.querySelectorAll("source"),he);this.onVideoSourceError(pe)}}.bind(this)),pe.on("canplay",function(){this.isError=!1}.bind(this)),this.viewModel.events.on("videoSourceError",function(ue){this.onVideoSourceError(ue.detail.sourceIndex)}.bind(this)),this.viewModel.events.on("refreshButtonClicked",function(){this.onRefreshButtonClicked()}.bind(this)),this.viewModel.events.on("closeButtonClicked",function(){this.onCloseButtonClicked()}.bind(this)),he.events.on("fullScreenExited",function(){this.onFullScreenExited()}.bind(this)),he.events.on("fullScreenEntered fullScreenExited",function(){this.onFullScreenChanged()}.bind(this))},i.prototype.onVideoPlaybackEnded=function(){--this.remainingLoopCount>0?(this.videoElement.currentTime=0,this.resetProgressEvents(),this.videoElement.play(),this.events.trigger("loopEnded")):(this.stop(),this.events.trigger("allLoopsEnded"))},i.prototype.onVideoTimeUpdated=function(){var ue=100*this.videoElement.currentTime/this.videoElement.duration;for(var pe in this.progressEvents){var me=parseInt(pe,10);!this.progressEvents[pe]&&ue>=me&&(this.progressEvents[pe]=!0,this.events.trigger("progress",{detail:{src:this.videoElement.currentSrc,value:me,isFullScreen:he.getFullScreenElement(document)===this.videoElement}}))}},i.prototype.onVideoError=function(){this.isError=!0,this.viewModel.isErrorPageVisible(!0),this.events.trigger("playbackError")},i.prototype.onVideoSourceError=function(ue){ue===this.viewModel.sources().length-1&&this.onVideoError()},i.prototype.onRefreshButtonClicked=function(){this.videoElement.load(),this.start()},i.prototype.onCloseButtonClicked=function(){this.events.trigger("playerExitRequested")},i.prototype.onFullScreenExited=function(){this.params.closeOnFullScreenExited&&this.events.trigger("playerExitRequested")},i.prototype.onFullScreenChanged=function(){if(!this.params.closeOnFullScreenExited&&4===this.videoElement.readyState){var ue=function(){this.videoElement.currentTime<1?(this.videoElement.currentTime+=1,this.videoElement.currentTime-=1):(this.videoElement.currentTime-=1,this.videoElement.currentTime+=1)}.bind(this);this.videoElement.paused?(this.videoElement.play(),ue(),this.videoElement.pause()):(ue(),this.videoElement.pause(),this.videoElement.play())}},i.prototype.hideInfoPages=function(){this.viewModel.isErrorPageVisible(!1)},i.prototype.start=function(ue){this.hideInfoPages(),this.resetProgressEvents(),this.play(this.params.initialLoopCount||1,this.params.startInFullScreen,ue)},i.prototype.play=function(ue,pe,me){me&&(this.setAssets(me.assets),setTimeout(function(){this.videoElement.muted=!this.unmuteVideosWithAudio||!me.hasAudio}.bind(this),0)),this.videoElement&&this.videoElement.play&&this.loadedAssets&&!this.viewModel.isUnsupportedPageVisible()&&((this.isError||JSON.stringify(this.loadedAssets)!==JSON.stringify(this.viewModel.sources()))&&(this.viewModel.sources(this.loadedAssets),this.videoElement.load()),this.remainingLoopCount=ue,this.videoElement.readyState>0&&(this.videoElement.currentTime=0),pe&&he.launchIntoFullscreen(document,this.videoElement,!0),this.videoElement.play())},i.prototype.stop=function(){this.videoElement&&this.videoElement.pause&&(he.exitFullScreen(document,this.videoElement,!0),this.videoElement.pause(),this.videoElement.readyState>0&&(this.videoElement.currentTime=0))},i.prototype.resetProgressEvents=function(){for(var ue in this.progressEvents)this.progressEvents[ue]=!1},i.prototype.hasSupportedAssets=function(ue){var he=document.createElement("video");return!(!ue||!he.canPlayType)&&ue.filter((function(ue){return""!==he.canPlayType(ue.type)})).length>0},i.prototype.setAssets=function(ue,he){this.loadedAssets=ue,this.viewModel.isUnsupportedPageVisible(!this.hasSupportedAssets(this.loadedAssets))},i.prototype.loadAssets=function(ue,he,pe,me){this.loadedAssets=null,this.assetsProvider.getAssets(ue,he,function(ue){var he=ue.assets;he&&he.length>0?(this.setAssets(he),"function"==typeof pe&&pe()):"function"==typeof me&&me()}.bind(this),(function(){"function"==typeof me&&me()}))},i})),define("videoPlayer/component",["ko","$","videoPlayerView","utils/scene7.config","utils/scene7.DataProvider","videoPlayer/DataMapper","videoPlayer/AssetsProvider","videoPlayer/ViewModel","videoPlayer/Controller"],(function(ue,he,pe,me,fe,ge,ve,be,ye){"use strict";return{viewModel:{createViewModel:function(ue,pe){var Se=he({}),we=he({}),xe=pe.element.querySelector(".asos-media-players .amp-video-player .amp-video-element");ue.messages&&ue.messages.unsupportedHeaderText&&(ue.messages.unsupportedHeaderText=ue.messages.unsupportedHeaderText.replace("[BrowserName]","Your browser"));var Ie=new be(Se,ue.messages),Pe=new me(ue.scene7.imageServer,ue.scene7.videoServer),_e=new fe(Pe),Te=new ge(Pe),ze=new ve(Pe,_e,Te),Ce=new ye(ze,ue.player,Ie,we,xe),Ee={start:Ce.start.bind(Ce),stop:Ce.stop.bind(Ce),loadAssets:Ce.loadAssets.bind(Ce),events:Ce.events};return ue.api(Ee),Ie}},template:pe,synchronous:!0}})),define("spinViewerView",[],(function(){return'<div class="asos-media-players amp-relative">\r\n    <div class="amp-spin-viewer amp-relative" data-bind=\'css: { "pannable": isPannable() }\'>\r\n        <div class="amp-spinner amp-relative">\r\n            <div class="amp-page amp-spin">\r\n                <div class="amp-page amp-hint" data-bind="fadeVisible: isHintVisible">\r\n                    <div class="amp-hint-container">\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <div class="amp-hint-gesture-img sprite drag"></div>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <span data-bind="text: messages.hintDragText"></span>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="amp-page amp-overlay"></div>\r\n                \x3c!-- ko if: !touchDevice --\x3e\r\n                <span class="sr-only" aria-live="polite" data-bind="text: zoomLevelText"></span>\r\n                <button class="amp-zoom" data-bind="attr: { \'aria-describedby\': hintId }, click: handleClick, event: { keydown: handleKeyDown, keyup: handleKeyUp, blur: handleOnBlur, focus: handleOnFocus }, clickBubble: false">\r\n                    <span class="sprite" data-bind="css: { zoomPlus: zoomPlus, zoomMinus: zoomMinus }"></span>\r\n                </button>\r\n                <p class="zoom-hint" data-bind="text: messages.zoomHint, css: { showHint: showHint }, attr: { id: hintId }" aria-hidden="true"></p>\r\n                \x3c!-- /ko --\x3e\r\n                <div class="amp-page amp-images"></div>\r\n            </div>\r\n            <div class="amp-page amp-loading" data-bind="visible: isLoadingPageVisible">\r\n                <div class="amp-loading-img"></div>\r\n                <span data-bind="text: loadingPercentage() + \'%\'"></span>\r\n            </div>\r\n            <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n                <div class="amp-message-container">\r\n                    <div class="amp-message-box">\r\n                        <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                        <p data-bind="html: messages.spinsetErrorMessageText"></p>\r\n                        <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>                '})),define("utils/sizeHelper",[],(function(){"use strict";function e(){}return e.prototype.getProportionalSize=function(ue,he){var pe={width:ue.width,height:ue.height},me=he.width/he.height,fe=ue.width/ue.height;return fe>me?pe.width=pe.height*me:me>fe&&(pe.height=pe.width/me),pe.width=Math.round(pe.width),pe.height=Math.round(pe.height),pe},e.prototype.resizeCanvas=function(ue,he){var pe=document.createElement("canvas");pe.width=he.width,pe.height=he.height,pe.getContext("2d").drawImage(ue,0,0,he.width,he.height),ue.width=he.width,ue.height=he.height,ue.getContext("2d").drawImage(pe,0,0)},new e})),define("utils/imageProvider",["$"],(function(ue){"use strict";var t=function(){};return t.prototype.setImage=function(he,pe,me,fe,ge,ve){if(ge&&ue.support.cors)return pe.onload=me,ue.ajax(he,{success:function(ue){pe.src=he},error:fe,cache:!ve});if(ve)he+="&"+(new Date).getTime();else if(pe.complete&&pe.src===he)return"function"==typeof me&&me(),null;return pe.onload=me,pe.onerror=fe,pe.src=he,null},new t})),define("utils/scene7.ImageLoader",["$","utils/sizeHelper","utils/imageProvider"],(function(ue,he,pe){"use strict";var n=function(ue,he){this.urlQueryStringPattern="wid=[width]&hei=[height]&size=[width],[height]&rect=[startH],[startW],[lengthH],[lengthW]&qlt=[qlt]",this.scene7Config=ue,this.canUseCanvas=document.createElement("canvas").getContext,this.useCors=he,this.loadRequests=[]};return n.prototype.getPartitionFactors=function(ue,he){return{horizontal:Math.max(Math.ceil(ue.width/this.scene7Config.maxImageSize.width),he?this.scene7Config.imageMinPartitionFactors.horizontal:1),vertical:Math.max(Math.ceil(ue.height/this.scene7Config.maxImageSize.height),he?this.scene7Config.imageMinPartitionFactors.vertical:1)}},n.prototype.getTile=function(ue,he,me,fe,ge,ve,be,ye,Se){var we=new Image,xe=this.getTileUrl(he,me,fe,ge,ve,be);return{xhr:pe.setImage(xe,we,function(){we.onload=null,this.loadRequests[ue].isActive&&"function"==typeof ye&&ye(we)}.bind(this),function(){we.onload=null,this.loadRequests[ue].isActive&&"function"==typeof Se&&Se()}.bind(this),this.useCors),image:we}},n.prototype.addTile=function(ue,he,pe,me,fe,ge,ve,be,ye,Se,we){this.loadRequests[ue].isActive&&this.loadRequests[ue].tiles.push(this.getTile(ue,pe,me,ge,ve,be,ye,function(pe){if(this.loadRequests[ue].isActive){var me=(this.getTileBox(fe,ge,ve,be),he.querySelector('.tile[data-tile-hp="'+ge+'" ][data-tile-vp="'+ve+'"]')),ye=me.querySelector("img");ye||((ye=new Image).style.width="100%",ye.style.height="100%",me.appendChild(ye)),ye.src=pe.src,"function"==typeof Se&&Se()}}.bind(this),we))},n.prototype.addTiles=function(ue,he,pe,me,fe,ge,ve,be,ye,Se){var we=ue.length,u=function(){0===--we&&"function"==typeof ye&&ye()};0===we&&"function"==typeof ye&&ye();for(var xe=0;xe<ue.length;xe++)this.addTile(he,pe,me,fe,ge,ue[xe].horizontal,ue[xe].vertical,ve,be,u,Se)},n.prototype.loadFullImage=function(ue,me,fe,ge,ve,be,ye,Se,we){(ge.width>this.scene7Config.maxImageSize.width||ge.height>this.scene7Config.maxImageSize.height)&&(ge=he.getProportionalSize(this.scene7Config.maxImageSize,ge));var xe=fe.querySelector(".fullImageContainer"),Ie=fe.querySelector(".partitionedImageContainer"),Pe=fe.querySelector(".fullImageContainer img"),_e=!1;xe||((xe=document.createElement("div")).className="fullImageContainer",fe.insertBefore(xe,fe.firstChild)),Pe?_e=!Pe.complete:((Pe=new Image).className="img",Pe.style.width="100%",Pe.style.height="100%",xe.appendChild(Pe)),xe.style.width=Math.floor(ve.width)+"px",xe.style.height=Math.floor(ve.height)+"px",ye&&(xe.style.position=ye.position,xe.style.top=ye.top,xe.style.left=ye.left),xe.setAttribute("data-url",me),xe.setAttribute("data-target-qlt",be),xe.setAttribute("data-target-width",Math.floor(ge.width)),xe.setAttribute("data-target-height",Math.floor(ge.height)),xe.setAttribute("data-output-width",Math.floor(ve.width)),xe.setAttribute("data-output-height",Math.floor(ve.height));var Te=this.getTileUrl(me,ge,0,0,{vertical:1,horizontal:1},be),ze=pe.setImage(Te,Pe,function(){if(Pe.onload=null,this.loadRequests[ue].isActive){if(Ie)for(;Ie.lastChild;)Ie.removeChild(Ie.lastChild);"function"==typeof Se&&Se()}}.bind(this),function(){Pe.onload=null,this.loadRequests[ue].isActive&&"function"==typeof we&&we()}.bind(this),this.useCors,_e);this.loadRequests[ue].tiles.push({image:Pe,xhr:ze})},n.prototype.loadImageToContainer=function(ue,he,pe,me,fe,ge,ve,be,ye,Se,we){ve=ve||{x:pe.width/2,y:pe.height/2},Se=Se||"";var xe,Ie,Pe=this.getPartitionFactors(pe,ye),_e=(Pe.horizontal,Pe.vertical,{topLeft:{x:0,y:0},bottomRight:{x:me.width-1,y:me.height-1}}),Te=this.getTileDataForPoint(ve,me,Pe),ze=this.loadRequests.push({isActive:!0,tiles:[]})-1,Ce=function(){this.addTiles([Te],ze,Ee,ue,pe,me,Pe,Se,function(){return!!this.loadRequests[ze].isActive&&void this.addTiles(xe,ze,Ee,ue,pe,me,Pe,Se,function(){return!!this.loadRequests[ze].isActive&&void this.addTiles(Ie,ze,Ee,ue,pe,me,Pe,Se,function(){this.loadRequests[ze].isActive=!1,"function"==typeof fe&&fe()}.bind(this),function(){return!!this.loadRequests[ze].isActive&&void("function"==typeof ge&&ge())}.bind(this))}.bind(this),function(){return!!this.loadRequests[ze].isActive&&void("function"==typeof ge&&ge())}.bind(this))}.bind(this),function(){return!!this.loadRequests[ze].isActive&&void("function"==typeof ge&&ge())}.bind(this))}.bind(this);if((be=be||_e).topLeft.x=Math.max(Math.min(be.topLeft.x,_e.bottomRight.x),_e.topLeft.x),be.topLeft.y=Math.max(Math.min(be.topLeft.y,_e.bottomRight.y),_e.topLeft.y),be.bottomRight.x=Math.max(Math.min(be.bottomRight.x,_e.bottomRight.x),be.topLeft.x),be.bottomRight.y=Math.max(Math.min(be.bottomRight.y,_e.bottomRight.y),be.topLeft.y),xe=this.getTilesDataForArea(be,me,[Te],Te,Pe),Ie=this.getTilesDataForArea(_e,me,[Te].concat(xe),Te,Pe),!this.canUseCanvas||1===Pe.vertical&&1===Pe.horizontal)this.loadFullImage(ze,ue,he,pe,me,Se,we,fe,ge);else{var Ee=he.querySelector(".partitionedImageContainer");if(!Ee){(Ee=document.createElement("div")).className="partitionedImageContainer",Ee.style.width=me.width+"px",Ee.style.height=me.height+"px",Ee.setAttribute("aria-hidden","true"),we&&(Ee.style.position=we.position,Ee.style.top=we.top,Ee.style.left=we.left);for(var ke=0;ke<Pe.vertical;ke++)for(var Ae=0;Ae<Pe.horizontal;Ae++){var Ve=document.createElement("div");Ve.className="tile",Ve.style.float="left",Ve.style.width=100/Pe.horizontal+"%",Ve.style.height=100/Pe.vertical+"%",Ve.setAttribute("data-tile-hp",Ae),Ve.setAttribute("data-tile-vp",ke),Ee.appendChild(Ve)}he.appendChild(Ee)}Ce()}return ze},n.prototype.getTilesDataForArea=function(ue,he,pe,me,fe){pe=pe||[],me=me||{horizontal:0,vertical:0};for(var ge=this.getTileDataForPoint(ue.topLeft,he,fe),ve=this.getTileDataForPoint(ue.bottomRight,he,fe),be=[],c=function(ue){return ue.horizontal===ye&&ue.vertical===Se},ye=ge.horizontal;ye<=ve.horizontal;ye++)for(var Se=ge.vertical;Se<=ve.vertical;Se++)0===pe.filter(c).length&&be.push({horizontal:ye,vertical:Se});return be.sort((function(ue,he){return Math.sqrt(Math.pow(ue.horizontal-me.horizontal,2)+Math.pow(ue.vertical-me.vertical))>Math.sqrt(Math.pow(he.horizontal-me.horizontal,2)+Math.pow(he.vertical-me.vertical))?1:-1})),be},n.prototype.getTileDataForPoint=function(ue,he,pe){for(var me,fe={horizontal:null,vertical:null},ge=0;ge<pe.horizontal&&null===fe.horizontal;ge++)me=this.getTileBox(he,ge,0,pe),ue.x>=me.left&&ue.x<me.left+me.width&&(fe.horizontal=ge);for(var ve=0;ve<pe.vertical&&null===fe.vertical;ve++)me=this.getTileBox(he,0,ve,pe),ue.y>=me.top&&ue.y<me.top+me.height&&(fe.vertical=ve);return fe},n.prototype.getTileBox=function(ue,he,pe,me){var fe=this.getPartPosition(he,ue.width,me.horizontal),ge=this.getPartPosition(pe,ue.height,me.vertical);return{left:fe,top:ge,width:this.getPartPosition(he+1,ue.width,me.horizontal)-fe,height:this.getPartPosition(pe+1,ue.height,me.vertical)-ge}},n.prototype.getPartPosition=function(ue,he,pe){return Math.floor(he*ue/pe)},n.prototype.getTileUrl=function(ue,he,pe,me,fe,ge){var ve=this.getTileBox(he,pe,me,fe),be=ue.indexOf("?")>-1?"&":"?";return(ue+be+this.urlQueryStringPattern).replace(/\[width\]/g,Math.floor(he.width)).replace(/\[height\]/g,Math.floor(he.height)).replace("[startH]",Math.floor(ve.left)).replace("[startW]",Math.floor(ve.top)).replace("[lengthH]",Math.floor(ve.width)).replace("[lengthW]",Math.floor(ve.height)).replace("[qlt]",ge)},n.prototype.cancelAllLoadRequests=function(){for(var ue=0;ue<this.loadRequests.length;ue++)this.cancelLoadRequest(ue)},n.prototype.cancelLoadRequest=function(ue){if("number"==typeof ue&&ue<this.loadRequests.length&&this.loadRequests[ue].isActive){var he=this.loadRequests[ue];if(he.isActive=!1,he.tiles.length)for(var pe=he.tiles[0].image.src,me=he.tiles.pop();me;)me.xhr?me.xhr.abort():(me.image.onload=null,me.image.src=pe),me=he.tiles.pop()}},n})),define("spinViewer/DataProvider",[],(function(){"use strict";var e=function(ue,he){this.scene7config=ue,this.scene7dataProvider=he};return e.prototype.mapManifestData=function(ue){var he={frameUrls:[],maxSize:{width:0,height:0}};if(ue.set.item.length>0){var pe=ue.set.item[0].set?ue.set.item.length:1;if(1===pe)he.frameUrls[0]=ue.set.item.map(function(ue){return this.scene7config.imageUrlPattern.replace("[assetID]",ue.i.n)}.bind(this)),he.maxSize.width=parseInt(ue.set.item[0].dx,10),he.maxSize.height=parseInt(ue.set.item[0].dy,10);else{ue.set.item[0].set.item.length>0&&(he.maxSize.width=parseInt(ue.set.item[0].set.item[0].dx,10),he.maxSize.height=parseInt(ue.set.item[0].set.item[0].dy,10));for(var me=0;pe>me;me++)he.frameUrls[me]=ue.set.item[me].set.item.map(function(ue){return this.scene7config.imageUrlPattern.replace("[assetID]",ue.i.n)}.bind(this))}}return he},e.prototype.getSpinsetDataForImageUrls=function(ue,he,pe){for(var me,fe="[baseUrl]?imageset={[imageSet]}&req=set,json",ge=[],ve=0;ve<ue.length;ve++)me=ue[ve].split("?").shift(),fe=fe.replace("[baseUrl]",me),ge.push(me.split("/").pop());return fe=fe.replace("[imageSet]",ge.join(",")),this.scene7dataProvider.getManifestData(fe).then(function(ue){var pe=[];for(Array.isArray(ue.set.item)||(ue.set.item=[ue.set.item]),ve=0;ve<ue.set.item.length;ve++)pe.push(this.mapManifestData({set:{item:[ue.set.item[ve]]}}));return"function"==typeof he&&he(pe),pe}.bind(this)).fail((function(){"function"==typeof pe&&pe()}))},e.prototype.getSpinsetDataForImageUrl=function(ue,he,pe){var me=(ue=ue.split("?").shift())+"?req=set,json";return this.scene7dataProvider.getManifestData(me).then(function(ue){return ue.set.item=[ue.set.item],"function"==typeof he&&he(ue),ue}.bind(this)).fail((function(){"function"==typeof pe&&pe()}))},e.prototype.getSpinsetDataForProduct=function(ue,he,pe){var me=this.scene7config.spinsetManifestFileUrlPattern.replace("[productID]",ue);return this.scene7dataProvider.getManifestData(me).then(function(ue){var pe=this.mapManifestData(ue);return"function"==typeof he&&he(pe),pe}.bind(this)).fail((function(){"function"==typeof pe&&pe()}))},e})),define("spinViewer/AssetsProvider",[],(function(){"use strict";var e=function(ue){this.dataProvider=ue};return e.prototype.getAssets=function(ue,he,pe){Array.isArray(ue)?this.dataProvider.getSpinsetDataForImageUrls(ue,he,pe):isNaN(ue)?this.dataProvider.getSpinsetDataForImageUrl(ue,he,pe):this.dataProvider.getSpinsetDataForProduct(ue,he,pe)},e})),define("spinViewer/ViewModel",["ko"],(function(ue){return function t(he,pe){function n(){return Object.keys(fe).filter((function(ue){return fe[ue]}))}function r(ue){Object.keys(fe).forEach((function(he){ue!==he&&-1!==ge.indexOf(he)&&(fe[he]=!1)}))}var me,fe={};this.touchDevice="ontouchstart"in document.documentElement,this.events=he,this.messages=pe,this.isPannable=ue.observable(!1),this.isLoadingPageVisible=ue.observable(!1),this.loadingPercentage=ue.observable(0),this.isErrorPageVisible=ue.observable(!1),this.isHintVisible=ue.observable(!1),this.zoomPlus=ue.observable(!0),this.zoomMinus=ue.observable(!1),this.showHint=ue.observable(!1),this.zoomLevelText=ue.observable(""),this.zoomLevel=ue.observable(0),this.updateLiveRegion=function(ue){clearTimeout(me),this.zoomLevelText(ue),me=setTimeout(function(){this.zoomLevelText("")}.bind(this),1e3)}.bind(this),this.hintId=Math.random().toString(36).substring(7),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.handleOnFocus=function(){this.showHint(!0)}.bind(this),this.handleOnBlur=function(){this.showHint(!1)}.bind(this),this.handleClick=function(){this.events.trigger("zoomCenter")}.bind(this);var ge=["arrowleft","arrowright","arrowup","arrowdown","a","d","w","s"];this.handleKeyDown=function(ue,he){var pe=he.key.toLowerCase();if(fe[pe]=!0,-1===ge.indexOf(pe))return!0;var me=n().filter((function(ue){return-1===ge.indexOf(ue)}));me.length>0&&r(pe);var ve=function s(){return n().filter((function(ue){return-1!==ge.indexOf(ue)}))}().join(",");this.events.trigger("panImage",ve)},this.handleKeyUp=function(ue,he){var pe=he.key.toLowerCase();return fe[pe]=!1,-1!==ge.indexOf(pe)&&r(),!0},this.touchDevice||(this.events.on("canZoomIn",function(){this.zoomPlus(!0),this.zoomMinus(!1),0===this.zoomLevel()?(this.updateLiveRegion(pe.zoomTwoHundred),this.zoomLevel(200)):(this.updateLiveRegion(pe.zoomOneHundred),this.zoomLevel(0))}.bind(this)),this.events.on("cantZoomIn",function(){this.zoomPlus(!1),this.zoomMinus(!0),this.updateLiveRegion(pe.zoomFourHundred),this.zoomLevel(400)}.bind(this)))}})),define("utils/ImageScaler",["$"],(function(ue){"use strict";var t=function(he){this.options={},ue.extend(!0,this.options,he)};return t.prototype.getScaledImageSize=function(ue){return{width:this.getScaledImageLength(this.options.baseSize.width,this.options.maxSize.width,ue),height:this.getScaledImageLength(this.options.baseSize.height,this.options.maxSize.height,ue)}},t.prototype.getScaledImageLength=function(ue,he,pe){return pe?Math.pow(Math.pow(ue,1/pe)*he/ue,pe):ue},t})),define("utils/ImageZoomer",["ko","$","utils/sizeHelper"],(function(ue,he,pe){"use strict";var n=function(pe,me,fe,ge){this.events=he({}),this.imageLoader=pe,this.inputImageScaler=me,this.outputImageScaler=fe,this.currentLevel=ue.observable(0),this.options={},he.extend(!0,this.options,ge),this.options.zoomFactors=[0].concat(this.options.zoomFactors),this.updateCanZoomDummy=ue.observable(!1),this.currLoadRequestId=null,this.currentPosition={x:0,y:0},this.currentSize={width:0,height:0},this.canZoomIn=ue.computed(this.canZoomIn,this),this.canZoomOut=ue.computed(this.canZoomOut,this),this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded};return n.prototype.FULL_IMAGE_STATUS={NotLoaded:0,Loaded:2},n.prototype.init=function(){var ue=he(this.options.container);this.containerSize={width:this.options.containerSize?this.options.containerSize.width:ue.width(),height:this.options.containerSize?this.options.containerSize.height:ue.height()},this.currentSize=this.getOutputImageSize(this.currentLevel()),this.currentPosition=this.getSanitizedPosition(this.currentPosition,this.currentSize),this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy())},n.prototype.getNextClosestLevel=function(ue){for(var he=0,pe=0;pe<=this.options.zoomFactors.length;){var me=this.currentSize,fe=this.getOutputImageSize(pe);if(ue&&(me.width===fe.width||me.height===fe.height)){he=pe;break}if(me.width<fe.width||me.height<fe.height){he=pe;break}pe++}return he},n.prototype.resize=function(ue,he,pe){var me=this.getNextClosestLevel(!0);this.options.containerSize=he.containerSize,this.options.outputBaseSize=he.outputBaseSize,this.outputImageScaler.options.baseSize=he.imageScalersOptions.outputImageScalerOptions.baseSize,this.outputImageScaler.options.maxSize=he.imageScalersOptions.outputImageScalerOptions.maxSize,this.init(),ue&&this.zoom((function(){return me}),null,pe)},n.prototype.canZoomIn=function(){this.updateCanZoomDummy();var ue=this.currentSize,he=this.getOutputImageSize(this.options.zoomFactors.length-1);return ue.width<he.width||ue.height<he.height},n.prototype.canZoomOut=function(){this.updateCanZoomDummy();var ue=this.getOutputImageSize(0),he=this.currentSize;return ue.width<he.width||ue.height<he.height},n.prototype.zoomIn=function(ue,he,pe){return this.canZoomIn()?void this.zoom(this.getNextClosestLevel.bind(this,!1),he,pe):ue?void this.zoomReset(pe):void("function"==typeof pe&&pe())},n.prototype.zoomOut=function(ue,he){return this.canZoomOut()?void this.zoom(function(){return this.currentLevel()-1}.bind(this),ue,he):void("function"==typeof he&&he())},n.prototype.zoomReset=function(ue,he){if(he){var pe=this.getOutputImageSize(0),me=this.getZoomedImageBox(this.currentSize,this.currentPosition,pe);return this.currentSize=me.size,this.currentPosition=me.position,this.applyPosition(!0),this.currentLevel(0),void("function"==typeof ue&&setTimeout(ue,0))}this.zoom(function(){return 0}.bind(this),void 0,ue)},n.prototype.loadImage=function(ue,he,pe,me,fe,ge,ve,be,ye,Se,we){ue&&(this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.currLoadRequestId=this.imageLoader.loadImageToContainer(ue,he,pe,me,function(){this.currLoadRequestId=null,"function"==typeof fe&&setTimeout(fe,0)}.bind(this),ge,ve,be,ye,Se,we))},n.prototype.zoom=function(ue,he,pe,me){this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.fullImageStatus!==this.FULL_IMAGE_STATUS.Loaded&&(this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded);var fe=ue(),ge=(this.getInputImageSize(fe),this.getOutputImageSize(fe)),ve=this.getZoomedImageBox(this.currentSize,this.currentPosition,ge,he),be=fe>0;this.currentSize=ve.size,this.currentPosition=ve.position,this.applyPosition(!0),this.fullImageStatus===this.FULL_IMAGE_STATUS.NotLoaded&&be&&(this.loadImage(this.options.baseUrl,this.options.container,this.getInputImageSize(this.options.zoomFactors.length-1),this.currentSize,function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.Loaded,this.applyPosition(),"function"==typeof pe&&pe()}.bind(this),function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded,"function"==typeof me&&me()}.bind(this),ve.focalPointOnSourceImage,this.getVisibleArea(ve.position),!0,this.options.zoomJpgQlt,{position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px"}),this.applyPosition(!0)),this.currentLevel(fe),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.getVisibleArea=function(ue){return{topLeft:{x:-ue.x,y:-ue.y},bottomRight:{x:this.containerSize.width-ue.x,y:this.containerSize.height-ue.y}}},n.prototype.getZoomedImageBox=function(ue,he,pe,me){me||(me={x:this.containerSize.width/2,y:this.containerSize.height/2}),me=this.getSanitizedPointOnImage(me,ue);var fe=this.getPointOnOutputImageFromContainer(me,ue),ge=pe.width-ue.width,ve=pe.height-ue.height,be=pe.width/ue.width,ye={x:fe.x*be,y:fe.y*be},Se=ge*(fe.x/ue.width),we=ve*(fe.y/ue.height);return{size:pe,position:this.getSanitizedPosition({x:he.x-Se,y:he.y-we},pe),focalPointOnSourceImage:ye}},n.prototype.moveBy=function(ue){this.canZoomOut()&&(ue.x||ue.y)&&(this.currentPosition=this.getSanitizedPosition({x:this.currentPosition.x+ue.x,y:this.currentPosition.y+ue.y},this.currentSize),this.applyPosition())},n.prototype.applyPosition=function(ue){var pe=he(this.options.container),me=Math.floor(this.currentSize.width),fe=Math.floor(this.currentSize.height),ge=pe.find(".fullImageContainer, .partitionedImageContainer");ge.css({position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px",width:me+"px",height:fe+"px"}),ge.attr({"data-output-width":me,"data-output-height":fe})},n.prototype.getInputImageSize=function(ue){var he=this.options.zoomFactors[ue],pe=this.inputImageScaler.getScaledImageSize(he);return pe.width<this.options.outputBaseSize.width||pe.height<this.options.outputBaseSize.height?this.options.outputBaseSize:pe},n.prototype.getOutputImageSize=function(ue){if(0===ue)return this.options.outputBaseSize;var he=this.options.zoomFactors[ue],pe=this.outputImageScaler.getScaledImageSize(he);return pe.width<this.options.outputBaseSize.width||pe.height<this.options.outputBaseSize.height?this.options.outputBaseSize:pe},n.prototype.setPlaceholderImage=function(ue){var pe=(this.getInputImageSize(0),this.getOutputImageSize(0)),me=this.getZoomedImageBox(this.currentSize,this.currentPosition,pe);this.currentSize=me.size,this.currentPosition=me.position;var fe=he(this.options.container).children(),ge=document.createElement("div");ge.className="fullImageContainer",ue.className="img",ue.style.width="100%",ue.style.height="100%",ge.appendChild(ue),this.options.container.appendChild(ge),this.applyPosition(!0),fe.remove()},n.prototype.getBezel=function(ue){return{horizontal:Math.max(this.containerSize.width-Math.floor(ue.width),0)/2,vertical:Math.max(this.containerSize.height-Math.floor(ue.height),0)/2}},n.prototype.getSanitizedPosition=function(ue,he){var pe=this.getBezel(he),me={x:Math.floor(ue.x),y:Math.floor(ue.y)};return me.x=Math.min(me.x,pe.horizontal),me.y=Math.min(me.y,pe.vertical),me.x=Math.max(me.x,this.containerSize.width-Math.floor(he.width)-pe.horizontal),me.y=Math.max(me.y,this.containerSize.height-Math.floor(he.height)-pe.vertical),me},n.prototype.getSanitizedPointOnImage=function(ue,he){var pe=this.getBezel(he),me={x:ue.x,y:ue.y};return me.x=Math.max(me.x,pe.horizontal),me.y=Math.max(me.y,pe.vertical),me.x=Math.min(me.x,this.containerSize.width-pe.horizontal),me.y=Math.min(me.y,this.containerSize.height-pe.vertical),me},n.prototype.getPointOnOutputImageFromContainer=function(ue){return{x:ue.x-this.currentPosition.x,y:ue.y-this.currentPosition.y}},n.prototype.getCurrentImageDisplaySize=function(){return this.currentSize},n.prototype.scale=function(ue,he,pe,me){pe||(pe={x:0,y:0});var fe={width:Math.max(ue.width*he,this.options.outputBaseSize.width),height:Math.max(ue.height*he,this.options.outputBaseSize.height)};if(!me){var ge=this.getOutputImageSize(this.options.zoomFactors.length-1);fe.width=Math.min(ge.width,fe.width),fe.height=Math.min(ge.height,fe.height)}var ve=this.getZoomedImageBox(this.currentSize,this.currentPosition,fe,pe);this.currentPosition=ve.position,this.currentSize=ve.size,this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.setPartitionedImageVisibility=function(){return this.options.container.querySelector(".partitionedImageContainer")?this.currentSize.width===this.options.outputBaseSize.width?void(this.options.container.querySelector(".partitionedImageContainer").style.display="none"):void(this.options.container.querySelector(".partitionedImageContainer").style.display="block"):void 0},n})),function(ue,he,pe,me){"use strict";function s(ue,he,pe){return setTimeout(l(ue,pe),he)}function r(ue,he,pe){return!!Array.isArray(ue)&&(o(ue,pe[he],pe),!0)}function o(ue,he,pe){var fe;if(ue)if(ue.forEach)ue.forEach(he,pe);else if(ue.length!==me)for(fe=0;fe<ue.length;)he.call(pe,ue[fe],fe,ue),fe++;else for(fe in ue)ue.hasOwnProperty(fe)&&he.call(pe,ue[fe],fe,ue)}function a(he,pe,me){var fe="DEPRECATED METHOD: "+pe+"\n"+me+" AT \n";return function(){var pe=new Error("get-stack-trace"),me=pe&&pe.stack?pe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ge=ue.console&&(ue.console.warn||ue.console.log);return ge&&ge.call(ue.console,fe,me),he.apply(this,arguments)}}function c(ue,he,pe){var me,ge=he.prototype;(me=ue.prototype=Object.create(ge)).constructor=ue,me._super=ge,pe&&fe(me,pe)}function l(ue,he){return function(){return ue.apply(he,arguments)}}function d(ue,he){return typeof ue==be?ue.apply(he&&he[0]||me,he):ue}function u(ue,he){return ue===me?he:ue}function h(ue,he,pe){o(g(he),(function(he){ue.addEventListener(he,pe,!1)}))}function p(ue,he,pe){o(g(he),(function(he){ue.removeEventListener(he,pe,!1)}))}function m(ue,he){for(;ue;){if(ue==he)return!0;ue=ue.parentNode}return!1}function f(ue,he){return ue.indexOf(he)>-1}function g(ue){return ue.trim().split(/\s+/g)}function v(ue,he,pe){if(ue.indexOf&&!pe)return ue.indexOf(he);for(var me=0;me<ue.length;){if(pe&&ue[me][pe]==he||!pe&&ue[me]===he)return me;me++}return-1}function b(ue){return Array.prototype.slice.call(ue,0)}function y(ue,he,pe){for(var me=[],fe=[],ge=0;ge<ue.length;){var ve=he?ue[ge][he]:ue[ge];v(fe,ve)<0&&me.push(ue[ge]),fe[ge]=ve,ge++}return pe&&(me=he?me.sort((function(ue,pe){return ue[he]>pe[he]})):me.sort()),me}function S(ue,he){for(var pe,fe,ve=he[0].toUpperCase()+he.slice(1),be=0;be<ge.length;){if((fe=(pe=ge[be])?pe+ve:he)in ue)return fe;be++}return me}function I(he){var pe=he.ownerDocument||he;return pe.defaultView||pe.parentWindow||ue}function P(ue,he){var pe=this;this.manager=ue,this.callback=he,this.element=ue.element,this.target=ue.options.inputTarget,this.domHandler=function(he){d(ue.options.enable,[ue])&&pe.handler(he)},this.init()}function x(ue,he,pe){var me=pe.pointers.length,fe=pe.changedPointers.length,ge=he&Ae&&me-fe==0,ve=he&(Me|Re)&&me-fe==0;pe.isFirst=!!ge,pe.isFinal=!!ve,ge&&(ue.session={}),pe.eventType=he,function T(ue,he){var pe=ue.session,me=he.pointers,fe=me.length;pe.firstInput||(pe.firstInput=E(he)),fe>1&&!pe.firstMultiple?pe.firstMultiple=E(he):1===fe&&(pe.firstMultiple=!1);var ge=pe.firstInput,ve=pe.firstMultiple,be=ve?ve.center:ge.center,ye=he.center=k(me);he.timeStamp=we(),he.deltaTime=he.timeStamp-ge.timeStamp,he.angle=R(be,ye),he.distance=M(be,ye),function z(ue,he){var pe=he.center,me=ue.offsetDelta||{},fe=ue.prevDelta||{},ge=ue.prevInput||{};he.eventType!==Ae&&ge.eventType!==Me||(fe=ue.prevDelta={x:ge.deltaX||0,y:ge.deltaY||0},me=ue.offsetDelta={x:pe.x,y:pe.y}),he.deltaX=fe.x+(pe.x-me.x),he.deltaY=fe.y+(pe.y-me.y)}(pe,he),he.offsetDirection=V(he.deltaX,he.deltaY);var xe=A(he.deltaTime,he.deltaX,he.deltaY);he.overallVelocityX=xe.x,he.overallVelocityY=xe.y,he.overallVelocity=Se(xe.x)>Se(xe.y)?xe.x:xe.y,he.scale=ve?function F(ue,he){return M(he[0],he[1],$e)/M(ue[0],ue[1],$e)}(ve.pointers,me):1,he.rotation=ve?function L(ue,he){return R(he[1],he[0],$e)+R(ue[1],ue[0],$e)}(ve.pointers,me):0,he.maxPointers=pe.prevInput?he.pointers.length>pe.prevInput.maxPointers?he.pointers.length:pe.prevInput.maxPointers:he.pointers.length,C(pe,he);var Ie=ue.element;m(he.srcEvent.target,Ie)&&(Ie=he.srcEvent.target),he.target=Ie}(ue,pe),ue.emit("hammer.input",pe),ue.recognize(pe),ue.session.prevInput=pe}function C(ue,he){var pe,fe,ge,ve,be=ue.lastInterval||he,ye=he.timeStamp-be.timeStamp;if(he.eventType!=Re&&(ye>ke||be.velocity===me)){var we=he.deltaX-be.deltaX,xe=he.deltaY-be.deltaY,Ie=A(ye,we,xe);fe=Ie.x,ge=Ie.y,pe=Se(Ie.x)>Se(Ie.y)?Ie.x:Ie.y,ve=V(we,xe),ue.lastInterval=he}else pe=be.velocity,fe=be.velocityX,ge=be.velocityY,ve=be.direction;he.velocity=pe,he.velocityX=fe,he.velocityY=ge,he.direction=ve}function E(ue){for(var he=[],pe=0;pe<ue.pointers.length;)he[pe]={clientX:ye(ue.pointers[pe].clientX),clientY:ye(ue.pointers[pe].clientY)},pe++;return{timeStamp:we(),pointers:he,center:k(he),deltaX:ue.deltaX,deltaY:ue.deltaY}}function k(ue){var he=ue.length;if(1===he)return{x:ye(ue[0].clientX),y:ye(ue[0].clientY)};for(var pe=0,me=0,fe=0;he>fe;)pe+=ue[fe].clientX,me+=ue[fe].clientY,fe++;return{x:ye(pe/he),y:ye(me/he)}}function A(ue,he,pe){return{x:he/ue||0,y:pe/ue||0}}function V(ue,he){return ue===he?Le:Se(ue)>=Se(he)?0>ue?Fe:De:0>he?Oe:Ue}function M(ue,he,pe){pe||(pe=Ge);var me=he[pe[0]]-ue[pe[0]],fe=he[pe[1]]-ue[pe[1]];return Math.sqrt(me*me+fe*fe)}function R(ue,he,pe){pe||(pe=Ge);var me=he[pe[0]]-ue[pe[0]],fe=he[pe[1]]-ue[pe[1]];return 180*Math.atan2(fe,me)/Math.PI}function D(){this.evEl=He,this.evWin=Ze,this.pressed=!1,P.apply(this,arguments)}function O(){this.evEl=Xe,this.evWin=Je,P.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Qe,this.evWin=et,this.started=!1,P.apply(this,arguments)}function B(ue,he){var pe=b(ue.touches),me=b(ue.changedTouches);return he&(Me|Re)&&(pe=y(pe.concat(me),"identifier",!0)),[pe,me]}function N(){this.evTarget=it,this.targetIds={},P.apply(this,arguments)}function W(ue,he){var pe=b(ue.touches),me=this.targetIds;if(he&(Ae|Ve)&&1===pe.length)return me[pe[0].identifier]=!0,[pe,pe];var fe,ge,ve=b(ue.changedTouches),be=[],ye=this.target;if(ge=pe.filter((function(ue){return m(ue.target,ye)})),he===Ae)for(fe=0;fe<ge.length;)me[ge[fe].identifier]=!0,fe++;for(fe=0;fe<ve.length;)me[ve[fe].identifier]&&be.push(ve[fe]),he&(Me|Re)&&delete me[ve[fe].identifier],fe++;return be.length?[y(ge.concat(be),"identifier",!0),be]:void 0}function G(){P.apply(this,arguments);var ue=l(this.handler,this);this.touch=new N(this.manager,ue),this.mouse=new D(this.manager,ue),this.primaryTouch=null,this.lastTouches=[]}function $(ue,he){ue&Ae?(this.primaryTouch=he.changedPointers[0].identifier,q.call(this,he)):ue&(Me|Re)&&q.call(this,he)}function q(ue){var he=ue.changedPointers[0];if(he.identifier===this.primaryTouch){var pe={x:he.clientX,y:he.clientY};this.lastTouches.push(pe);var me=this.lastTouches;setTimeout((function(){var ue=me.indexOf(pe);ue>-1&&me.splice(ue,1)}),nt)}}function H(ue){for(var he=ue.srcEvent.clientX,pe=ue.srcEvent.clientY,me=0;me<this.lastTouches.length;me++){var fe=this.lastTouches[me],ge=Math.abs(he-fe.x),ve=Math.abs(pe-fe.y);if(st>=ge&&st>=ve)return!0}return!1}function Z(ue,he){this.manager=ue,this.set(he)}function X(ue){this.options=fe({},this.defaults,ue||{}),this.id=function w(){return Pe++}(),this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=mt,this.simultaneous={},this.requireFail=[]}function J(ue){return ue&yt?"cancel":ue&vt?"end":ue&gt?"move":ue&ft?"start":""}function K(ue){return ue==Ue?"down":ue==Oe?"up":ue==Fe?"left":ue==De?"right":""}function Q(ue,he){var pe=he.manager;return pe?pe.get(ue):ue}function ee(){X.apply(this,arguments)}function te(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ie(){ee.apply(this,arguments)}function ne(){X.apply(this,arguments),this._timer=null,this._input=null}function se(){ee.apply(this,arguments)}function re(){ee.apply(this,arguments)}function oe(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ae(ue,he){return(he=he||{}).recognizers=u(he.recognizers,ae.defaults.preset),new ce(ue,he)}function ce(ue,he){this.options=fe({},ae.defaults,he||{}),this.options.inputTarget=this.options.inputTarget||ue,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ue,this.input=function _(ue){return new(ue.options.inputClass||(Te?O:ze?N:_e?G:D))(ue,x)}(this),this.touchAction=new Z(this,this.options.touchAction),le(this,!0),o(this.options.recognizers,(function(ue){var he=this.add(new ue[0](ue[1]));ue[2]&&he.recognizeWith(ue[2]),ue[3]&&he.requireFailure(ue[3])}),this)}function le(ue,he){var pe,me=ue.element;me.style&&(o(ue.options.cssProps,(function(fe,ge){pe=S(me.style,ge),he?(ue.oldCssProps[pe]=me.style[pe],me.style[pe]=fe):me.style[pe]=ue.oldCssProps[pe]||""})),he||(ue.oldCssProps={}))}function de(ue,pe){var me=he.createEvent("Event");me.initEvent(ue,!0,!0),me.gesture=pe,pe.target.dispatchEvent(me)}var fe,ge=["","webkit","Moz","MS","ms","o"],ve=he.createElement("div"),be="function",ye=Math.round,Se=Math.abs,we=Date.now;fe="function"!=typeof Object.assign?function(ue){if(ue===me||null===ue)throw new TypeError("Cannot convert undefined or null to object");for(var he=Object(ue),pe=1;pe<arguments.length;pe++){var fe=arguments[pe];if(fe!==me&&null!==fe)for(var ge in fe)fe.hasOwnProperty(ge)&&(he[ge]=fe[ge])}return he}:Object.assign;var xe=a((function(ue,he,pe){for(var fe=Object.keys(he),ge=0;ge<fe.length;)(!pe||pe&&ue[fe[ge]]===me)&&(ue[fe[ge]]=he[fe[ge]]),ge++;return ue}),"extend","Use `assign`."),Ie=a((function(ue,he){return xe(ue,he,!0)}),"merge","Use `assign`."),Pe=1,_e="ontouchstart"in ue,Te=S(ue,"PointerEvent")!==me,ze=_e&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ce="touch",Ee="mouse",ke=25,Ae=1,Ve=2,Me=4,Re=8,Le=1,Fe=2,De=4,Oe=8,Ue=16,Be=Fe|De,Ne=Oe|Ue,We=Be|Ne,Ge=["x","y"],$e=["clientX","clientY"];P.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(I(this.element),this.evWin,this.domHandler)}};var qe={mousedown:Ae,mousemove:Ve,mouseup:Me},He="mousedown",Ze="mousemove mouseup";c(D,P,{handler:function(ue){var he=qe[ue.type];he&Ae&&0===ue.button&&(this.pressed=!0),he&Ve&&1!==ue.which&&(he=Me),this.pressed&&(he&Me&&(this.pressed=!1),this.callback(this.manager,he,{pointers:[ue],changedPointers:[ue],pointerType:Ee,srcEvent:ue}))}});var je={pointerdown:Ae,pointermove:Ve,pointerup:Me,pointercancel:Re,pointerout:Re},Ye={2:Ce,3:"pen",4:Ee,5:"kinect"},Xe="pointerdown",Je="pointermove pointerup pointercancel";ue.MSPointerEvent&&!ue.PointerEvent&&(Xe="MSPointerDown",Je="MSPointerMove MSPointerUp MSPointerCancel"),c(O,P,{handler:function(ue){var he=this.store,pe=!1,me=ue.type.toLowerCase().replace("ms",""),fe=je[me],ge=Ye[ue.pointerType]||ue.pointerType,ve=ge==Ce,be=v(he,ue.pointerId,"pointerId");fe&Ae&&(0===ue.button||ve)?0>be&&(he.push(ue),be=he.length-1):fe&(Me|Re)&&(pe=!0),0>be||(he[be]=ue,this.callback(this.manager,fe,{pointers:he,changedPointers:[ue],pointerType:ge,srcEvent:ue}),pe&&he.splice(be,1))}});var Ke={touchstart:Ae,touchmove:Ve,touchend:Me,touchcancel:Re},Qe="touchstart",et="touchstart touchmove touchend touchcancel";c(U,P,{handler:function(ue){var he=Ke[ue.type];if(he===Ae&&(this.started=!0),this.started){var pe=B.call(this,ue,he);he&(Me|Re)&&pe[0].length-pe[1].length==0&&(this.started=!1),this.callback(this.manager,he,{pointers:pe[0],changedPointers:pe[1],pointerType:Ce,srcEvent:ue})}}});var tt={touchstart:Ae,touchmove:Ve,touchend:Me,touchcancel:Re},it="touchstart touchmove touchend touchcancel";c(N,P,{handler:function(ue){var he=tt[ue.type],pe=W.call(this,ue,he);pe&&this.callback(this.manager,he,{pointers:pe[0],changedPointers:pe[1],pointerType:Ce,srcEvent:ue})}});var nt=2500,st=25;c(G,P,{handler:function(ue,he,pe){var me=pe.pointerType==Ce,fe=pe.pointerType==Ee;if(!(fe&&pe.sourceCapabilities&&pe.sourceCapabilities.firesTouchEvents)){if(me)$.call(this,he,pe);else if(fe&&H.call(this,pe))return;this.callback(ue,he,pe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rt=S(ve.style,"touchAction"),ot=rt!==me,at="compute",ct="auto",lt="manipulation",dt="none",ut="pan-x",ht="pan-y",pt=function Y(){if(!ot)return!1;var he={},pe=ue.CSS&&ue.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(me){he[me]=!pe||ue.CSS.supports("touch-action",me)})),he}();Z.prototype={set:function(ue){ue==at&&(ue=this.compute()),ot&&this.manager.element.style&&pt[ue]&&(this.manager.element.style[rt]=ue),this.actions=ue.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ue=[];return o(this.manager.recognizers,(function(he){d(he.options.enable,[he])&&(ue=ue.concat(he.getTouchAction()))})),function j(ue){if(f(ue,dt))return dt;var he=f(ue,ut),pe=f(ue,ht);return he&&pe?dt:he||pe?he?ut:ht:f(ue,lt)?lt:ct}(ue.join(" "))},preventDefaults:function(ue){var he=ue.srcEvent,pe=ue.offsetDirection;if(!this.manager.session.prevented){var me=this.actions,fe=f(me,dt)&&!pt[dt],ge=f(me,ht)&&!pt[ht],ve=f(me,ut)&&!pt[ut];if(fe){var be=1===ue.pointers.length,ye=ue.distance<2,Se=ue.deltaTime<250;if(be&&ye&&Se)return}return ve&&ge?void 0:fe||ge&&pe&Be||ve&&pe&Ne?this.preventSrc(he):void 0}he.preventDefault()},preventSrc:function(ue){this.manager.session.prevented=!0,ue.preventDefault()}};var mt=1,ft=2,gt=4,vt=8,bt=vt,yt=16,St=32;X.prototype={defaults:{},set:function(ue){return fe(this.options,ue),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ue){if(r(ue,"recognizeWith",this))return this;var he=this.simultaneous;return he[(ue=Q(ue,this)).id]||(he[ue.id]=ue,ue.recognizeWith(this)),this},dropRecognizeWith:function(ue){return r(ue,"dropRecognizeWith",this)||(ue=Q(ue,this),delete this.simultaneous[ue.id]),this},requireFailure:function(ue){if(r(ue,"requireFailure",this))return this;var he=this.requireFail;return-1===v(he,ue=Q(ue,this))&&(he.push(ue),ue.requireFailure(this)),this},dropRequireFailure:function(ue){if(r(ue,"dropRequireFailure",this))return this;ue=Q(ue,this);var he=v(this.requireFail,ue);return he>-1&&this.requireFail.splice(he,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ue){return!!this.simultaneous[ue.id]},emit:function(ue){function t(pe){he.manager.emit(pe,ue)}var he=this,pe=this.state;vt>pe&&t(he.options.event+J(pe)),t(he.options.event),ue.additionalEvent&&t(ue.additionalEvent),pe>=vt&&t(he.options.event+J(pe))},tryEmit:function(ue){return this.canEmit()?this.emit(ue):void(this.state=St)},canEmit:function(){for(var ue=0;ue<this.requireFail.length;){if(!(this.requireFail[ue].state&(St|mt)))return!1;ue++}return!0},recognize:function(ue){var he=fe({},ue);return d(this.options.enable,[this,he])?(this.state&(bt|yt|St)&&(this.state=mt),this.state=this.process(he),void(this.state&(ft|gt|vt|yt)&&this.tryEmit(he))):(this.reset(),void(this.state=St))},process:function(ue){},getTouchAction:function(){},reset:function(){}},c(ee,X,{defaults:{pointers:1},attrTest:function(ue){var he=this.options.pointers;return 0===he||ue.pointers.length===he},process:function(ue){var he=this.state,pe=ue.eventType,me=he&(ft|gt),fe=this.attrTest(ue);return me&&(pe&Re||!fe)?he|yt:me||fe?pe&Me?he|vt:he&ft?he|gt:ft:St}}),c(te,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:We},getTouchAction:function(){var ue=this.options.direction,he=[];return ue&Be&&he.push(ht),ue&Ne&&he.push(ut),he},directionTest:function(ue){var he=this.options,pe=!0,me=ue.distance,fe=ue.direction,ge=ue.deltaX,ve=ue.deltaY;return fe&he.direction||(he.direction&Be?(fe=0===ge?Le:0>ge?Fe:De,pe=ge!=this.pX,me=Math.abs(ue.deltaX)):(fe=0===ve?Le:0>ve?Oe:Ue,pe=ve!=this.pY,me=Math.abs(ue.deltaY))),ue.direction=fe,pe&&me>he.threshold&&fe&he.direction},attrTest:function(ue){return ee.prototype.attrTest.call(this,ue)&&(this.state&ft||!(this.state&ft)&&this.directionTest(ue))},emit:function(ue){this.pX=ue.deltaX,this.pY=ue.deltaY;var he=K(ue.direction);he&&(ue.additionalEvent=this.options.event+he),this._super.emit.call(this,ue)}}),c(ie,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(ue){return this._super.attrTest.call(this,ue)&&(Math.abs(ue.scale-1)>this.options.threshold||this.state&ft)},emit:function(ue){if(1!==ue.scale){var he=ue.scale<1?"in":"out";ue.additionalEvent=this.options.event+he}this._super.emit.call(this,ue)}}),c(ne,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ct]},process:function(ue){var he=this.options,pe=ue.pointers.length===he.pointers,me=ue.distance<he.threshold,fe=ue.deltaTime>he.time;if(this._input=ue,!me||!pe||ue.eventType&(Me|Re)&&!fe)this.reset();else if(ue.eventType&Ae)this.reset(),this._timer=s((function(){this.state=bt,this.tryEmit()}),he.time,this);else if(ue.eventType&Me)return bt;return St},reset:function(){clearTimeout(this._timer)},emit:function(ue){this.state===bt&&(ue&&ue.eventType&Me?this.manager.emit(this.options.event+"up",ue):(this._input.timeStamp=we(),this.manager.emit(this.options.event,this._input)))}}),c(se,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(ue){return this._super.attrTest.call(this,ue)&&(Math.abs(ue.rotation)>this.options.threshold||this.state&ft)}}),c(re,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Be|Ne,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(ue){var he,pe=this.options.direction;return pe&(Be|Ne)?he=ue.overallVelocity:pe&Be?he=ue.overallVelocityX:pe&Ne&&(he=ue.overallVelocityY),this._super.attrTest.call(this,ue)&&pe&ue.offsetDirection&&ue.distance>this.options.threshold&&ue.maxPointers==this.options.pointers&&Se(he)>this.options.velocity&&ue.eventType&Me},emit:function(ue){var he=K(ue.offsetDirection);he&&this.manager.emit(this.options.event+he,ue),this.manager.emit(this.options.event,ue)}}),c(oe,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[lt]},process:function(ue){var he=this.options,pe=ue.pointers.length===he.pointers,me=ue.distance<he.threshold,fe=ue.deltaTime<he.time;if(this.reset(),ue.eventType&Ae&&0===this.count)return this.failTimeout();if(me&&fe&&pe){if(ue.eventType!=Me)return this.failTimeout();var ge=!this.pTime||ue.timeStamp-this.pTime<he.interval,ve=!this.pCenter||M(this.pCenter,ue.center)<he.posThreshold;if(this.pTime=ue.timeStamp,this.pCenter=ue.center,ve&&ge?this.count+=1:this.count=1,this._input=ue,0===this.count%he.taps)return this.hasRequireFailures()?(this._timer=s((function(){this.state=bt,this.tryEmit()}),he.interval,this),ft):bt}return St},failTimeout:function(){return this._timer=s((function(){this.state=St}),this.options.interval,this),St},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==bt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ae.VERSION="2.0.7",ae.defaults={domEvents:!1,touchAction:at,enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[ie,{enable:!1},["rotate"]],[re,{direction:Be}],[te,{direction:Be},["swipe"]],[oe],[oe,{event:"doubletap",taps:2},["tap"]],[ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ce.prototype={set:function(ue){return fe(this.options,ue),ue.touchAction&&this.touchAction.update(),ue.inputTarget&&(this.input.destroy(),this.input.target=ue.inputTarget,this.input.init()),this},stop:function(ue){this.session.stopped=ue?2:1},recognize:function(ue){var he=this.session;if(!he.stopped){this.touchAction.preventDefaults(ue);var pe,me=this.recognizers,fe=he.curRecognizer;(!fe||fe&&fe.state&bt)&&(fe=he.curRecognizer=null);for(var ge=0;ge<me.length;)pe=me[ge],2===he.stopped||fe&&pe!=fe&&!pe.canRecognizeWith(fe)?pe.reset():pe.recognize(ue),!fe&&pe.state&(ft|gt|vt)&&(fe=he.curRecognizer=pe),ge++}},get:function(ue){if(ue instanceof X)return ue;for(var he=this.recognizers,pe=0;pe<he.length;pe++)if(he[pe].options.event==ue)return he[pe];return null},add:function(ue){if(r(ue,"add",this))return this;var he=this.get(ue.options.event);return he&&this.remove(he),this.recognizers.push(ue),ue.manager=this,this.touchAction.update(),ue},remove:function(ue){if(r(ue,"remove",this))return this;if(ue=this.get(ue)){var he=this.recognizers,pe=v(he,ue);-1!==pe&&(he.splice(pe,1),this.touchAction.update())}return this},on:function(ue,he){if(ue!==me&&he!==me){var pe=this.handlers;return o(g(ue),(function(ue){pe[ue]=pe[ue]||[],pe[ue].push(he)})),this}},off:function(ue,he){if(ue!==me){var pe=this.handlers;return o(g(ue),(function(ue){he?pe[ue]&&pe[ue].splice(v(pe[ue],he),1):delete pe[ue]})),this}},emit:function(ue,he){this.options.domEvents&&de(ue,he);var pe=this.handlers[ue]&&this.handlers[ue].slice();if(pe&&pe.length){he.type=ue,he.preventDefault=function(){he.srcEvent.preventDefault()};for(var me=0;me<pe.length;)pe[me](he),me++}},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},fe(ae,{INPUT_START:Ae,INPUT_MOVE:Ve,INPUT_END:Me,INPUT_CANCEL:Re,STATE_POSSIBLE:mt,STATE_BEGAN:ft,STATE_CHANGED:gt,STATE_ENDED:vt,STATE_RECOGNIZED:bt,STATE_CANCELLED:yt,STATE_FAILED:St,DIRECTION_NONE:Le,DIRECTION_LEFT:Fe,DIRECTION_RIGHT:De,DIRECTION_UP:Oe,DIRECTION_DOWN:Ue,DIRECTION_HORIZONTAL:Be,DIRECTION_VERTICAL:Ne,DIRECTION_ALL:We,Manager:ce,Input:P,TouchAction:Z,TouchInput:N,MouseInput:D,PointerEventInput:O,TouchMouseInput:G,SingleTouchInput:U,Recognizer:X,AttrRecognizer:ee,Tap:oe,Pan:te,Swipe:re,Pinch:ie,Rotate:se,Press:ne,on:h,off:p,each:o,merge:Ie,extend:xe,assign:fe,inherit:c,bindFn:l,prefixed:S}),(void 0!==ue?ue:"undefined"!=typeof self?self:{}).Hammer=ae,"function"==typeof define&&define.amd?define("hammer",[],(function(){return ae})):"undefined"!=typeof module&&module.exports?module.exports=ae:ue.Hammer=ae}(window,document),define("spinViewer/Controller",["ko","$","utils/deviceHelper","utils/sizeHelper","utils/ImageScaler","utils/ImageZoomer","hammer"],(function(ue,he,pe,me,fe,ge,ve){"use strict";var a=function(me,fe,ge,ve,be,ye){this.assetsProvider=me,this.imageLoader=fe,this.loadedAssets=null,this.events=ye,this.containers=be,this.params={showHint:!1,spinSpeed:1,maxPixelRatio:1.5,hintDisplayTime:3e3,preloadingTimeout:0,handleLoadingErrors:!0,framesCachingQueueInterval:35,useInitialAnimation:!1,animationFramesCount:-1,animationIntervalStart:40,animationIntervalPeak:5},this.viewModel=ve,this.updateZoomerDummy=ue.observable(!1),this.initState=this.INIT_STATE.NotInitialized,this.frames=[[]],this.lastInitArguments=null,this.currentRowIndex=ue.observable(0),this.currentFrameIndex=ue.observable(),he.extend(!0,this.params,ge),this.params.devicePixelRatio=Math.min(pe.getDevicePixelRatio(this.containers.window),this.params.maxPixelRatio),this.isPannable=ue.computed(this.isPannable,this),this.hasError=ue.observable(!1),this.getCurrentZoomer=ue.computed(this.getCurrentZoomer,this),this.setEventListeners(),this.viewModel.isPannable(this.isPannable())};return a.prototype.MIN_GESTURE_RECOGNIZE_DISTANCE=10,a.prototype.INIT_STATE={NotInitialized:0,Initializing:1,Initialized:2},a.prototype.init=function(ue,he){return this.initState!==this.INIT_STATE.Initializing?(he&&he.initImage&&(he=he.initImage.image),this.lastInitArguments=arguments,this.updateSpinContainerSize(),this.targetSize=this.getContainerInitialTargetSize(),he?(this.setInitialImage(he),this.initState=this.INIT_STATE.Initialized,void this.showFrame(0,0,!0)):this.initState!==this.INIT_STATE.Initialized?(this.initState=this.INIT_STATE.Initializing,void this.preloadImages(0,0)):void this.resize(function(){this.showFrame(0,0,!0)}.bind(this))):void 0},a.prototype.isVisible=function(){return"none"!==window.getComputedStyle(this.containers.spin).display},a.prototype.setInitialImage=function(ue){var he=this.getZoomer(0,0);he.options.baseUrl=this.loadedAssets.frameUrls[0][0],he.zoomReset(null,!0),ue.className="img",he.setPlaceholderImage(ue)},a.prototype.updateSpinContainerSize=function(){this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.spinContainerSize={width:this.spinContainerRect.width,height:this.spinContainerRect.height}},a.prototype.isPannable=function(){var ue=this.getCurrentZoomer();return ue&&ue.canZoomOut()},a.prototype.zoomIn=function(ue,he,pe){var me=this.getCurrentZoomer();return me&&(ue||me.canZoomIn())?(this.events.trigger("zoomedIn"),this.imageLoader.cancelAllLoadRequests(),me.zoomIn(ue,he,pe),void(me.canZoomIn()?this.viewModel.events.trigger("canZoomIn"):this.viewModel.events.trigger("cantZoomIn"))):void("function"==typeof pe&&pe())},a.prototype.zoomReset=function(ue){var he=this.getCurrentZoomer();return he?(this.imageLoader.cancelAllLoadRequests(),void he.zoomReset(ue)):void("function"==typeof ue&&ue())},a.prototype.zoomOut=function(ue,he){var pe=this.getCurrentZoomer();return pe&&pe.canZoomOut()?(this.imageLoader.cancelAllLoadRequests(),void pe.zoomOut(focalPointInContainer,he)):void("function"==typeof he&&he())},a.prototype.getEventPositionRelativeToTarget=function(ue,he){return{x:(ue.center?ue.center.x:ue.clientX)-he.left,y:(ue.center?ue.center.y:ue.clientY)-he.top}},a.prototype.resize=function(ue){if(this.isVisible()){var he=this.frames.length*this.frames[0].length,n=function(){--he||"function"==typeof ue&&ue()};if(this.updateSpinContainerSize(),!he)return void("function"==typeof ue&&ue());for(var pe=0;pe<this.frames.length;pe++)for(var me=0;me<this.frames[pe].length;me++){var fe=this.getOutputBaseSize();this.frames[pe][me].resize(!0,{containerSize:this.spinContainerSize,outputBaseSize:fe,imageScalersOptions:this.getImageScalersOptions(fe)},n)}}},a.prototype.animationIntervalEasing=function(ue,he){var pe=this.params.animationIntervalPeak-this.params.animationIntervalStart,me=(Math.sin(2*Math.PI*ue/he-Math.PI/2)+1)/2;return this.params.animationIntervalStart+me*pe},a.prototype.refresh=function(){this.init.apply(this,this.lastInitArguments)},a.prototype.animateSpin=function(ue,he,pe,me){var fe=ue,ge=0,ve=he>ue?he-ue:this.frames[this.currentRowIndex()].length+he-ue,be=function(){return this.showFrame(this.currentRowIndex(),fe,!0),fe===he?void("function"==typeof me&&me()):(fe++,ge++,fe>=this.frames[this.currentRowIndex()].length&&(fe=0),void setTimeout(be,pe(ge,ve)))}.bind(this);be()},a.prototype.getZoomer=function(ue,he){var pe,me=this.getOutputBaseSize(),fe=this.getImageScalersOptions(me);return this.frames[ue]=this.frames[ue]||[],(pe=this.frames[ue][he])||(pe=this.createZoomer(),this.frames[ue][he]=pe,this.updateZoomerDummy(!this.updateZoomerDummy())),pe.inputImageScaler.options.baseSize=fe.inputImageScalerOptions.baseSize,pe.inputImageScaler.options.maxSize=fe.inputImageScalerOptions.maxSize,pe.resize(!1,{containerSize:this.spinContainerSize,outputBaseSize:me,imageScalersOptions:fe}),pe},a.prototype.getImageScalersOptions=function(ue){var he={width:this.loadedAssets.maxSize.width,height:this.loadedAssets.maxSize.height};return{inputImageScalerOptions:{baseSize:{width:Math.min(this.loadedAssets.maxSize.width,this.targetSize.width*this.params.devicePixelRatio),height:Math.min(this.loadedAssets.maxSize.height,this.targetSize.height*this.params.devicePixelRatio)},maxSize:he},outputImageScalerOptions:{baseSize:ue,maxSize:{width:Math.max(ue.width,this.loadedAssets.maxSize.width/this.params.devicePixelRatio),height:Math.max(ue.height,this.loadedAssets.maxSize.height/this.params.devicePixelRatio)}}}},a.prototype.createZoomer=function(ue){var he=document.createElement("div"),pe=this.getOutputBaseSize(),me=this.getImageScalersOptions(pe),ve=new fe(me.inputImageScalerOptions),be=new fe(me.outputImageScalerOptions);return he.className="amp-frame",new ge(this.imageLoader,ve,be,{baseUrl:ue,zoomFactors:this.params.zoomFactors,container:he,containerSize:this.spinContainerSize,outputBaseSize:pe,devicePixelRatio:this.params.devicePixelRatio,baseJpgQlt:this.params.baseJpgQlt,zoomJpgQlt:this.params.zoomJpgQlt})},a.prototype.getContainerInitialTargetSize=function(){var ue=me.getProportionalSize({width:this.spinContainerSize.width,height:this.spinContainerSize.height},this.loadedAssets.maxSize);return this.params.initialSize&&(ue.width=this.params.initialSize.width,ue.height=this.loadedAssets.maxSize.height*ue.width/this.loadedAssets.maxSize.width),ue},a.prototype.getOutputBaseSize=function(){return me.getProportionalSize(this.spinContainerSize,this.loadedAssets.maxSize)},a.prototype.preloadImages=function(ue,he,pe){this.viewModel.loadingPercentage(0),this.hasError(!1);var me,fe=null,ge=!1,ve=[],be=null,l=function(){ge=!0,ye--,Se--,ye||(clearTimeout(fe),fe=null,clearInterval(be),be=null,this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized)},u=function(ue,he,pe){pe.applyPosition(),ye--,me>1&&ve.push({rowIndex:ue,frameIndex:he})},h=function(ue,he,pe){pe.loadImage(this.loadedAssets.frameUrls[ue][he],pe.options.container,pe.inputImageScaler.options.baseSize,pe.options.outputBaseSize,u.bind(this,ue,he,pe),this.params.handleLoadingErrors?l.bind(this):u.bind(this,ue,he,pe),null,null,1===me,this.params.baseJpgQlt)},ye=me=this.loadedAssets.frameUrls.length*this.loadedAssets.frameUrls[0].length,Se=me;me>1&&this.viewModel.isLoadingPageVisible(!0),be=setInterval(function(ue){var he=ve.pop();return he?(this.showFrame(he.rowIndex,he.frameIndex,!0),Se--,void this.viewModel.loadingPercentage(Math.floor(100*(me-Se)/me))):void(ye||(clearInterval(be),be=null,"function"==typeof ue&&ue()))}.bind(this,function(){if(clearTimeout(fe),fe=null,this.hasError(ge),ge)return this.events.trigger("allImagesLoaded",!1),void(this.initState=this.INIT_STATE.NotInitialized);this.events.trigger("allImagesLoaded",!0);var pe=this.frames[ue].length,me=he,ve=(pe+he-1)%pe;return!this.params.showHint||window.sessionStorage&&window.sessionStorage.getItem("spinViewerHintDisplayed")||(this.viewModel.isHintVisible(!0),setTimeout(function(){this.viewModel.isHintVisible(!1),window.sessionStorage&&window.sessionStorage.setItem("spinViewerHintDisplayed",!0)}.bind(this),this.params.hintDisplayTime)),this.params.useInitialAnimation?(me=(pe+he-this.params.animationFramesCount)%pe,ve=he,this.showFrame(ue,me,!0),this.viewModel.isLoadingPageVisible(!1),void this.animateSpin(me,ve,this.animationIntervalEasing.bind(this),function(){this.initState=this.INIT_STATE.Initialized,this.showFrame(ue,he,!0)}.bind(this))):(this.viewModel.isLoadingPageVisible(!1),this.initState=this.INIT_STATE.Initialized,void this.showFrame(ue,he,!0))}.bind(this)),this.params.framesCachingQueueInterval),this.imageLoader.cancelAllLoadRequests(),this.params.handleLoadingErrors&&this.params.preloadingTimeout&&(fe=setTimeout(function(){clearInterval(be),be=null,this.imageLoader.cancelAllLoadRequests(),this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized}.bind(this),this.params.preloadingTimeout));for(var we=0;we<this.loadedAssets.frameUrls.length;we++)for(var xe=0;xe<this.loadedAssets.frameUrls[we].length;xe++){var Ie=this.getZoomer(we,xe);Ie.options.baseUrl=this.loadedAssets.frameUrls[we][xe],h.call(this,we,xe,Ie)}},a.prototype.getCurrentZoomer=function(){return this.updateZoomerDummy(),this.currentRowIndex()<this.frames.length&&this.frames[this.currentRowIndex()]&&this.currentFrameIndex()<this.frames[this.currentRowIndex()].length?this.frames[this.currentRowIndex()][this.currentFrameIndex()]:null},a.prototype.getCurrentFrame=function(){return{rowIndex:this.currentRowIndex(),frameIndex:this.currentFrameIndex(),zoomer:this.getCurrentZoomer()}},a.prototype.showFrame=function(ue,he,pe){if((pe||this.initState===this.INIT_STATE.Initialized)&&(ue!=this.currentRowIndex()||he!=this.currentFrameIndex())){this.currentRowIndex(ue),this.currentFrameIndex(he);for(var me=this.getCurrentFrame();this.containers.images.lastChild;)this.containers.images.removeChild(this.containers.images.lastChild);this.containers.images.appendChild(me.zoomer.options.container),this.events.trigger("frameShown",me)}},a.prototype.loadFullImage=function(ue,he){ue.fullImageStatus=ue.FULL_IMAGE_STATUS.Loading;var pe=(ue.getCurrentImageDisplaySize(),ue.getOutputImageSize(ue.options.zoomFactors.length-1)),me=ue.getZoomedImageBox(ue.currentSize,ue.currentPosition,pe,he);ue.loadImage(this.loadedAssets.frameUrls[this.currentRowIndex()][this.currentFrameIndex()],ue.options.container,ue.getInputImageSize(ue.options.zoomFactors.length-1),pe,(function(){ue.applyPosition(),ue.fullImageStatus=ue.FULL_IMAGE_STATUS.Loaded}),(function(){ue.fullImageStatus!==ue.FULL_IMAGE_STATUS.Loaded&&(ue.fullImageStatus=ue.FULL_IMAGE_STATUS.NotLoaded)}),me.focalPointOnSourceImage,null,!0,this.params.zoomJpgQlt)},a.prototype.zoomCenter=function(){this.zoomIn(!0)},a.prototype.setEventListeners=function(){this.viewModel.events.on("refreshButtonClicked",function(){this.refresh(),this.events.trigger("refreshButtonClicked")}.bind(this)),this.viewModel.events.on("zoomCenter",this.zoomCenter.bind(this)),he(window).resize(function(){if(this.initState===this.INIT_STATE.Initialized){var ue=this.containers.spin.getBoundingClientRect();ue.width===this.spinContainerRect.width&&ue.height===this.spinContainerRect.height||this.resize()}}.bind(this));var ue,pe,me=new ve(this.containers.root),fe=me.get("pinch"),ge=me.get("pan"),be=me.get("doubletap"),ye=0,Se=0,we=null,xe=function(ue,he){var pe=this.getCurrentZoomer();if(pe.canZoomOut())pe.moveBy(he);else if(this.frames.length>1||this.frames[this.currentRowIndex()].length>1){var me=this.getRemoteRowIndex(ye,this.getMatrixShift(this.params.reverseVerticalDirection,ue.y,this.frames.length,this.spinContainerSize.height)),fe=this.getRemoteFrameIndex(Se,this.getMatrixShift(this.params.reverseHorizontalDirection,ue.x,this.frames[0].length,this.spinContainerSize.width));me===this.currentRowIndex()&&fe===this.currentFrameIndex()||(this.events.trigger("spun"),this.showFrame(me,fe))}}.bind(this),Ie=function(){ge.set({threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE}),ge.set({direction:this.isPannable()?ve.DIRECTION_ALL:ve.DIRECTION_HORIZONTAL}),ge.set({enable:this.isPannable()||this.frames[this.currentRowIndex()].length>1})}.bind(this),Pe=function(he){if(this.initState===this.INIT_STATE.Initialized){he.preventDefault(),he.stopPropagation();var pe=this.getCurrentZoomer(),me=1+.1*(he.detail<0||he.wheelDelta>0?1:-1);this.spinContainerRect=this.containers.spin.getBoundingClientRect(),pe.fullImageStatus===pe.FULL_IMAGE_STATUS.NotLoaded&&this.loadFullImage.call(this,pe,this.getEventPositionRelativeToTarget(he,this.spinContainerRect)),ue=pe.getCurrentImageDisplaySize(),pe.scale(ue,me,this.getEventPositionRelativeToTarget(he,this.spinContainerRect),false)}}.bind(this);Ie(),be.set({interval:500,time:500,threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE,posThreshold:100});this.viewModel.events.on("panImage",(function(ue,he){var pe={x:0,y:0},me=he.split(",");-1===me.indexOf("arrowup")&&-1===me.indexOf("w")||(pe.y=30),-1===me.indexOf("arrowdown")&&-1===me.indexOf("s")||(pe.y=-30),-1===me.indexOf("arrowleft")&&-1===me.indexOf("a")||(pe.x=30),-1===me.indexOf("arrowright")&&-1===me.indexOf("d")||(pe.x=-30),xe(pe,pe)})),this.isPannable.subscribe(function(ue){this.viewModel.isPannable(ue),Ie()}.bind(this)),me.on("hammer.input",function(ue){return ue.distance<this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(we=null),null===we&&ue.distance>=this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(we=!this.isPannable()&&1===ue.pointers.length&&(ue.direction&ve.DIRECTION_VERTICAL)>0),we?void me.stop():void fe.set({enable:ue.pointers.length>1})}.bind(this)),me.on("tap",function(ue){this.initState===this.INIT_STATE.Initialized&&"mouse"===ue.pointerType&&(ue.target&&-1===ue.target.className.indexOf("amp-overlay")||(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(ue,this.spinContainerRect))))}.bind(this)),me.on("doubletap",function(ue){ue.preventDefault(),ue.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&"mouse"!==ue.pointerType&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(ue,this.spinContainerRect)))}.bind(this)),me.on("panstart",function(ue){pe=ue,Se=this.currentFrameIndex(),ye=this.currentRowIndex()}.bind(this)),me.on("pan",function(ue){if(this.initState===this.INIT_STATE.Initialized){ue.preventDefault(),ue.srcEvent.stopPropagation(),Se=Se||this.currentFrameIndex(),ye=ye||this.currentRowIndex(),pe=pe||ue;var he={x:ue.deltaX-pe.deltaX,y:ue.deltaY-pe.deltaY},me={x:ue.deltaX,y:ue.deltaY};pe=ue,xe(me,he)}}.bind(this)),me.on("panend",function(ue){pe=ue,Se=this.currentFrameIndex(),ye=this.currentRowIndex()}.bind(this)),me.on("pinchstart",function(he){if(this.initState===this.INIT_STATE.Initialized){var pe=this.getCurrentZoomer();pe.fullImageStatus===pe.FULL_IMAGE_STATUS.NotLoaded&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.loadFullImage.call(this,pe,this.getEventPositionRelativeToTarget(he,this.spinContainerRect))),ue=pe.getCurrentImageDisplaySize(),ge.set({enable:!1})}}.bind(this)),me.on("pinch",function(he){he.preventDefault(),he.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&this.getCurrentZoomer().scale(ue,he.scale,this.getEventPositionRelativeToTarget(he,this.spinContainerRect),false)}.bind(this)),me.on("pinchend",function(){this.initState===this.INIT_STATE.Initialized&&Ie()}.bind(this)),this.containers.spin.addEventListener("mousewheel",Pe),this.containers.spin.addEventListener("DOMMouseScroll",Pe),this.hasError.subscribe(function(ue){this.viewModel.isErrorPageVisible(ue)}.bind(this))},a.prototype.getMatrixShift=function(ue,he,pe,me){var fe=(ue?-1:1)*this.params.spinSpeed*he*pe/me;return fe>0?Math.floor(fe):Math.ceil(fe)},a.prototype.getRemoteFrameIndex=function(ue,he){var pe=(ue+he)%this.frames[0].length;return 0>pe&&(pe=this.frames[0].length+pe),pe},a.prototype.getRemoteRowIndex=function(ue,he){var pe=(ue+he)%this.frames.length;return 0>pe&&(pe=this.frames.length+pe),pe},a.prototype.loadAssets=function(ue,he,pe){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=null,this.assetsProvider.getAssets(ue,function(ue){return ue.maxSize.width&&ue.maxSize.height?(this.loadedAssets=ue,void("function"==typeof he&&he(ue))):void("function"==typeof pe&&pe())}.bind(this),pe)},a.prototype.setAssets=function(ue){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=ue},a})),define("bindings/fadeVisible",["ko","$"],(function(ue,he){"use strict";function i(){}return i.prototype.init=function(pe,me){var fe=me();he(pe).toggle(ue.unwrap(fe))},i.prototype.update=function(pe,me){var fe=me();ue.unwrap(fe)?he(pe).fadeIn():he(pe).fadeOut()},ue.bindingHandlers.fadeVisible=new i,ue.bindingHandlers.fadeVisible})),define("spinViewer/component",["$","spinViewerView","utils/scene7.config","utils/scene7.ImageLoader","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider","spinViewer/ViewModel","spinViewer/Controller","bindings/fadeVisible"],(function(ue,he,pe,me,fe,ge,ve,be,ye){"use strict";return{viewModel:{createViewModel:function(he,Se){var we=ue({}),xe=ue({}),Ie={window,root:Se.element,spin:Se.element.querySelector(".amp-spin"),images:Se.element.querySelector(".amp-spin .amp-images")},Pe=new pe(he.scene7.imageServer,he.scene7.videoServer),_e=new fe(Pe),Te=new ge(Pe,_e),ze=new ve(Te),Ce=new me(Pe,he.viewer.useCors),Ee=new be(we,he.messages);he.viewer.zoomFactors.container&&(he.viewer.zoomFactors=he.viewer.zoomFactors.container);var ke=new ye(ze,Ce,he.viewer,Ee,Ie,xe),Ae={setAssets:ke.setAssets.bind(ke),loadAssets:ke.loadAssets.bind(ke),init:ke.init.bind(ke),zoomIn:ke.zoomIn.bind(ke),zoomOut:ke.zoomOut.bind(ke),zoomReset:ke.zoomReset.bind(ke),events:ke.events};return he.api(Ae),Ee}},template:he,synchronous:!0}})),define("Asos.Utils.MediaPlayers",["videoPlayer/component","videoPlayer/DataMapper","videoPlayer/AssetsProvider","spinViewer/component","utils/scene7.config","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider"],(function(ue,he,pe,me,fe,ge,ve,be){"use strict";function c(){this.videoPlayer=ue,this.spinViewer=me}return c.prototype.getSpinViewerAssetsProvider=function(ue){var he=new fe(ue),pe=new ge(he),me=new ve(he,pe);return new be(me)},c.prototype.getVideoPlayerAssetsProvider=function(ue){var me=new fe(null,ue),ve=new ge(me),be=new he(me);return new pe(me,ve,be)},new c})),define("ProductUtils/Window",[],(function(){return window})),define("ProductUtils/MergeJson",[],(function(){return function(ue,he){var pe=JSON.parse(JSON.stringify(ue)),me=JSON.parse(JSON.stringify(he));for(var fe in me)try{pe[fe]=me[fe]}catch(ue){console.warn("couldn't merge JSONS: "+ue)}return pe}})),define("ProductUtils/StockPrice",["ProductUtils/Window","ProductUtils/MergeJson"],(function(ue,he){return function(){this.getStockPrice=function(he,pe,me,fe){null!=he&&ue.asos.pdp.getStockPrice(fe).then(function(ue){this.successRequest.call(this,ue,{callback:pe,products:he})}.bind(this)).catch(me)},this.successRequest=function(ue,he){var pe=this.combineData(he.products,ue);he.callback(pe)},this.combineData=function(ue,he){var pe,me=void 0!==ue.products,fe=this.createVariantMap(ue,me);if(me){for(var ge={},ve=0;ve<ue.products.length;ve++)ge[ue.products[ve].id]=ve;var be=[];be.length=he.length;for(var ye=0;ye<he.length;ye++){be[ge[he[ye].productId]]=he[ye]}for(var Se=0;Se<ue.products.length;Se++)ue.products[Se]=this.mergeJsons(ue.products[Se],be[Se]);pe=ue;for(var we=[],xe=0;xe<ue.products.length;xe++)we.push(this.mapVariantData(ue.products[xe],pe.products[xe],fe[ue.products[xe].productId]));return pe.products=we,pe}return fe=fe[ue.id],pe=this.mergeJsons(ue,he[0]),this.mapVariantData(ue,pe,fe)},this.mapVariantData=function(ue,he,pe){for(var me=!1,fe=0;fe<ue.variants.length;fe++)me||(me=he.variants[fe].isInStock),he.variants[fe].size=pe[he.variants[fe].id].size,he.variants[fe].sizeOrder=pe[he.variants[fe].id].sizeOrder,he.variants[fe].colour=pe[he.variants[fe].id].colour,he.variants[fe].colourWayId=pe[he.variants[fe].id].colourWayId,he.variants[fe].isPrimary=pe[he.variants[fe].id].isPrimary,he.variants[fe].sizeId=pe[he.variants[fe].id].sizeId,he.variants[fe].productImage=void 0!==ue.productImage?ue.productImage.url:"";return he.isInStock=me,he},this.createVariantMap=function(ue,he){var pe=[];if(he)for(var me=0;me<ue.products.length;me++)pe[ue.products[me].id]=[],pe=this.loopVariants(ue.products[me],pe);else pe[ue.id]=[],pe=this.loopVariants(ue,pe);return pe},this.loopVariants=function(ue,he){for(var pe=0;pe<ue.variants.length;pe++){var me=ue.variants[pe].variantId;he[ue.id][me]=ue.variants[pe]}return he},this.mergeJsons=he}})),define("Providers/SdkProvider",["Promise"],(function(ue){function t(he){return function(){return new ue((function(ue){var i=function(){ue(window.asos.sdk[he])};window.asos.sdk&&window.asos.sdk[he]?i():window.asos.eventBus.once(he+"-sdk-ready",(function(){i()}))}))}}return{getSavedItems:t("savedItems"),getBag:t("bag"),getIdentity:t("identity"),getFeatures:t("features")}})),define("Providers/FeaturesProvider",["Providers/SdkProvider","Promise"],(function(ue,he){var pe,me,fe=new he((function(ue){pe=ue})),ge=new he((function(ue){me=ue})),u=function(){return{isEnabled:function(){return!1},getVariables:function(){return null}}},h=function(){},p=function(){};return ue.getFeatures().then((function(ue){ue.onReady().then((function(){u=ue.getFeature,h=ue.track,p=ue.activate,pe(),setTimeout(me,0)}))})),{getFeature:function i(ue,he,pe){return u(ue,he,pe)},onReady:function r(){return fe},onComplete:function o(){return ge},track:function n(ue,he,pe){return h(ue,he,pe)},activate:function s(ue,he,pe){return p(ue,he,pe)}}})),define("ProductUtils/NewRelicLogger",["PageConfig"],(function(ue){var t=function(){var he;this.init=function(ue){he=ue},this.logError=function(pe,me){window.newrelic&&(me.pageVersion=ue.version,me.pageUrl=window.location.href,me.pageType=he,me.codebase="Knockout",window.newrelic.addPageAction(pe.message,me))}};return t.prototype.PAGE_TYPE={PRD:"ProductPage.SingleProduct",GRP:"ProductPage.MixAndMatch"},t.prototype.ERROR_TYPE={AjaxError:"Ajax Error",ParseError:"Parse Error",UserActionFailed:"User Action Failed",FitAssistantError:"Fit Assistant Error"},new t})),define("asos-web-seo-path",[],(function(){"use strict";function e(he){return Object.values(he).map((function(he){var pe=ue.find((function(ue){return ue[0]===he}));return pe?pe[1]:he})).join("")}function i(ue){return function t(ue){return Object.values(ue.normalize("NFD")).map((function(ue){return ue.match(/[0-9A-Za-z \-/.]/g)?ue:void 0})).join("").normalize("NFC")}(ue.trim()).replace(/\//g,"-").replace(/\s/g,"-").replace(/-+/g,"-").replace(/\./g,"").replace(/^-/,"").replace(/-$/,"").toLowerCase()}function n(ue,he,pe){var me=ue,fe=he;return pe&&"ru-ru"===pe.toLowerCase()&&(me=e(ue),fe=e(he)),{romanProductName:me,romanBrandName:fe}}var ue=[["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","J"],["","j"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","H"],["","h"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"]];return function s(ue){return function(he,pe,me){if("function"!=typeof"".normalize)return"";if(!he)return ue&&ue.error("createSeoPath - productName was not passed in"),"";var fe=n(he,pe,me),ge=fe.romanProductName,ve=fe.romanBrandName,be=i(ge),ye=i(ve);return"".concat(ye,"/").concat(be)}}})),define("ProductUtils/UrlUtils",["PageConfig","ProductUtils/NewRelicLogger","asos-web-seo-path","ProductUtils/Window"],(function(ue,he,pe,me){return function(){var fe=pe();this.formatUrl=function(ue){return ue?"http"===ue.substring(0,4)?ue.replace("http:","https:"):"/"===ue.substring(0,1)?ue:"//"+ue:ue},this.getUrlParam=function(ue,he){he||(he=me.location.href),ue=ue.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var pe=new RegExp("[\\?&]"+ue+"=([^&#]*)","i").exec(he);return null===pe?null:decodeURIComponent(pe[1].replace(/\+/g," "))},this.getVariantFromUrl=function(ue,he){var pe=ue.split("?")[0];if((pe=null!=pe?pe.split("/prd/"):null).length>0&&(pe=parseInt(pe[1])),pe||(pe=parseInt(this.getUrlParam("iid",ue))),!pe)return null;for(var me=0;me<he.length;me++)if(he[me].variantId===pe)return he[me];return null},this.getProductUrl=function(pe,me,ge){if(!ge)return he.logError(new TypeError("ProductId was not provided")),ue.siteDomain;var ve="";return pe&&me?ve="/"+fe(pe,me,ue.language):he.logError(new TypeError("missing brand name or product name, returning generic link"),{productId:ge}),ue.siteDomain+ve+"/prd/"+ge}}})),define("ProductUtils/FeatureTracking",["Providers/FeaturesProvider","ProductUtils/UrlUtils","ProductUtils/Window"],(function(ue,he,pe){return{onPageLoadStart:function(){var me,fe=pe.asos.pdp.config.featuresCtaTracking,ge=(new he).getUrlParam("ctaRef"),ve=ge&&ge.split("_")[0];ve&&fe&&fe.map((function(ue){ve.toLowerCase()!==ue.matchCta.toLowerCase()||me||(me=ue)})),me&&ue.onReady().then((function(){ue.track(me.trackingKey)}))}}})),define("Models/VariantDecorator",[],(function(){function e(ue,he){for(var pe=0;pe<ue.length;pe++)if(he(ue[pe]))return pe}return function(){this.getData=function(ue,he){he=void 0!==he&&he;var pe=void 0!==ue.productImage?[ue.productImage]:ue.images,me={};if(pe)for(var fe=0;fe<pe.length;fe++){var ge=pe[fe];if(ge.colourWayId)void 0===me[ge.colourWayId]&&(me[ge.colourWayId]=ge.colour)}var ve=ue.variants;ve.sort((function(ue,he){var pe=he.colour.localeCompare(ue.colour);return 0===pe?he.sizeOrder-ue.sizeOrder:pe}));for(var be,ye=ue.productId?ue.productId:ue.id,Se=ve.length,we={},xe={productId:ye,colours:[],isInStock:!1,price:ue.productPrice},Ie=0;Se--;){var Pe=ve[Se];Pe.productId=ye,Pe.ratings=ue.ratings,Pe.brandName=ue.brandName,void 0===xe.hasDifferentPrices&&(he||Pe.isInStock)&&(void 0===be?be=Pe.price.current:Pe.price.current.value!==be.value&&(xe.hasDifferentPrices=!0));var _e=Pe.isInStock;Pe.colourName=me[Pe.colourWayId];var Te=we[Pe.colour];void 0===Te&&(xe.colours.push({colour:Pe.colour,colourName:Pe.colourName,variants:[],colourWayId:Pe.colourWayId}),Te=we[Pe.colour]={index:Ie,variantsInStock:0},Ie++),_e&&(Te.variantsInStock++,xe.isInStock||(xe.isInStock=!0)),xe.colours[Te.index].variants.push(Pe),(void 0===Te.lowestPrice||Te.lowestPrice.value>Pe.price.current.value)&&(Te.lowestPrice=Pe.price.current)}for(var ze=Object.keys(we),Ce=ze.length-1;Ce>=0;Ce--){var Ee=ze[Ce],ke=we[Ee],Ae=e(xe.colours,(function(ue){return ue.colour===Ee}));he||0!==ke.variantsInStock?xe.colours[Ae].price=ke.lowestPrice:xe.colours.splice(Ae,1)}return xe}}})),define("text",{load:function(ue){throw new Error("Dynamic load not allowed: "+ue)}}),define("text!Components/product-image/product-image.html",[],(function(){return'<div class="grid-row">\n  <img class="mix-match-item-thumbnail" data-bind="attr: {\n        alt: \'\',\n        src: source,\n        srcset: sourceSet,\n        sizes: size + \'px\'\n        }" />\n</div>\n'})),define("ProductUtils/ImagePresets",["PageConfig"],(function(ue){return{getImageSource:function t(he,pe,me){return he+ue.imagePresets[me][pe]},getImageSourceSet:function i(he,pe,me){return Object.keys(ue.imagePresets[me]).filter((function(ue){return ue>=pe})).map((function(pe){return he+ue.imagePresets[me][pe]+" "+pe+"w"})).join(",")}}})),define("Components/product-image/product-image",["text!./product-image.html","ProductUtils/ImagePresets"],(function(ue,he){return{viewModel:function i(ue){this.imgUrl=ue.imgUrl,this.size=ue.size,this.state=ue.state,this.productId=ue.productId,this.context=ue.context,this.productData=ue.productData,this.source=he.getImageSource(this.imgUrl,this.size,ue.type),this.sourceSet=he.getImageSourceSet(this.imgUrl,this.size,ue.type)},template:ue}})),define("text!Components/product-price/product-price.html",[],(function(){return'<div class="grid-row rendered price-container" data-testid="product-price">\n  <span class="sr-in-doc-flow" aria-live="polite" data-bind="text: getAriaLabel()"></span>\n  <div aria-hidden="true">\n    <div class="current-price">\n      <span data-testid="current-price" data-bind="text: priceText, markAndMeasure: \'pdp:price_displayed\', css: { discounted: isDiscountedPrice }" class="current-price-text"></span>\n      \x3c!-- ko if: showGermanVatMessage --\x3e\n      <span data-testid="german-vat-message" data-bind="text: i18n.pdp_misc_vat_message" class="product-german-vat"></span>\n      \x3c!-- /ko --\x3e\n    </div>\n    <div>\n      \x3c!-- ko if: showLowestPrice30Days() --\x3e\n      <span data-bind="text: lowestPrice30DaysText" class="previous-price-text"></span>\n      <span data-bind="text: lowestPrice30DaysPercentage, css: { discounted: lowestPrice30DaysPercentageHighlight }" class="previous-price-text"></span>\n      \x3c!-- /ko --\x3e\n    </div>\n    <div>\n      \x3c!-- ko if: showRrpPrice() --\x3e\n      <span data-bind="text: rrpPriceText" class="previous-price-text"></span>\n      \x3c!-- /ko --\x3e\n      \x3c!-- ko if: showPrevPrice() --\x3e\n      <span data-bind="text: prevPriceText" class="previous-price-text"></span>\n      \x3c!-- /ko --\x3e\n      \x3c!-- ko if: isDiscountedPrice --\x3e\n      <span data-bind="text: \'(\' + discountText() + \')\', visible: !!discountText()" class="price-discount-percent"></span>\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n</div>\n'})),define("ProductUtils/calculateDiscount",[],(function(){return function(ue,he){return Math.floor((1e3*he-1e3*ue)/(10*he)).toString()}})),define("ProductUtils/Discount",["ko","Providers/FeaturesProvider","ProductUtils/calculateDiscount"],(function(ue,he,pe){function n(ue,he){return"-"+pe(ue,he)+"%"}var me=ue.observable(!1),fe=[];return he.onReady().then((function(){me(he.getFeature("all-show-discount-label").isEnabled())})),me.subscribe((function(ue){ue&&fe.forEach((function(ue){ue.observable(n(ue.currentPrice,ue.previousPrice))}))})),{getDiscountText:function s(ue,he,pe){return me()?void ue(n(he,pe)):(fe.push({observable:ue,currentPrice:he,previousPrice:pe}),ue(""))}}})),define("Components/product-price/product-price",["ko","text!./product-price.html","ProductUtils/Discount","PageConfig"],(function(ue,he,pe,me){function r(ue){return null!=ue}return{viewModel:function o(he){var fe=["PL"].indexOf(me.countryCode)>-1,ge=he.state,ve=ge.productData;this.i18n=ge.resources,this.showGermanVatMessage=!!he.showGermanVatMessage;var be=ue.observable(ve.price);this.showLowestPrice30Days=ue.computed((function(){return!(!fe||!be())&&(r(be().lowestPriceInLast30DaysText)&&r(be().lowestPriceInLast30DaysValue))})),this.lowestPrice30DaysText=ue.computed(function(){return this.showLowestPrice30Days()?this.i18n.lowest_price_last_thirty_days+" "+be().lowestPriceInLast30DaysText:""}.bind(this)),this.lowestPrice30DaysPercentage=ue.computed(function(){return this.showLowestPrice30Days()?function s(ue){if(isNaN(ue))return"";var he=-ue;return"("+(he>0?"+":"")+he+"%)"}(be().lowestPriceInLast30DaysPercentage):""}.bind(this)),this.lowestPrice30DaysPercentageHighlight=ue.computed(function(){return this.showLowestPrice30Days()?be().lowestPriceInLast30DaysPercentage>0:void 0}.bind(this)),this.showRrpPrice=ue.computed((function(){return!!be()&&be().isOutletPrice})),this.rrpPrice=ue.computed(function(){return this.showRrpPrice()?be().rrp:void 0}.bind(this)),this.rrpPriceText=ue.computed(function(){if(!this.rrpPrice())return"";var ue=this.rrpPrice().text;return ue?this.i18n.pdp_price_rrp+" "+ue:""}.bind(this)),this.showPrevPrice=ue.computed(function(){return!!be()&&(be().isMarkedDown&&!be().isOutletPrice)}.bind(this)),this.prevPrice=ue.computed(function(){return this.showPrevPrice()?be().previous:void 0}.bind(this)),this.prevPriceText=ue.computed(function(){return this.showPrevPrice()?this.i18n.was_pricing_label+" "+this.prevPrice().text:""}.bind(this)),this.showFromLabel=ue.computed((function(){return!(!ve.hasDifferentPrices||ge.selectedSize()&&ge.selectedColour())})),this.price=ue.computed((function(){return be()?be().current:void 0})),this.priceText=ue.computed(function(){if(void 0===this.price())return"";var ue="";return(this.showPrevPrice()||this.showRrpPrice())&&(ue=this.i18n.now_pricing_label+" "),this.showFromLabel()&&(ue=this.i18n.pdp_misc_from+" "),ue+this.price().text}.bind(this)),this.isDiscountedPrice=ue.computed(function(){return this.showPrevPrice()||this.showRrpPrice()}.bind(this)),this.discountText=ue.observable("");var ye=function(){this.showRrpPrice()&&this.rrpPrice()?pe.getDiscountText(this.discountText,this.price().value,this.rrpPrice().value):this.showPrevPrice()&&this.prevPrice()&&pe.getDiscountText(this.discountText,this.price().value,this.prevPrice().value)}.bind(this);this.getAriaLabel=ue.computed(function(){var ue=this.priceText();return this.showGermanVatMessage&&(ue=ue.concat(" ",this.i18n.pdp_misc_vat_message_longform||this.i18n.pdp_misc_vat_message)),this.showLowestPrice30Days()&&(ue=ue.concat(". "+this.lowestPrice30DaysText()+" "+this.lowestPrice30DaysPercentage())),this.showPrevPrice()&&(ue=ue.concat(". "+this.prevPriceText())),this.showRrpPrice()&&(ue=ue.concat(". "+(this.i18n.pdp_price_rrp_longform||this.i18n.pdp_price_rrp)," ",this.rrpPrice().text)),this.isDiscountedPrice()&&this.discountText()&&(ue=ue.concat(". ("+this.discountText()+")")),ue}.bind(this)),ge.selectedSize.subscribe(function(ue){be(ue?ue.price:ve.price),ye()}.bind(this)),ye()},template:he}})),define("text!Components/social-share/social-share.html",[],(function(){return'<button\n    class="link social-share-icon"\n    id="social-share-button"\n    data-bind="click: toggleShareIcons, clickBubble: false, attr: { \'aria-expanded\': isVisible() ? \'true\' : \'false\', \'aria-label\': state.resources.pdp_cta_social_share }"\n    aria-controls="share-bar"\n>\n    <span class="product-share-icon"></span>\n</button>\n<div class="share-bar-wrap" data-bind="visible: isVisible">\n    <div class="triangle-up"></div>\n    <ul id="share-bar" aria-labelledby="social-share-button">\n        \x3c!-- ko if : isRussia --\x3e\n        <li tabindex="-1"><a data-bind="attr: { href: vkLink }, click: handleClick" data-id="vk" aria-label="vk" class="product-vk-icon"></a></li>\n        \x3c!-- /ko --\x3e\n        <li tabindex="-1"><a data-bind="attr: { href: facebookLink }, click: handleClick" data-id="facebook" aria-label="facebook" class="product-facebook-icon"></a></li>\n        <li tabindex="-1"><a data-bind="attr: { href: pinterestLink }, click: handleClick" data-id="pinterest" aria-label="pinterest" class="product-pinterest-icon"></a></li>\n        \x3c!-- ko if : isMobile --\x3e\n        <li tabindex="-1"><a data-bind="attr: { href: whatsappLink }, click: handleClick" data-id="whatsapp" aria-label="whatsapp" class="product-whatsapp-icon"></a></li>\n        <li tabindex="-1"><a data-bind="attr: { href: emailLink }, click: fireAnalytics" data-id="email" aria-label="email" class="product-email-icon"></a></li>\n        \x3c!-- /ko --\x3e\n    </ul>\n</div>\n'})),define("ProductUtils/Analytics/Utils/FitAnalytics",["Providers/SdkProvider","PageConfig"],(function(ue,he){function i(ue){switch(ue){case 1:return"first time interaction";case 2:return"partial recommendation";case 3:return"full recommendation";case 4:return"recommendation not in stock"}}function n(){return ue.getIdentity()}function s(ue){return ue.customer.profile()}var pe="signed in",me="not signed in",fe="no state set",ge="previous purchase data",ve="no previous purchase data",be="no body category set",ye="no recommended size set";return{getFitAnalyticsState:function o(ue){return n().then(s).then(function r(ue){return function(he){return(he.isRecognised||he.isAuthenticated?pe:me)+"-"+(i(ue.recommendationType)?i(ue.recommendationType):fe)+"-"+(ue.hasPreviousPurchaseData?ge:ve)+"-"+(ue.bodyCategory?ue.bodyCategory.toLowerCase():be)}}(ue))},getFitAnalyticsSize:function a(ue){var pe=ue.recommendedSize?ue.recommendedSize.toLowerCase():ye;return he.storeCode.toLowerCase()+"|"+pe},states:{SIGNED_IN:pe,SIGNED_OUT:me,NO_RECOMMENDATION_STATE:fe,PREVIOUS_PURCHASES:ge,NO_PREVIOUS_PURCHASES:ve,NO_BODY_CATEGORY:be,NO_RECOMMENDED_SIZE:ye,NO_VIEWED_SCREENS:"no viewed screens set"}}})),define("ProductUtils/Analytics/Utils/Common",["ProductUtils/UrlUtils"],(function(ue){function r(ue,he){return/.*;;;;evar/i.test(ue)?Array.isArray(he)?he.forEach((function(he){ue=ue+"|"+he})):ue=ue+"|"+he:Array.isArray(he)?he.forEach((function(he){ue=ue+"|"+he})):ue=ue+";;;;"+he,ue}var he=new ue;return{getChannel:function t(){var ue=he.getUrlParam("SearchQuery"),pe=he.getUrlParam("cid");if(pe)return pe;if(null!==ue)return"search";var me=he.getUrlParam("ctaref");if(me){if(/bag/i.test(me))return"basket page";if(/saved items/i.test(me))return"saved items";if(/wishlists/i.test(me))return"wishlists"}return"product page"},getLinkTrackEvents:function i(ue){return ue.map((function(ue){return ue.split("=")[0]}))},getGlobalEvars:function n(){return["eVar1","eVar6","eVar10","eVar15","eVar17","eVar18","eVar19","eVar20","eVar29","eVar30","eVar45","eVar47","eVar60","eVar61","eVar69","eVar112","eVar113"]},addMerchEVarToProducts:function s(ue,he,pe){return(ue||"").split(",;").map((function(ue){if(pe){var me=ue.split(";;;;")[0];return";"===me[0]&&(me=me.substr(1)),me===String(pe)?r(ue,he):ue}return r(ue,he)})).join(",;")},getProductAreaAttribute:function a(ue){return{oosproduct:"oos product page",main:"product page"}[ue.toLowerCase()]},getAsosFulfilsPrefix:function o(ue,he){return ue&&"asos"!==ue&&he!==ue?"afs - ":""}}})),define("ProductUtils/Analytics/Utils/Performance",[],(function(){var ue=["pdp:start","pdp:hero_image_displayed","pdp:title_displayed","pdp:stock_api_returned","pdp:price_displayed","pdp:size_selector_interactive","pdp:add_to_bag_interactive","pdp:save_for_later_interactive"],he=[{eVar:"eVar163",event:"event233"},{eVar:"eVar164",event:"event234"},{eVar:"eVar165",event:"event235"},{eVar:"eVar166",event:"event236"},{eVar:"eVar167",event:"event237"},{eVar:"eVar168",event:"event238"},{eVar:"eVar169",event:"event239"},{eVar:"eVar170",event:"event240"}];return{performanceMetricsToGather:ue,getPerformanceMetricsValues:function e(){return window.performance.getEntriesByType?window.performance.getEntriesByType("measure").filter((function(he){return ue.indexOf(he.name)>-1})).map((function(ue,pe){var me=he[pe];return{eVar:me.eVar,event:me.event,duration:Math.floor(ue.duration)}})):[]}}})),define("ProductUtils/Analytics/FitAnalytics",["Promise","ProductUtils/Analytics/Utils/FitAnalytics","ProductUtils/Analytics/Utils/Common","ProductUtils/Analytics/Utils/Performance","ProductUtils/Window"],(function(ue,he,pe,me,fe){function r(ue,he){if(ue&&he){for(var pe=ue+"_"+he,me=0;me<ve.length;me++)if(pe.match(ve[me]))return;var fe=ge[pe];return fe||ue+":"+he}}function o(ue){var he=[];if(ue.widgetScreenEvents)for(var pe=0;pe<ue.widgetScreenEvents.length;pe++){var me=ue.widgetScreenEvents[pe],fe=r(me.event,me.value);fe&&he.push(fe)}return he.join(",")}var ge={entryScreen_landed:1,entryScreen_submit:2,entryScreen_tooltip:3,immediateRecommendation_upper:11,immediateRecommendation_lower:12,immediateRecommendation_shoes:13,bcScreen_landed:14,bcScreen_skip:15,bcScreen_submit:16,lbwBcScreen_landed:17,lbwBcScreen_skip:18,lbwBcScreen_submit:19,managePurchasesScreen_landed:20,managePurchasesScreen_submit:21,managePurchasesScreen_skip:22,lbwRiseScreen_landed:23,lbwRiseScreen_submit:24,lbwSizeSelectScreen_landed:25,lbwSizeSelectScreen_submit:26,lbwCategoryScreen_landed:27,lbwCategoryScreen_submit:28,lbwCategoryScreen_skip:29,shapeSelectScreen_1_landed:30,shapeSelectScreen_1_skip:31,shapeSelectScreen_1_submit:32,shapeSelectScreen_1_tooltip:33,shapeSelectScreen_2_landed:34,shapeSelectScreen_2_skip:35,shapeSelectScreen_2_submit:36,shapeSelectScreen_2_tooltip:37,ageScreen_landed:38,ageScreen_skip:39,ageScreen_submit:40,braScreen_landed:41,braScreen_skip:42,braScreen_submit:43,resultsScreen_initial_landed:44,resultsScreen_final_landed:45,sizeRecommendation_returning_lower_results_sp:46,sizeRecommendation_returning_upper_results_sp:47,sizeRecommendation_upper_results_sp:48,sizeRecommendation_lower_results_sp:49,sizeRecommendation_out_of_scale:50,close_lower_results_sp:51,close_upper_results_sp:52,close_brand_compare:53,close_upper_form:54,close_lower_form:55,close_upper_out_of_scale:56,outOfScaleScreen_landed:57,loadingScreen_open:58,loadingScreen_close:59,loadingScreen_timeout:60,entryScreen_close:61,outOfScaleScreen_back:62,outOfScaleScreen_close:63,brandCompareScreen_landed:64,brandCompareScreen_back:65,brandCompareScreen_submit:66,brandCompareScreen_close:67,brandCompareScreen_skip:68,initialResultsScreen_landed:69,initialResultsScreen_close:70,initialResultsScreen_back:71,finalResultsScreen_landed:72,finalResultsScreen_close:73,finalResultsScreen_back:74,tummyShapeScreen_landed:75,tummyShapeScreen_back:76,tummyShapeScreen_submit:77,tummyShapeScreen_close:78,tummyShapeScreen_skip:79,hipShapeScreen_landed:80,hipShapeScreen_back:81,hipShapeScreen_submit:82,hipShapeScreen_close:83,hipShapeScreen_skip:84,ageScreen_back:86,ageScreen_close:88,braScreen_back:91,braScreen_close:93,managePurchasesScreen_back:96,managePurchasesScreen_close:98,lowerCategoryScreen_landed:100,lowerCategoryScreen_back:101,lowerCategoryScreen_submit:102,lowerCategoryScreen_close:103,lowerCategoryScreen_skip:104,fitPreferenceScreen_landed:105,fitPreferenceScreen_submit:106,genderScreen_landed:107,genderScreen_submit:108,immediateRecommendation_out_of_scale:109,lowerBrandScreen_landed:110,lowerBrandScreen_skip:111,lowerBrandScreen_submit:112,lowerModelScreen_landed:113,lowerSizeScreen_landed:114,lowerSizeScreen_submit:115,resultsScreen_returned_landed:116,resultsScreen_submitted_landed:117,shoesBrandScreen_landed:118,shoesBrandScreen_submit:119,shoesSizeScreen_landed:120,shoesSizeScreen_submit:121,shoesWidthScreen_landed:122,shoesWidthScreen_submit:123,"warningScreen_error: loading timeout":124,"warningScreen_error: no fit indicators for result screen":125,"warningScreen_warning: long loading time":126,chestShapeScreen_landed:127,chestShapeScreen_submit:128,close_age:129,close_body_mass:130,close_body_shape:131,close_bra:132,close_fit:133,close_gender:134,close_lower_brand:135,close_lower_size:136,close_lower_type_mobile:137,close_manage_purchases:138,close_out_of_scale:139,close_results:140,close_shoes_brand:141,close_shoes_size:142,close_shoes_type_mobile:143,close_shoes_width_mobile:144,close_warning:145,lowerRiseScreen_landed:146,shoesCategoryScreen_landed:147,shoesCategoryScreen_submit:148,shoesModelScreen_landed:149,shoesModelScreen_skip:150,shoesModelScreen_submit:151,sizeRecommendation_lower_results:152,sizeRecommendation_returning_lower_results:153,sizeRecommendation_returning_shoes_results:154,sizeRecommendation_returning_upper_results:155,sizeRecommendation_shoes_results:156,sizeRecommendation_upper_results:157},ve=[/^(resultsScreen_close)$/,/^(shapeSelectScreen_close)$/,/^(shoes_type_close)$/,/^(suggestBrand).*/,/^(enterData).*/];return function(ge){var ve,be=window.s;return new ue((function(ue){void 0===fe.asos.pdp.prop65Shown?fe.asos.eventBus.addListener("prop65Shown",(function(){ve=fe.asos.pdp.prop65Shown,ue()})):(ve=fe.asos.pdp.prop65Shown,ue())})).then((function(){return he.getFitAnalyticsState(ge.faContext)})).then((function(ue){var fe=["products","prop36","prop70","eVar50"],ye={},Se=ge.faContext,we=ge.commons,xe=he.states.NO_VIEWED_SCREENS,Ie=[],Pe=ge.context.toLowerCase(),_e=o(Se)?o(Se):xe;"fit analytics impression"===Pe?(me.getPerformanceMetricsValues().forEach((function(ue){be[ue.eVar]=ue.duration,Ie.push(ue.event+"="+ue.duration)})),Ie.push("event50"),Ie.push("event114"),fe.push("eVar163","eVar164","eVar165","eVar166","eVar167","eVar168","eVar169","eVar170")):"launch widget"===Pe?(Ie.push("event51"),Ie.push("event124")):"close widget"===Pe&&(be.prop70=_e,Ie.push("event124"));be.prop36=ue,be.eVar50=he.getFitAnalyticsSize(Se),!0===ve&&Ie.push("event276"),be.events=Ie.join(","),ye.linkTrackVars=we.setLinkTrackVars(fe.concat(pe.getGlobalEvars())),ye.linkTrackEvents=we.setLinkTrackEvents(pe.getLinkTrackEvents(Ie)),be.tl(!0,"o",Pe,ye)}))}})),define("ProductUtils/Analytics/Utils/GetAndPersistValue",[],(function(){return function(ue){var he=window.s.getAndPersistValue(null,ue);return"no value"===he||""===he?null:he}})),define("ProductUtils/Analytics/AddToBag",["PageConfig","ProductUtils/Analytics/Utils/FitAnalytics","ProductUtils/Analytics/Utils/Common","ProductUtils/calculateDiscount","ProductUtils/Analytics/Utils/GetAndPersistValue"],(function(ue,he,pe,me,fe){return function(ge){function c(){!function o(ue,he,me,fe,ge,ve){ue.events=ge.join(","),he.linkTrackVars=me.setLinkTrackVars(ve),he.linkTrackEvents=me.setLinkTrackEvents(pe.getLinkTrackEvents(ge)),ue.tl(!0,"o",fe,he)}(ve,be,ye,we,Ie,Pe)}for(var ve=window.s,be={},ye=ge.commons,Se=ge.context.toLowerCase(),we="add to bag",xe=[],Ie=[],Pe=["products","prop38","eVar66","eVar67","prop75","eVar91","eVar92","eVar151","eVar152"].concat(pe.getGlobalEvars()),_e=0;_e<ge.variants.length;_e++)xe.push(ge.variants[_e].variantId);ve.products=";"+xe.join(",;");var Te=pe.getProductAreaAttribute(ge.addToBagType);if(ve.eVar92=Te,ve.products=pe.addMerchEVarToProducts(ve.products,"eVar6="+ve.eVar6),ve.products=pe.addMerchEVarToProducts(ve.products,"eVar13="+Te),"mix&match"===ue.pageType){"main"===ge.addToBagType&&(ve.products=pe.addMerchEVarToProducts(ve.products,"eVar182=mix & match"));for(var ze=0;ze<ge.variants.length;ze++)ve.products=pe.addMerchEVarToProducts(ve.products,"eVar195=mix&match rating and review impression "+Boolean(ge.variants[ze].ratings),ge.variants[ze].variantId)}else{for(var Ce="asos",Ee="primary",ke=0,Ae=null;ke<ge.variants.length;ke++)(Ae=ge.variants[ke]).source&&(Ee=Ae.source.id),Ae.seller&&(Ce=Ae.seller.id.toLowerCase());if(ge.variants.length){var Ve=pe.getAsosFulfilsPrefix(Ce,Ee.toLowerCase());ve.products=pe.addMerchEVarToProducts(ve.products,"eVar211="+Ve+Ee.toLowerCase(),Ae.variantId),ve.eVar212&&(ve.products=pe.addMerchEVarToProducts(ve.products,"eVar213="+ve.eVar212)),ve.products=pe.addMerchEVarToProducts(ve.products,"eVar215="+Ve+Ce.toLowerCase(),Ae.variantId)}ge.saveCount&&ge.saveCount.isShowing&&(ve.products=pe.addMerchEVarToProducts(ve.products,"eVar228="+ge.saveCount.value)),window.asos.pdp.config.isSingleProductWithSupplierColourFacets&&(ve.products=pe.addMerchEVarToProducts(ve.products,"eVar246=more colours"))}if(ge.variants.length&&(ve.products=pe.addMerchEVarToProducts(ve.products,"eVar184="+ge.variants[0].sizeGuideOpened()+"-"+ge.variants[0].brandName)),"addtobagerror"===Se?(we="add to bag error",Ie.push("event149"),ve.prop38=ge.errorId+"|"+ge.errorCode):(Ie.push("event150="+ge.variants.length),Ie.push("event151="+function r(ue){return ue.reduce((function(ue,he){return ue+(void 0===he.price.current?he.price:he.price.current.value)}),0)}(ge.variants)),Ie.push("scAdd"),Ie.push("scOpen")),"product page"===Te){if(ge.variants.length){if(ge.ratings&&Object.keys(ge.ratings).length){var Me=(ge.ratings.averageOverallRating/5).toFixed(2),Re=ge.ratings.totalReviewCount;if(ve.products=pe.addMerchEVarToProducts(ve.products,["eVar189="+Me,"eVar190="+Re]),Ie.push("event257="+Me),Ie.push("event258="+Re),ge.ratings.percentageRecommended){var Le=ge.ratings.percentageRecommended;ve.products=pe.addMerchEVarToProducts(ve.products,"eVar191="+Le),Ie.push("event259="+Le)}if(ge.ratings.mostRecent){var Fe=(ge.ratings.mostRecent.rating/5).toFixed(2);ve.products=pe.addMerchEVarToProducts(ve.products,"eVar202="+Fe),Ie.push("event274="+Fe)}if(ge.ratings.subRatings&&ge.ratings.subRatings.length){var De=ge.ratings.subRatings[0],Oe=(De.percentage/100).toFixed(2);ve.products=pe.addMerchEVarToProducts(ve.products,"eVar192="+De.id+" "+Oe),Ie.push("event260="+Oe)}}else if(ge.ratings&&"product"===ue.pageType){var Ue="value not in response";ve.products=pe.addMerchEVarToProducts(ve.products,["eVar189="+Ue,"eVar190="+Ue,"eVar191="+Ue,"eVar192="+Ue,"eVar202="+Ue])}if(ge.variants[0].priceObj.rrp)var Be=ge.variants[0].priceObj.rrp.value;var Ne=ge.variants[0].priceObj.current.value;if(Be)ve.eVar161=me(Ne,Be);else{var We=ge.variants[0].priceObj.previous.value;ve.eVar161=me(Ne,We)}ge.variants[0].sellingFast&&(ve.products=pe.addMerchEVarToProducts(ve.products,"eVar151=selling fast"))}if(ve.eVar230){var Ge=fe("gpv_eVar243");ve.products=pe.addMerchEVarToProducts(ve.products,"eVar243="+Ge)}if(ve.gpv_eVar234&&(ve.products=pe.addMerchEVarToProducts(ve.products,"eVar234="+ve.gpv_eVar234)),ve.eVar237&&Pe.push("eVar237"),Pe=Pe.concat(["prop36","eVar50","eVar51","eVar150","eVar161","eVar231"]),ge.faContext)return he.getFitAnalyticsState(ge.faContext).then((function(ue){ve.prop36=ve.eVar150=ue,ve.products=pe.addMerchEVarToProducts(ve.products,"eVar150="+ue),ve.eVar50=ve.eVar51=he.getFitAnalyticsSize(ge.faContext)})).then((function(){c()}));c()}else c()}})),define("ProductUtils/Analytics/PageInteraction",["Promise","Providers/FeaturesProvider","ProductUtils/Analytics/Utils/Common","ProductUtils/Window"],(function(ue,he,pe,me){return function(fe){function r(ue){Se.events=be.join(","),ge.linkTrackVars=ve.setLinkTrackVars(["prop15","eVar183"].concat(pe.getGlobalEvars())),ge.linkTrackEvents=ve.setLinkTrackEvents(pe.getLinkTrackEvents(be)),Se.tl(!0,"o",ue,ge)}function p(ue){var he=ue.filter((function(ue){return ue.id===fe.eventData.productIID||void 0}));return he.length>0?he[0].variants:[]}function g(){we.then((function(ue){ue&&(Se.prop15=ye,r(ye))}))}var ge={},ve=fe.commons,be=[],ye=fe.eventData.context.toLowerCase(),Se=me.s,we=new ue((function(ue){he.onReady().then((function(){var pe=he.getFeature("pdp-track-product-image-interactions");ue(pe.isEnabled())}))}));fe.eventData.productIID&&(Se.products=";"+fe.eventData.productIID),be.push("event18");var xe={socialshare:function o(){var ue="social share intent";fe.eventData.socialPlatform&&(ue=ue.concat("|"+fe.eventData.socialPlatform)),Se.prop15=ue,r("social share")},launchsizeguide:function u(){Se.prop15="launch size guide",be.push("event103"),r("size guide click")},freedeliveryandreturns:function d(){Se.prop15="free delivery and returns",be.push("event95"),r("free delivery and returns click")},shippingrestrictions:function l(){void 0===me.trackingShippingRestrictionsClick&&(me.trackingShippingRestrictionsClick=1,Se.prop15="shipping restrictions",r("shipping restrictions click"))},showmore:function a(){void 0===me.trackingEventMore&&(me.trackingEventMore=1,Se.prop15="show more",r("show more click"))},showless:function c(){void 0===me.trackingEventLess&&(me.trackingEventLess=1,Se.prop15="show less",r("show less click"))},openmodal:function m(){var ue=me.asos.pdp.config.product.products,he=function h(ue){return ue.filter((function(ue){return!0===ue.isInStock})).length}(p(ue)),pe=p(ue).length,ge=0===pe?"0":(100*(he/pe)).toFixed(2)+"%|";fe.eventData.modalType&&"mixAndMatch"===fe.eventData.modalType&&(Se.prop15="mix and match|open modal",Se.eVar31=p(ue).length+"|"+he+"|"+ge+"null|null|null|null|null|null"),r("mix and match modal click")},chevronclick:function f(){we.then((function(ue){ue&&void 0===me.trackingChangeThumbnail&&(me.trackingChangeThumbnail=1,Se.prop15="product chevron click",r("product chevron click"))}))},"360launch":g,"360zoom":g,thumbnailclick:g,video:function v(){we.then((function(ue){ue&&(Se.prop15="video progress "+fe.eventData.videoEvent,r(ye))}))},ingredientsbuttonclick:function b(){Se.prop15="ingredients list",r(ye)}};xe[ye]()}})),define("ProductUtils/Analytics/Utils/PageLoad",["ProductUtils/Window","Promise"],(function(ue,he){return new he((function(he){ue.asos.eventBus.addListener("pageLoadAnalyticsFired",(function(){he()}))}))})),define("ProductUtils/Analytics/CustomLinkEvent",["ProductUtils/Analytics/Utils/Common","ProductUtils/Window","ProductUtils/Analytics/Utils/PageLoad","PageConfig"],(function(ue,he,pe,me){return function(fe){function r(he,me,fe){pe.then((function(){be.events=me.join(",");var pe={linkTrackVars:ge.setLinkTrackVars(fe.concat(ue.getGlobalEvars())),linkTrackEvents:ge.setLinkTrackEvents(ue.getLinkTrackEvents(me))};be.tl(!0,"o",he,pe)}))}var ge=fe.commons,ve=fe.eventName.toLowerCase(),be=he.s,ye={fireflexfulfilmentanalyticsevent:function o(){var he="primary",pe="asos",ge=[],ve=fe.variant.source,ye=fe.variant.seller,Se=!1;if(ve&&(he=ve.id.toLowerCase(),-1===ge.indexOf("event288")&&(ge.push("event288"),Se=!0)),ye&&(pe=ye.id.toLowerCase(),-1===ge.indexOf("event288")&&(ge.push("event288"),Se=!0)),"mix&match"===me.pageType||ve||ye||-1!==ge.indexOf("event303")||(ge.push("event303"),Se=!0),Se){var we=ue.getAsosFulfilsPrefix(pe,he);be.eVar210=fe.variant.id+":"+we+he,be.eVar214=fe.variant.id+":"+we+pe,r("sourcing location messaging Impression",ge,["eVar210","eVar212","eVar214"])}}};ye[ve]()}})),define("ProductUtils/Analytics",["ProductUtils/Analytics/FitAnalytics","ProductUtils/Analytics/AddToBag","ProductUtils/Analytics/PageInteraction","ProductUtils/Analytics/CustomLinkEvent","Providers/FeaturesProvider","ProductUtils/Window"],(function(ue,he,pe,me,fe,ge){function o(ue,he){fe.onReady().then((function(){fe.track(ue,null,he)}))}function a(){return fe.onReady().then((function(){return fe.getFeature("pdp-save-count").isEnabled()}))}return new function(){var fe;window.CommonAnalytics&&(fe=new window.CommonAnalytics),this.firePageInteraction=function(ue){pe({eventData:ue,commons:fe})},this.normalizeError=function(ue,he){var pe=[{errorCode:null,errorMessage:he}];return ue.message=Array.isArray(ue.message)?ue.message:pe,ue},this.addVariants=function(ue,pe,me,ve,be,ye){ue=void 0===ue.length?[ue]:ue,void 0===me&&(me="main"),a().then((function(Se){pe?he({context:"addToBagError",addToBagType:me,variants:ue,errorCode:pe.message[0].errorCode,errorId:pe.message[0].errorMessage,faContext:ve,commons:fe,ratings:be,saveCount:Se?ye:null}):(he({context:"addToBag",addToBagType:me,variants:ue,faContext:ve,commons:fe,ratings:be,saveCount:Se?ye:null}),ge.asos.eventBus.emit("fireAddToBagMarketingEvent",ue))}))},this.fireFitAnalyticsOpenWidgetEvent=function(he){ue({context:"launch widget",commons:fe,faContext:he}),o("PDP Click - Fit Assistant")},this.fireFitAnalyticsOutOfScaleEvent=function(he){ue({context:"out of scale",commons:fe,faContext:he})},this.fireFitAnalyticsCloseWidgetEvent=function(he){(ue({context:"close widget",commons:fe,faContext:he}),he.widgetScreenEvents.length)&&he.widgetScreenEvents.filter((function(ue){"close"===ue.value&&"resultsScreen"!==ue.event&&o("PDP - Fit Assistant Exited",{exitedFitAssistantScreen:ue.event}),"resultsScreen"===ue.event&&o("PDP - Fit Assistant Completed",{fitAssistantCompleted:ue.event})}))},this.fireFitAnalyticsLoadEvent=function(he){ue({context:"fit analytics impression",commons:fe,faContext:he})},this.fireFlexFulfilmentAnalyticsEvent=function(ue){me({commons:fe,eventName:"fireFlexFulfilmentAnalyticsEvent",variant:ue})}}})),define("Components/social-share/social-share",["ko","text!./social-share.html","PageConfig","ProductUtils/Analytics","ProductUtils/NewRelicLogger"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){function r(ue){for(var he=[],pe=Object.keys(ue),me=0;me<pe.length;me++){var fe=pe[me];he.push(fe+"="+encodeURIComponent(ue[fe]))}return he.join("&")}this.isVisible=ue.observable(!1),this.isMobile="mobile"===pe.platform,this.isRussia="ru"===pe.storeCode.toLowerCase();var ge,ve,be,ye=he.data,Se=ye.images[0].url,we=document.querySelector("link[rel=canonical]").href;this.facebookLink="https://www.facebook.com/sharer/sharer.php?"+r({u:we+"?ctaref=product_share_facebook"}),this.vkLink="http://vk.com/share.php?"+r({url:we+"?ctaref=product_share_vk"}),this.pinterestLink="https://pinterest.com/pin/create/button/?"+r({url:we+"?ctaref=product_share_pinterest",media:Se,description:ye.name}),this.whatsappLink="https://wa.me/?"+r({text:ye.name+" "+we+"?ctaref=product_share_whatsapp"}),this.emailLink="mailto:?"+r({subject:ye.name,body:ye.name+" "+we+"?ctaref=product_share_email"}),this.setClickListener=function(ue){document.addEventListener("click",ge=function(he){-1===ue.indexOf(he.target)&&(this.isVisible(!1),document.removeEventListener("click",ge))}.bind(this))}.bind(this),this.setKeydownListener=function(ue,he,pe){document.addEventListener("keydown",ve=function(me){27===me.keyCode&&(ue.focus(),this.isVisible(!1),document.removeEventListener("keydown",ve)),("Tab"===me.key||9===me.keyCode)&&(me.shiftKey?document.activeElement===he&&(pe.focus(),me.preventDefault()):document.activeElement===pe&&(he.focus(),me.preventDefault()))}.bind(this))}.bind(this),this.fireAnalytics=function(ue,he){var pe,fe=ye.id+"";return he&&(pe=he.target.dataset.id),me.firePageInteraction({context:"socialShare",socialPlatform:pe,productIID:fe}),!0},this.handleClick=function(ue,he){this.fireAnalytics(ue,he),window.open(he.target.href,"SocialShareWindow","width=700,height=600,resizable,scrollbars=yes,status=1")},this.openSocialShare=function(){var ue=document.activeElement,he=Array.prototype.slice.call(ue.parentElement.querySelectorAll("#share-bar, #share-bar a")),pe=he.slice(1),me=pe[0],fe=pe[pe.length-1];return this.isVisible()?(this.isVisible(!1),void ue.focus()):(be||(be=!0,this.fireAnalytics()),this.setClickListener(he),this.setKeydownListener(ue,me,fe),this.isVisible(!0),void me.focus())}.bind(this),this.toggleShareIcons=function(){navigator.share&&this.isMobile?navigator.share({title:ye.name,text:ye.name,url:we+"?ctaref=product_share_native"}).then(function(){this.fireAnalytics()}.bind(this)).catch(function(ue){fe.logError(ue),this.openSocialShare()}.bind(this)):this.openSocialShare()}.bind(this)},template:he}})),define("Components/content/content",[],(function(){return{viewModel:function e(ue){this.state=ue.state,this.product=ue.data}}})),define("text!Components/size-guide/size-guide.html",[],(function(){return'\x3c!-- ko if: render() --\x3e\n<div class="size-guide-button">\n    <button data-testid="size-guide-button" class="link" data-bind="click: openSizeGuide($element), text: text"></button>\n</div>\n\x3c!-- /ko --\x3e\n'})),define("Components/size-guide/size-guide",["ko","text!./size-guide.html","ProductUtils/Window","ProductUtils/Analytics"],(function(ue,he,pe,me){return{viewModel:function s(ue){function t(){me.firePageInteraction({context:"launchSizeGuide",productIID:ue.id})}this.text=ue.dictionary.pdp_size_guide_link,this.render=ue.visible,this.openSizeGuide=function(he){return function(){t(),pe.asos.eventBus.emit("sizeGuideOpen",{url:ue.url,focusOnClose:he})}}},template:he}})),define("text!Components/product-gallery/product-gallery.html",[],(function(){return'\x3c!-- ko if: !isMobile--\x3e\n    <div class="gallery-aside-wrapper">\n        \x3c!-- ko if: !preventThumbnailDescription --\x3e\n            <p id="thumbnailsDescription" data-bind="text: state.resources.pdp_media_gallery_thumbnail_instruction"></p>\n        \x3c!-- /ko --\x3e\n\n        <ul class="thumbnails" data-bind="attr: { \'aria-label\': galleryText.thumbnailLabel }" aria-describedby="thumbnailsDescription">\n            \x3c!-- ko foreach: galleryItems--\x3e\n                \x3c!-- ko if: $index() > 0  --\x3e\n                    <li class="image-thumbnail" data-bind="css: { active: $parent.thumbIndex() === $index() }, attr: { \'aria-current\': $parent.thumbIndex() === $index() }">\n                        <button data-bind="click: $parent.selectThumbnail.bind($data, $index())">\n                            <img class="gallery-image" data-bind="attr: imageSources().thumbnail"/>\n                        </button>\n                    </li>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </ul>\n\n        \x3c!-- ko if : showInteractiveButtons --\x3e\n            <div class="interactives">\n                <button class="catwalk" data-bind="visible: isVideoButtonVisible(), event: { blur: onVideoButtonBlur }, click: onVideoButtonActivated, attr: { \'aria-current\': isVideoVisible, \'aria-label\': state.resources.pdp_media_video_player_label }">\n                    <span class="interactive-icon product-play" data-bind="css: { \'product-play-filled\': isVideoVisible }"></span>\n                    <span class="interactive-text" data-bind="text: state.resources.pdp_misc_video, css: { \'active\': isVideoVisible }"></span>\n                </button>\n                <button class="spinset" data-bind="visible: isSpinViewerButtonVisible(), click: onSpinViewerButtonActivated, attr: { \'aria-current\': isSpinViewerVisible, \'aria-pressed\': isSpinViewerPressed, \'aria-label\': state.resources.pdp_media_spinset_label }">\n                    <span class="interactive-icon product-360" data-bind="css: { \'product-360-selected\': isSpinViewerVisible }"></span>\n                    <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: state.resources[\'pdp_misc_spinset\']"></span>\n                </button>\n            </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!-- ko if : product && isInStock --\x3e\n            <div class="social-share social-share-gallery" data-bind=\'component: { name: "social-share", params: { state: state, data: product } }\'></div>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e\n\n<div\n    id="product-gallery"\n    class="product-carousel"\n    role="region"\n    tabindex="-1"\n    data-bind="\n        attr: {\n            \'aria-label\': galleryText.carouselLabel, \n            \'id\': productGalleryId\n        }"\n>\n    <div class="gallery-live-region" aria-live="polite">\n        \x3c!-- ko if: ariaLiveText --\x3e\n            <span data-bind="text: ariaLiveText"></span>\n        \x3c!-- /ko --\x3e\n    </div>\n    <div class="window" data-bind="swipe">\n        <div class="selling-fast" data-bind="visible: showSellingFastLabel">\n            <span class="selling-fast__label" data-bind="text: state.resources.pdp_misc_selling_fast"></span>\n        </div>\n        \x3c!-- ko if: !isMixMatch--\x3e\n            <div id="image-overlay-slot"></div>\n        \x3c!-- /ko --\x3e\n        <div class="gallery-images" data-bind="foreach: galleryItems, css: { animate : animate() }, style: { width : galleryWidth, marginLeft : galleryPosition }">\n            <div class="image-container" data-bind="style: { width : $parent.itemWidth, display: $parent.showCarouselControls() ? \'block\' : \'none\'}, css: { \'zoomable\': $parent.imageData(), \'hide-image\': $parent.thumbIndex() !== $index() }, attr: { \'data-gallery-index\': $index, \'aria-hidden\': $parent.thumbIndex() !== $index() }">\n                <div class="asos-media spinset imageviewer" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: $parent.playerParams.scene7, viewer: { zoomFactors: $parent.zoomFactors, baseJpgQlt: 80, zoomJpgQlt: 90, handleLoadingErrors: false, showHint: false, maxPixelRatio: 3 }, api: $parent.imageViewerApis()[$index()], messages: $parent.playerParams.messages } }, visible: $parent.imageViewersVisibility()[$index()]\'></div>\n                <img class="gallery-image" data-bind="attr: imageSources().hero, event: { onload: window.asos.performance.markAndMeasure(\'pdp:gallery_image_\'+$index()+\'_displayed\')}"/>\n            </div>\n        </div>\n        \x3c!-- ko if: showCarouselControls --\x3e\n            <button\n                class="arrow-button arrow-button-right"\n                aria-controls="product-gallery"\n                aria-label="pdp_media_gallery_carousel_next"\n                data-bind="\n                    click:moveRight,\n                    markAndMeasure: \'pdp:gallery_swiping_right_interactive\',\n                    attr: {\n                        \'aria-label\': state.resources.pdp_media_gallery_carousel_next,\n                        \'aria-controls\': productGalleryId\n                    }"\n            >\n                <span aria-hidden="true" class="product-chevron-right-large-outlined"></span>\n            </button>\n            <button\n                class="arrow-button arrow-button-left"\n                aria-controls="product-gallery"\n                aria-label="pdp_media_gallery_carousel_previous"\n                data-bind="\n                    click: moveLeft,\n                    markAndMeasure: \'pdp:gallery_swiping_left_interactive\',\n                    attr: {\n                        \'aria-label\': state.resources.pdp_media_gallery_carousel_previous,\n                        \'aria-controls\': productGalleryId\n                    }"\n            >\n                <span aria-hidden="true" class="product-chevron-left-large-outlined"></span>\n            </button>\n            \x3c!-- ko if: isMobile--\x3e\n                <div class="carousel-bullets">\n                    <ul id="mobile-gallery-bullets" data-bind="foreach: galleryItems, attr: { \'aria-label\': selectImageAlt }">\n                        \x3c!-- ko if: $index() > 0 --\x3e\n                            <li data-bind="css: { active: $parent.thumbIndex() === $index() }">\n                                <button aria-describedby="mobile-gallery-bullets" data-bind="click: $parent.selectThumbnail.bind($data, $index()), attr: { \'aria-current\': ($parent.thumbIndex() === $index()).toString() }"></button>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n    <div class="asos-media catwalk" style="display: none" data-bind=\'component: { name: "asos-video-player-prod", params: { scene7: playerParams.scene7, player: { startInFullScreen: startVideoInFullScreen, closeOnFullScreenExited: closeVideoOnFullScreenExited, initialLoopCount: 2 }, api: videoPlayerApi, messages: playerParams.messages } }, visible: isVideoVisible\'></div>\n    <div class="asos-media spinset spinviewer" style="display: none" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: playerParams.scene7, viewer: { spinSpeed: spinSpeed, zoomFactors: zoomFactors, reverseVerticalDirection: false, reverseHorizontalDirection: false, baseJpgQlt: 80, zoomJpgQlt: 90, showHint: showSpinViewerContainerHint, useInitialAnimation: true, animationIntervalStart: 100, animationIntervalPeak: 100, animationFramesCount: 5, preloadingTimeout: 30000 }, api: spinViewerApi, messages: playerParams.messages } }, visible: isSpinViewerVisible, css: { "zoomable": isSpinViewerLoadedWithoutErrors }\'></div>\n</div>\n\n\x3c!-- ko if: isMobile--\x3e\n    <div class="gallery-aside-wrapper">\n        \x3c!-- ko if : showInteractiveButtons --\x3e\n            <div class="interactives">\n                <button class="catwalk" data-bind="visible: isVideoButtonVisible(), click: onVideoButtonActivated, attr: { \'aria-current\': isVideoVisible, \'aria-label\': state.resources.pdp_media_video_player_label }">\n                    <span class="interactive-icon product-play" data-bind="css: { \'product-play-filled\': isVideoVisible }"></span>\n                    <span class="interactive-text" data-bind="text: state.resources.pdp_misc_video, css: { \'active\': isVideoVisible }"></span>\n                </button>\n                <button class="spinset" data-bind="visible: isSpinViewerButtonVisible(), click: onSpinViewerButtonActivated, attr: { \'aria-current\': isSpinViewerVisible, \'aria-pressed\': isSpinViewerPressed, \'aria-label\': state.resources.pdp_media_spinset_label }">\n                    <span class="interactive-icon product-360" data-bind="css: { \'product-returns\': isSpinViewerVisible }"></span>\n                    <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: spinViewerLabelText"></span>\n                </button>\n            </div>\n        \x3c!--/ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e\n'})),define("ProductUtils/Browser",["ko","ProductUtils/Window"],(function(ue,he){function i(){ve(ge.large.matches?fe:ge.medium.matches?me:pe)}var pe="SMALL_VIEWPORT",me="MEDIUM_VIEWPORT",fe="LARGE_VIEWPORT",ge={medium:he.matchMedia("(min-width: 720px)"),large:he.matchMedia("(min-width: 1024px)")},ve=ue.observable();return ge.medium.addListener(i),ge.large.addListener(i),i(),{isOnline:function n(){return!he.navigator||he.navigator.onLine},viewportSize:ve,isUpToViewport:function s(he){return ue.computed((function(){var ue=!1;switch(he){case pe:ue=ve()===pe;break;case me:ue=[pe,me].indexOf(ve())>-1;break;case fe:ue=[pe,me,fe].indexOf(ve())>-1}return ue}))},viewports:{SMALL_VIEWPORT:pe,MEDIUM_VIEWPORT:me,LARGE_VIEWPORT:fe}}})),define("Components/product-gallery/product-gallery",["ko","$","text!./product-gallery.html","PageConfig","hammer","Asos.Utils.MediaPlayers","ProductUtils/Analytics","ProductUtils/UrlUtils","ProductUtils/Browser","ProductUtils/ImagePresets","ProductUtils/Window"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se,we){return{viewModel:function u(he){var pe=he.state;this.product=he.data.product,this.productGalleryId="product-gallery"+(he.data.product?"":"-modal");var xe=he.data.images;this.defaultProductId=he.data.defaultProductId,this.galleryItems=ue.observableArray(),this.galleryWidth=ue.observable(),this.itemWidth=ue.observable(),this.itemWidthValue=ue.observable(),this.galleryPosition=ue.observable(),this.galleryIndex=ue.observable(0),this.animate=ue.observable(!1),this.thumbIndex=ue.observable(0),this.isInStock=ue.observable(!1),this.isMobile="mobile"===me.platform,this.ariaLiveText=ue.observable(""),this.isSmallViewport=ye.isUpToViewport(ye.viewports.SMALL_VIEWPORT),this.preventThumbnailDescription=he.data.preventThumbnailDescription,this.isMixMatch=he.data.isMixMatch;var Ie=new be,Pe={imageChanged:!1,thumbnailClick:!1,imageViewerZoomIn:!1,spinViewerInit:!1,spinViewerSpin:!1,spinViewerZoomIn:!1,videoPlayerInit:!1,videoProgress:{50:!1,100:!1}};this.checkIfInStockAndSetFlag=function(){this.isInStock(!pe.productData||pe.productData.isInStock)},this.getVisibleImages=function(he){var pe=he.filter((function(ue){return!0===ue.isVisible}));if(!pe[0].colourWayId||null===pe[0].colourWayId){var me=ue.utils.arrayFirst(he,(function(ue){return ue.isPrimary}));if(me||(me=ue.utils.arrayFirst(he,(function(ue){return ue.colourWayId&&null!==ue.colourWayId}))),me){var fe=pe.indexOf(me);fe>=0&&pe.splice(fe,1),pe.splice(0,0,me)}}return pe};var _e,Te=this.getVisibleImages(xe);this.appendImageSources=function(he){return he.map(function(he,pe){var me=function(){var ue=0===pe?this.colourOptionImage().url:he.url;return{thumbnail:{sizes:"40px",alt:this.getThumbnailAlt(pe+1),src:Se.getImageSource(ue,40,"thumbnail"),srcset:Se.getImageSourceSet(ue,40,"thumbnail")},hero:{sizes:"(max-width: 720px) 100vw, (min-width: 720px) 513px",alt:this.getImageAlt(pe+1),src:Se.getImageSource(ue,513,"hero"),srcset:Se.getImageSourceSet(ue,513,"hero")}}}.bind(this);return he.imageSources=0===pe?ue.computed(me):me,he}.bind(this))}.bind(this),this.getThumbnailAlt=function(ue){return pe.resources.pdp_media_gallery_thumbnail_count.replace("%{index}",ue).replace("%{total}",Te.length)}.bind(this),this.getImageAlt=function(ue){return(this.product?this.product.name:he.data.productName)+", "+pe.resources.pdp_misc_count.replace("%{index}",ue).replace("%{total}",Te.length)}.bind(this),this.selectImageAlt=pe.resources.pdp_media_gallery_select_image,pe.mainImage=this.colourOptionImage=ue.observable(Te[0]),this.init=function(){this.galleryItems(this.shuffleLastImage(this.appendImageSources(Te))),this.galleryWidth(this.getGalleryWidth()),this.itemWidth(this.getItemWidth()),this.setSwipe(),this.setImageViewers(),this.setGalleryPosition(1),this.defaultProductId>0?this.trySetProductImage(this.defaultProductId):pe.selectedColour()&&pe.selectedColour().colourWayId!==this.colourOptionImage().colourWayId&&this.trySetColour(pe.selectedColour().colourWayId)},this.setGalleryPosition=function(ue){this.galleryIndex(ue),0===ue?this.thumbIndex(this.galleryItems().length-1):this.thumbIndex(ue),this.galleryPosition("-"+100*Math.abs(this.galleryIndex())+"%")},this.getItemWidth=function(){return 100/this.galleryItems().length+"%"},this.getGalleryWidth=function(){return 100*this.galleryItems().length+"%"},this.shuffleLastImage=function(ue){var he=ue,pe=ue[ue.length-1];return he.unshift(pe),he},this.moveLeft=function(){return this.resetImageViewer(),0===this.galleryIndex()?(this.animate(!1),this.setGalleryPosition(this.galleryItems().length-1),setTimeout(function(){this.animate(!0),this.setGalleryPosition(this.galleryItems().length-2),Pe.imageChanged||(ve.firePageInteraction({context:"chevronClick",productIID:he.data.id}),Pe.imageChanged=!0)}.bind(this),10),!1):(this.animate(!0),this.setGalleryPosition(this.galleryIndex()-1),Pe.imageChanged||(ve.firePageInteraction({context:"chevronClick",productIID:he.data.id}),Pe.imageChanged=!0),!1)},this.moveRight=function(){return this.resetImageViewer(),this.galleryIndex()===this.galleryItems().length-1?(this.animate(!1),this.setGalleryPosition(0),setTimeout(function(){this.animate(!0),this.setGalleryPosition(1),Pe.imageChanged||(ve.firePageInteraction({context:"chevronClick",productIID:he.data.id}),Pe.imageChanged=!0)}.bind(this),10),!1):(this.animate(!0),this.setGalleryPosition(this.galleryIndex()+1),Pe.imageChanged||(ve.firePageInteraction({context:"chevronClick",productIID:he.data.id}),Pe.imageChanged=!0),!1)},this.selectThumbnail=function(ue,pe){this.exitVideo(),this.exitSpinViewer(),this.resetImageViewer(),this.animate(!1),this.setGalleryPosition(ue),!0===pe||Pe.thumbnailClick||(ve.firePageInteraction({context:"thumbnailClick",productIID:he.data.id}),Pe.thumbnailClick=!0)}.bind(this),this.trySetColour=function(ue){var he=function i(ue){for(var he=-1,pe=0;pe<xe.length;pe++)if(xe[pe].colourWayId===ue){he=pe;break}return he}(ue);if(-1!==he){this.colourOptionImage(xe[he]),this.exitVideo(),this.exitSpinViewer(),this.setGalleryPosition(1),this.imageViewersVisibility()[1]&&this.initImageViewer(1)}},this.trySetProductImage=function(ue){for(var he=1,pe=0;pe<xe.length;pe++)if(xe[pe].productId===ue){he=pe+1;break}this.setGalleryPosition(he)},pe.selectedColour.subscribe(function(ue){null==ue?(this.colourOptionImage(xe[0]),this.initImageViewer(1)):ue.colourWayId&&this.trySetColour(ue.colourWayId)}.bind(this)),this.videoPlayerApi=ue.observable(),this.exitVideo=function(){if(this.isVideoVisible(!1),this.videoPlayerApi()&&this.videoPlayerApi().stop)try{this.videoPlayerApi().stop(),we.asos.eventBus.emit("videoPlaybackStopped")}catch(ue){console.warn("could not stop video: "+ue)}},this.keydownEventListener=function(){var ue;document.addEventListener("keydown",(ue=function(he){("Escape"===he.key||27===he.keyCode)&&(this.exitVideo(),document.removeEventListener("keydown",ue))}).bind(this))},this.keydownEventListener(),document.body.addEventListener("modalClosed",function(){this.exitVideo()}.bind(this)),this.startVideoInFullScreen=this.isMobile,this.closeVideoOnFullScreenExited=this.isMobile,this.canDisplayVideoButton=ue.observable(!1),this.isVideoVisible=ue.observable(!1),this.playerParams=he.data.playerParams,this.isVideoButtonVisible=ue.computed(function(){return this.canDisplayVideoButton()&&this.isInStock()}.bind(this)),this.playerParams.messages={errorHeaderText:pe.resources.pdp_media_video_player_error_header,errorMessageText:pe.resources.pdp_media_video_player_error_message,spinsetErrorMessageText:pe.resources.pdp_media_spinset_error_message,refreshButtonText:pe.resources.pdp_media_video_player_refresh_button,unsupportedHeaderText:pe.resources.pdp_media_video_player_unsupported_header,unsupportedMessageText:pe.resources.pdp_media_video_player_unsupported_message,closeButtonText:pe.resources.pdp_media_video_player_close_button,hintDragText:pe.resources.pdp_media_spinset_hint_drag,hintTapText:pe.resources.pdp_media_spinset_hint_tap,zoomHint:pe.resources.pdp_media_gallery_zoom_hint,zoomOneHundred:pe.resources.pdp_media_gallery_zoom_one_hundred,zoomTwoHundred:pe.resources.pdp_media_gallery_zoom_two_hundred,zoomFourHundred:pe.resources.pdp_media_gallery_zoom_four_hundred},this.onVideoButtonActivated=function(){Pe.videoFirstPlaybackCompleted=!1,this.isVideoVisible()||(this.resetImageViewer(),this.isVideoVisible(!0),this.exitSpinViewer(),this.videoPlayerApi().start(_e),we.asos.eventBus.emit("videoPlaybackStarted"),this.ariaLiveText(pe.resources.accessibility_pdp_video_playing),Pe.videoPlayerInit||(ve.firePageInteraction({context:"video",productIID:he.data.id,videoEvent:"start"}),Pe.videoPlayerInit=!0))},this.onVideoButtonBlur=function(){this.ariaLiveText("")},this.videoPlayerApi.subscribe(function(ue){ue.events.on("playerExitRequested allLoopsEnded",function(){this.exitVideo()}.bind(this)),ue.events.on("progress",(function(ue,pe){if(pe.detail.value)for(var me in Pe.videoProgress){var fe=parseInt(me,10);!Pe.videoProgress[me]&&pe.detail.value>=fe&&(Pe.videoProgress[me]=!0,ve.firePageInteraction({context:"video",productIID:he.data.id,videoEvent:me}))}}));var pe={formats:["m3u8","mp4","ogg"],preferredFPS:this.isMobile?25:50,preferredBitrates:{720:1200}};he.data.useProductIdForVideos?ue.loadAssets(he.data.id,pe,function(){this.canDisplayVideoButton(!0),this.checkIfInStockAndSetFlag()}.bind(this)):he.data.media&&he.data.media.catwalkUrl&&ge.getVideoPlayerAssetsProvider(he.data.playerParams.scene7.videoServer).getAssets(Ie.formatUrl(he.data.media.catwalkUrl),pe).then(function(ue){_e=ue,this.canDisplayVideoButton(!0),this.checkIfInStockAndSetFlag()}.bind(this))}.bind(this)),this.spinViewerApi=ue.observable(),this.exitSpinViewer=function(){this.spinViewerApi()&&this.spinViewerApi().zoomReset(),this.isSpinViewerVisible(!1)},this.spinSpeed=this.isMobile?1.5:3,this.showSpinViewerContainerHint=!this.isMobile,this.zoomFactors=[.5,1],this.isSpinViewerButtonVisible=ue.observable(!1),this.isSpinViewerVisible=ue.observable(!1),this.isSpinViewerPressed=ue.computed(function(){return this.isMobile?this.isSpinViewerVisible().toString():void 0}.bind(this)),this.isSpinViewerLoadedWithoutErrors=ue.observable(!1),this.spinViewerLabelText=ue.observable(pe.resources.pdp_misc_spinset),this.onSpinViewerButtonActivated=function(){this.spinViewerLabelText(pe.resources.pdp_misc_gallery),this.isSpinViewerVisible()?this.isMobile&&(this.spinViewerLabelText(pe.resources.pdp_misc_spinset),this.exitSpinViewer()):(this.resetImageViewer(),this.exitVideo(),this.isSpinViewerVisible(!0),this.spinViewerApi().init(),Pe.spinViewerInit||(ve.firePageInteraction({context:"360Launch",productIID:he.data.id}),Pe.spinViewerInit=!0))},this.spinViewerApi.subscribe(function(ue){if(he.data.media&&he.data.media.threeSixtyUrl&&he.data.media.threeSixtyUrl.length>0){ue.events.on("zoomedIn",(function(){Pe.spinViewerZoomIn||(ve.firePageInteraction({context:"360Zoom",productIID:he.data.id}),Pe.spinViewerZoomIn=!0)})),ue.events.on("allImagesLoaded",function(ue,he){he&&this.isSpinViewerLoadedWithoutErrors(he)}.bind(this));var me=he.data.id;ue.loadAssets(me,function(){this.isSpinViewerButtonVisible(!pe.productData||pe.productData.isInStock)}.bind(this))}}.bind(this)),this.showCarouselControls=ue.computed(function(){return!this.isVideoVisible()&&!this.isSpinViewerVisible()}.bind(this)),this.imageData=ue.observable(),this.imageViewerApis=ue.observableArray([]),this.imageViewersVisibility=ue.observableArray([]),this.areAllImageViewerApisReady=function(){for(var ue=0;ue<this.imageViewerApis().length;ue++)if(!this.imageViewerApis()[ue]())return!1;return!0},this.initImageViewer=function(ue){var pe=this.imageViewersVisibility(),me=this.imageData(),fe=this.imageViewerApis()[ue](),ge=he.data.rootElement.querySelector('.image-container[data-gallery-index="'+ue+'"] img.gallery-image');if(ge.complete){if(ge.complete&&fe&&me){pe[ue]=!0,this.imageViewersVisibility(pe);var ve=ge.cloneNode();ve.style.visibility="visible",fe.setAssets(me[this.getImageIndexFromGalleryIndex(ue)]),fe.init(null,ve),ge.style.visibility="hidden"}}else ge.onload=this.initImageViewer.bind(this,ue)},this.loadImagesMetadata=function(ue){ge.getSpinViewerAssetsProvider(he.data.playerParams.scene7.imageServer).getAssets(ue,function(ue){this.imageData(ue),this.checkIfInStockAndSetFlag()}.bind(this))},this.imageData.subscribe(function(ue){if(ue)for(var he=0;he<this.imageViewerApis().length;he++)this.initImageViewer(he)}.bind(this)),this.onImageViewerApiReady=function(ue){var pe=he.data.rootElement.querySelector('[data-gallery-index="'+ue+'"]');this.imageData()&&this.initImageViewer(ue,pe)},this.getImageIndexFromGalleryIndex=function(he){var pe=1===he?this.colourOptionImage():this.galleryItems()[he],me=ue.utils.arrayFirst(xe,(function(ue){return ue.url===pe.url}));return xe.indexOf(me)},this.setImageViewers=function(){for(var he,pe=this.galleryItems(),me=[],fe=0;fe<xe.length;fe++)me.push(xe[fe].url);for(fe=0;fe<pe.length;fe++)he=ue.observable(),this.imageViewerApis.push(he),this.imageViewersVisibility.push(!1),he.subscribe(this.onImageViewerApiReady.bind(this,fe));this.loadImagesMetadata(me)},this.resetImageViewer=function(){var ue=this.imageViewerApis()[this.galleryIndex()]&&this.imageViewerApis()[this.galleryIndex()]();ue&&ue.zoomReset()},this.setSwipe=function(){if(window.addEventListener){var ue=document.querySelector(".product-gallery .window"),he=new fe(ue,{inputClass:fe.TouchInput});he.on("swipeleft",function(){this.moveRight()}.bind(this)),he.on("swiperight",function(){this.moveLeft()}.bind(this))}},this.showSellingFastLabel=ue.computed(function(){var ue=!this.isVideoVisible()&&!this.isSpinViewerVisible();return this.isInStock()&&he.state.sellingFast&&ue}.bind(this)),this.galleryText={thumbnailLabel:pe.resources.pdp_media_gallery_thumbnail_label,carouselLabel:pe.resources.pdp_media_gallery_carousel_label},this.showInteractiveButtons=ue.computed(function(){return!!this.isInStock&&(this.isVideoButtonVisible()||this.isSpinViewerButtonVisible())}.bind(this)),this.init()},template:pe}})),define("text!Components/product-colour/product-colour.html",[],(function(){return'\x3c!-- ko if: render && (colourDropdownVisible() || isMixAndMatch) --\x3e\n<section>\n    <div class="colour-size colour-component">\n        <div class="grid-row colour-section">\n            <label for="colourSelect" class="disabled" data-bind="\n                text: colourLabel,\n                attr: {\n                    \'for\': colourSelectorId\n                }\n            "></label>\n            \x3c!-- ko if: isMixAndMatch --\x3e\n                <span class="product-colour" data-bind="visible: colourLabelVisible(), text: selectedColourLabel(), css: { disabled: isDisabled }"></span>\n            \x3c!-- /ko --\x3e\n            <div class="colour-size-select" data-testid="colour-size-select" data-bind="visible: colourDropdownVisible()">\n                <select id="colourSelect"\n                        data-id="colourSelect"\n                        data-bind="optionsCaption: selectColourText,\n                        disable: isDisabled,\n                        options: data,\n                        optionsAfterRender: setColourOptionText,\n                        value: colour,\n                        css:{ required : noColourSelected()},\n                        attr: {\n                            \'id\': colourSelectorId,\n                            \'data-id\': colourSelectorId,\n                            \'aria-describedby\': noColourSelected() ? \'selectColourError\' : null,\n                            \'aria-invalid\': noColourSelected() ? true : null\n                        }"></select>\n                \x3c!-- ko if: noColourSelected() --\x3e\n                <span id="selectColourError" class="error basic-error-box" data-bind="text:selectColourPrompt"></span>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</section>\n\x3c!-- /ko --\x3e'})),define("Components/product-colour/product-colour",["ko","text!./product-colour.html","PageConfig","ProductUtils/Window"],(function(ue,he,pe,me){return{viewModel:function s(he){var fe=he.state,ge="undefined"!==he.hideOnOutOfStock&&he.hideOnOutOfStock;this.render=!(ge&&!fe.productData.isInStock),this.noColourSelected=he.state.showNoColourSelectedWarning,this.focusColourSelect=he.state.focusColourSelect,this.preventFocusScroll=he.state.preventFocusScroll,this.isMixAndMatch=he.isMixAndMatch,this.data=ue.observableArray(),this.colour=fe.selectedColour,this.colour.subscribe((function(ue){me.asos.eventBus.emit("colourChosen",ue&&ue.colour)})),this.useShortSelectColourLabel=he.useShortSelectColourLabel,this.selectColourPrompt=fe.resources.pdp_select_colour_message,this.colourLabel=fe.resources.pdp_misc_colour+":",this.isMobile="mobile"===pe.platform,this.notAvailableText=fe.resources.pdp_status_not_available,this.selectorIndex=he.selectorIndex,this.context=he.context,this.colourSelectorId="colour-select-"+fe.productData.productId,this.useShortSelectColourLabel?this.selectColourText=fe.resources.pdp_select_colour_label:this.selectColourText=fe.resources.pdp_select_colour_from_label,this.lowInStockText=fe.resources.pdp_status_low_in_stock;var ve=he.state.productData;this.isDisabled=!he.state.productData.isInStock;var be=ve.colours;this.focusColourSelect.subscribe(function(ue){ue&&(document.getElementById(this.colourSelectorId).focus({preventScroll:!!this.preventFocusScroll()}),this.preventFocusScroll(!1),this.focusColourSelect(!1))}.bind(this)),this.noColourSelected.subscribe(function(ue){ue&&this.focusColourSelect(!0)}.bind(this)),this.data(be),this.selectColourText=this.selectColourText.replace("%{count}",this.data().length),this.colourDropdownVisible=ue.computed(function(){return this.data().length>1}.bind(this)),this.colourLabelVisible=ue.computed(function(){return!this.colourDropdownVisible()}.bind(this)),this.setColourOptionText=function(ue,he){he&&(ve.hasDifferentPrices?ue.text=he.colour+" "+he.price.text:ue.text=he.colour)},this.selectedColourLabel=ue.computed(function(){return this.colour()?this.colour().colour:""}.bind(this)),this.setDefaultColour=function(){1===this.data().length&&this.colour(this.data()[0])},this.setDefaultColour(),this.setVariantColour=function(ue,he){for(var pe=0;pe<ue.length;pe++)if(ue[pe].colourWayId===he){this.colour(ue[pe]);break}},he.state.defaultVariant&&this.setVariantColour(this.data(),he.state.defaultVariant.colourWayId)},template:he}})),define("text!Components/product-size/product-size.html",[],(function(){return'\x3c!-- ko if: render --\x3e\n<section>\n    <div class="colour-size size-component">\n        <div class="size-section" data-bind="visible: sizeSectionVisible()">\n            <div style="display: table; width: 100%">\n                <label\n                    for="sizeSelectorId"\n                    style="display: table-cell; vertical-align: bottom"\n                    data-bind="\n                        text: sizeLabel,\n                        visible: !hideLabels,\n                        disable: isDisabled,\n                        attr: {\n                            \'for\': sizeSelectorId\n                        }"\n                ></label>\n                <div style="display: table-cell; vertical-align: top; width: 100%">\n                    \x3c!-- ko if: isOneSize --\x3e\n                    <span class="product-size" data-bind="visible: sizeLabelVisible(), text: selectedSizeLabel(), css: { disabled: isDisabled }"></span>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !showFitAnalyticsSection() --\x3e\n                    <div data-testid="size-guide" class="size-guide" style="float: right;" data-bind=\'component: { name: "size-guide", params: { sizeGuideOpened: sizeGuideOpened, dictionary: sizeGuideDictionary , url: sizeGuideLink, visible: state.showSizeGuide, id:id}}\'></div>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: showFitAnalyticsSection() --\x3e\n                    <div class="fit-analytics upper" style="line-height: 1.57; letter-spacing: 0.4px;" data-bind="style: { float: fitAnalyticsViewModel.recommendation() === fitAnalyticsViewModel.RecommendationType.None ? \'right\' : \'none\' }">\n                        <div class="table">\n                            <div class="cell" data-bind="click: fitAnalyticsOpen, visible: fitAnalyticsViewModel.recommendation() === fitAnalyticsViewModel.RecommendationType.None">\n                                <div class="circle" style="float: left">\n                                    <span class="no-recommendation"></span>\n                                </div>\n                            </div>\n                            <div class="cell">\n                                \x3c!-- ko if: showFitAssistantTooltip() --\x3e\n                                <div id="fit-assistant-tooltip"></div>\n                                \x3c!-- /ko --\x3e\n                                <button id="fit-upper" class="link" data-bind="click: fitAnalyticsOpen, text: fitAnalyticsLinkText">\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n            \x3c!-- ko if: !isOneSize --\x3e\n            <span class="product-size" data-bind="visible: sizeLabelVisible(), text: selectedSizeLabel(), css: { disabled: isDisabled }"></span>\n            \x3c!-- /ko --\x3e\n            <div class="colour-size-select" data-testid="colour-size-select" data-bind="visible: sizeDropdownVisible(), markAndMeasure: \'pdp:size_selector_interactive\'">\n                <select\n                    id="sizeSelectorId"\n                    data-id="sizeSelect"\n                    data-bind="options: variants,\n                        optionsAfterRender: disableSizeIfOutOfStock,\n                        optionsText: \'Size\',\n                        optionsCaption: selectSizeText,\n                        value: size,\n                        disable: isDisabled || sizeDropdownDisabled(),\n                        css:{ required : noSizeSelected() },\n                        attr: {\n                            \'id\': sizeSelectorId,\n                            \'aria-label\': selectSizeText,\n                            \'aria-describedby\': noSizeSelected() ? \'selectSizeError\' : null,\n                            \'aria-invalid\': noSizeSelected()\n                        }"></select>\n                \x3c!-- ko if: noSizeSelected() --\x3e\n                <span id="selectSizeError" class="error basic-error-box" data-bind="text:selectSizePrompt"></span>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        <div class="grid-row low-in-stock" data-testid="lowInStock" data-bind="visible: isLowInStock() && !hideLowInStock">\n            <span class="clock"></span><span data-bind="text:lowInStockText"></span>\n        </div>\n    </div>\n</section>\n\x3c!-- /ko --\x3e\n'})),define("Models/LocalStorageWrapper",[],(function(){return function(){var ue=window.localStorage;return this.isStorageAvailable=function(){try{var ue=window.localStorage,he="__storage_test__";return ue.setItem(he,he),ue.removeItem(he),!0}catch(ue){return!1}},this.addItem=function(he,pe,me){this.isStorageAvailable()&&ue.setItem(he,JSON.stringify({item:pe,expiry:me}))},this.getItem=function(he){if(this.isStorageAvailable()){var pe=ue.getItem(he);if(pe){var me=JSON.parse(pe);return new Date(me.expiry)<new Date?void ue.removeItem(he):me.item}}},this}})),define("ProductUtils/FacetSizeSelector",["ProductUtils/Window","Models/LocalStorageWrapper"],(function(ue,he){var pe=new he;return{makeSelection:function(he){var me=ue.asos.pdp.config.product.facetGroup;me&&pe.addItem("asos-pdp-lastFacetedProductSizeSelected",{facetGroupId:me.facetGroupId,size:he})},getPreselection:function(he){var me,fe=ue.asos.pdp.config.product.facetGroup,ge=pe.getItem("asos-pdp-lastFacetedProductSizeSelected");if(ge&&fe&&fe.facetGroupId===ge.facetGroupId)return he.forEach((function(ue){ue.size===ge.size&&ue.isInStock&&(me=ue)})),me}}})),define("Components/product-size/product-size",["ko","text!./product-size.html","ProductUtils/Analytics","ProductUtils/Window","ProductUtils/FacetSizeSelector"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){var ge=he.data,ve=he.state,be="undefined"!==he.hideOnOutOfStock&&he.hideOnOutOfStock;this.state=ve,this.render=!(be&&!ve.productData.isInStock),this.noSizeSelected=he.state.showNoSizeSelectedWarning,this.focusSizeSelect=he.state.focusSizeSelect,this.preventFocusScroll=he.state.preventFocusScroll,this.sizeGuideOpened=he.isMixMatch?he.sizeGuideOpened:he.state.sizeGuideOpened,this.sizeGuideDictionary=he.state.resources,this.sizeGuideLink=ge.sizeGuide,this.colour=ve.selectedColour,this.size=ve.selectedSize,this.alwaysDisplaySizeLabel=!1,this.isLowInStock=ue.observable(!1),this.hideLabels=he.hideLabels,this.hideLowInStock=he.hideLowInStock,this.displayOnlyAsDropDown=he.displayOnlyAsDropDown||!1,this.doNotSelectDefaultSize=he.doNotSelectDefaultSize||this.displayOnlyAsDropDown,this.id=ge.id,this.isOneSize=ge.isOneSize;var ye=[];this.size.subscribe(function(){var ue=this.size(),ge=null!=ue&&!0===ue.isLowInStock;ue&&-1===ye.indexOf(ue)&&(pe.fireFlexFulfilmentAnalyticsEvent(ue),ye.push(ue));var ve=he.isMixMatch?he.selectorIndex:null,be={variantId:null,productId:this.id,mixAndMatchProductIndex:ve};ue&&(be={variantId:ue.variantId,productId:ue.productId,mixAndMatchProductIndex:ve,source:ue.source,seller:ue.seller},fe.makeSelection(ue.size)),me.asos.eventBus.emit("sizeChanged",be),this.isLowInStock(ge)}.bind(this)),this.isDesktopMixMatch=he.isMixMatch&&!he.isMobile,this.selectorIndex=he.selectorIndex,this.context=he.context,this.sizeSelectorId=this.context+"-size-select-"+this.selectorIndex,this.variants=ue.computed(function(){return void 0===this.colour()?[]:this.colour().variants}.bind(this)),ve.showSizeGuide||(ve.showSizeGuide=ue.observable(!1)),ve.showSizeGuide(!0===he.showSizeGuide&&ge.sizeGuideVisible),this.selectSizePrompt=ve.resources.pdp_select_colour_size_message,this.sizeLabel=ve.resources.pdp_misc_size+":",this.outOfStockText=ve.resources.pdp_status_out_of_stock,this.notAvailableText=ve.resources.pdp_status_not_available,this.selectSizeText=ve.resources.pdp_select_size_label,this.lowInStockText=ve.resources.pdp_status_low_in_stock;var Se=he.state.productData;this.isDisabled=!he.state.productData.isInStock;for(var we=Se.colours,xe=0,Ie=we.length-1;Ie>=0;Ie--){var Pe=we[Ie];Pe.variants.length>xe&&(xe=Pe.variants.length)}if(this.focusSizeSelect.subscribe(function(ue){var he=document.getElementById(this.sizeSelectorId);ue&&(he.focus({preventScroll:!!this.preventFocusScroll()}),this.preventFocusScroll(!1),this.focusSizeSelect(!1))}.bind(this)),this.noSizeSelected.subscribe(function(ue){this.focusSizeSelect(ue)}.bind(this)),!this.displayOnlyAsDropDown&&!ge.isNoSize&&we.length>1&&1===xe&&(this.alwaysDisplaySizeLabel=!0),this.colour.subscribe(function(ue){void 0===ue||1!==this.colour().variants.length||this.displayOnlyAsDropDown?this.setDefaultSize():this.size(this.colour().variants[0])}.bind(this)),this.sizeDropdownVisible=ue.computed(function(){if(this.alwaysDisplaySizeLabel)return!1;if(this.displayOnlyAsDropDown)return!0;if(ge.isNoSize)return!1;var ue=void 0===this.colour(),he=ue?0:this.colour().variants.length;return ue||he>1}.bind(this)),this.sizeLabelVisible=ue.computed(function(){return!!this.alwaysDisplaySizeLabel||!this.displayOnlyAsDropDown&&!ge.isNoSize&&!this.sizeDropdownVisible()}.bind(this)),this.sizeSectionVisible=ue.computed(function(){return this.sizeLabelVisible()||this.sizeDropdownVisible()}.bind(this)),this.disableSizeIfOutOfStock=function(he,pe){var me;null!=pe&&(me=Se.hasDifferentPrices&&void 0!==pe.price&&void 0!==pe.price.current?" - "+pe.price.current.text:"",pe.isInStock||(me+=" - "+this.outOfStockText),he.text=pe.size+me,ue.applyBindingsToNode(he,{enable:pe.isInStock},pe))}.bind(this),this.sizeDropdownDisabled=ue.computed(function(){return void 0===this.colour()}.bind(this)),this.selectedSizeLabel=ue.computed(function(){return this.alwaysDisplaySizeLabel?we[0].variants[0].size:this.size()?this.size().size:""}.bind(this)),this.setDefaultSize=function(){if(!this.doNotSelectDefaultSize&&void 0!==Se&&void 0!==this.variants()&&1===Se.colours.length){for(var ue,he=Se.colours[0],pe=he.variants.length-1;pe>=0;pe--)if(he.variants[pe].isInStock){if(void 0!==ue){ue=void 0;break}ue=this.variants()[pe]}void 0!==ue&&this.size(ue)}},this.setVariantSize=function(ue,he){for(var pe=0;pe<ue.length;pe++)if(ue[pe].variantId===he){if(!ue[pe].isInStock){this.size(void 0);break}this.size(ue[pe]);break}},he.useFitAnalytics&&he.state.fitAnalyticsViewModel()?this.fitAnalyticsViewModel=he.state.fitAnalyticsViewModel():this.fitAnalyticsViewModel={isLoaded:ue.observable(!1)},this.showFitAnalyticsSection=ue.computed(function(){return!(!this.fitAnalyticsViewModel.isLoaded()||!this.fitAnalyticsViewModel.recommendation)&&void 0!==this.fitAnalyticsViewModel.recommendation()}.bind(this)),this.showFitAssistantTooltip=ue.computed(function(){return!!this.fitAnalyticsViewModel.isLoaded()&&(!this.fitAnalyticsViewModel.recommendation||(void 0===this.fitAnalyticsViewModel.recommendation()||this.fitAnalyticsViewModel.recommendation()===this.fitAnalyticsViewModel.RecommendationType.None))}.bind(this)),this.getFitAnalyticsText=function(){if(this.fitAnalyticsViewModel.recommendation){var ue;switch(this.fitAnalyticsViewModel.recommendation()){case this.fitAnalyticsViewModel.RecommendationType.Partial:ue=ve.resources.pdp_fit_analytics_recommendation_profile_partial;break;case this.fitAnalyticsViewModel.RecommendationType.Complete:ue=ve.resources.pdp_fit_analytics_recommendation_profile_complete;break;case this.fitAnalyticsViewModel.RecommendationType.OOS:ue=ve.resources.pdp_fit_analytics_recommendation_oos;break;default:ue=ve.resources.pdp_fit_analytics_recommendation_profile_none}if(ue)return ue.replace("%{size}",this.fitAnalyticsViewModel.recommendedSize())}},this.fitAnalyticsLinkText=ue.computed(function(){return this.getFitAnalyticsText()}.bind(this)),this.fitAnalyticsOpen=function(ue,he){this.fitAnalyticsViewModel.openRecommendations&&this.fitAnalyticsViewModel.openRecommendations(ue,he)}.bind(this),this.setDefaultSize(),he.state.defaultVariant)this.setVariantSize(this.variants(),he.state.defaultVariant.variantId);else{var _e=fe.getPreselection(this.variants());_e&&this.size(_e)}},template:he}})),define("text!Components/shipping-restrictions/shipping-restrictions.html",[],(function(){return'<button id="shipping-restrictions-link-ko" class="link shipping-restrictions" data-bind="visible: showShippingRestrictions, click: openShippingRestrictions">\n    <span class="shipping-restrictions-text" data-bind="text: shippingRestrictionsLabel"></span>\n</button>'})),define("Components/shipping-restrictions/shipping-restrictions",["ko","Promise","text!./shipping-restrictions.html","ProductUtils/Analytics","ProductUtils/Window"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){var pe=fe.document.getElementById("shipping-restrictions-link-ko"),me=he.data.shippingRestrictions;this.showShippingRestrictions=ue.computed(function(){return he.state.productData.isInStock&&me.shippingRestrictionsVisible}.bind(this)),this.shippingRestrictionsLabel=me.shippingRestrictionsLabel,this.openShippingRestrictions=function(){fe.asos.eventBus.emit("shippingRestrictionsOpen",pe)}},template:pe}})),define("text!Components/stock-price-retry/stock-price-retry.html",[],(function(){return'\x3c!-- ko if : state.showStockPriceRetry --\x3e\n<div class="container">\n    <h1 data-bind="text: resources.pdp_status_error_stock_price_retry_title"></h1>\n    <div data-bind="text: resources.pdp_status_error_stock_price_retry_message"></div>\n\n    <a>\n        <span data-bind="click: retry, text: resources.pdp_status_error_stock_price_retry_button"></span>\n    </a>\n</div>\n\n\x3c!-- /ko --\x3e'})),define("Components/stock-price-retry/stock-price-retry",["ko","text!./stock-price-retry.html"],(function(ue,he){return{viewModel:function i(ue){this.resources=ue.state.resources,this.retry=function(){ue.state.retryCallback()}},template:he}})),define("text!Components/add-item/add-item.html",[],(function(){return'<div class="add-item" data-bind="visible: isVisible">\n    <div class="is-add-item-saving" data-bind="visible: isBusy"></div>\n    <span class="aria-live" role="status" aria-live="polite" data-bind="{ text: ariaLiveText }"></span>\n    <button data-bind="click: addToBag, css : buttonCss, attr: { \'id\': isMixMatch ? null : \'product-add-button\', \'aria-label\': resources.pdp_cta_add_to_bag, disabled: isBusy }, markAndMeasure: \'pdp:add_to_bag_interactive\'" data-testid="add-button">\n        <span class="product-tick" data-bind="visible: showProductTick"></span>\n        <span data-bind="text: buttonText"></span>\n    </button>\n</div>\n'})),define("ProductUtils/Bag",["ProductUtils/Analytics","ProductUtils/NewRelicLogger","Providers/SdkProvider"],(function(ue,he,pe){return function(me,fe){function r(ue,he){for(var pe in he)he.hasOwnProperty(pe)&&(ue[pe]=he[pe]);return ue}function o(ue){return{productId:ue.productId,colour:ue.colourName,sizeId:ue.sizeId,variantId:ue.variantId,price:ue.price.current.value,priceObj:ue.price,sellingFast:me.state.sellingFast,ratings:!!ue.ratings,sizeGuideOpened:me.state.sizeGuideOpened,brandName:ue.brandName,source:ue.source,seller:ue.seller,sku:ue.sku}}return this.error="",void 0!==me&&(this.error=me.state.resources.pdp_status_error_max_items),this.addItems=function(ue,he){pe.getBag().then(function(pe){var me;if(ue.length>1){var ge=this.formatAddProducts(ue);me=pe.addVariants(ge),this.watchPromise(me,he,ge,fe)}else{var ve=void 0!==ue[0]?ue[0]:ue;ve.colourName=void 0===ve.colourName?ve.colour:ve.colourName;var be=o(ve);me=pe.addVariant(be),this.watchPromise(me,he,be,fe)}}.bind(this))},this.formatErrorMessage=function(ue){var he=ue.userMessage||"";return ue.hasOwnProperty("messageContext")&&ue.messageContext&&ue.messageContext.length>0&&(he=he.replace(/{(\d)}/g,(function(he,pe){var me=ue.messageContext[parseInt(pe,10)];return me||"..."}))),he},this.watchPromise=function(pe,fe,ge,ve){pe.then((function(){return ue.addVariants(ge,!1,ve,me.state.fitAnalyticsContext,me.state.ratings,me.state.saveCount),fe({success:!0,error:""})}),function(pe){pe=ue.normalizeError(pe,me.state.resources.pdp_status_add_to_bag_failure),ue.addVariants(ge,pe,ve,me.state.fitAnalyticsContext,me.state.ratings,me.state.saveCount);var be,ye={action:"AddToBag"};ye=r(ye,ge),ye=r(ye,pe),ye=r(ye,pe.message[0]),he.logError(new Error(he.ERROR_TYPE.UserActionFailed),ye),be="LegacyQuantityLimitReached"===pe.message[0].errorCode?this.error:this.formatErrorMessage(pe.message[0]),fe({success:!1,error:be})}.bind(this))},this.formatAddProducts=function(ue){for(var he=[],pe=0;pe<ue.length;pe++){var me=o(ue[pe]);me.colourName=void 0===me.colourName?me.colour:me.colourName,he.push(me)}return he},this}})),define("ProductUtils/ScrollTo",["$","ko"],(function(ue,he){return this.scrollToElement=function(he,pe){var me=ue(he);me.length>0&&ue("html, body").animate({scrollTop:me.offset().top+pe+"px"},"fast")},this.scrollToTop=function(){ue("html, body").animate({scrollTop:"0px"},"fast")},he.bindingHandlers.scrollTo={init:function(pe,me){var fe=me(),ge=he.unwrap(fe),ve=ge,be=0;"object"==typeof ge&&(ve=ge.selector,ge.topPadding&&(be=ge.topPadding)),ue(pe).click(function(){this.scrollToElement(ve,be)}.bind(this))}},he.bindingHandlers.scrollToTop={init:function(he){ue(he).click(function(){this.scrollToTop()}.bind(this))}},this})),define("Components/add-item/add-item",["$","ko","text!./add-item.html","ProductUtils/Bag","ProductUtils/ScrollTo","ProductUtils/Window","PageConfig"],(function(ue,he,pe,me,fe,ge,ve){return{viewModel:function a(ue){this.isVisible=ue.state.productData.isInStock,this.imgUrl=ue.productImage,this.scrollToTop=ue.scrollToTop,this.url=ue.url,this.productId=ue.state.productData.productId,this.isMixMatch=ue.isMixMatch,this.resources=ue.state.resources,this.selectedColour=ue.state.selectedColour,this.selectedSize=ue.state.selectedSize,this.noColourSelected=ue.state.showNoColourSelectedWarning,this.noSizeSelected=ue.state.showNoSizeSelectedWarning,this.focusColourSelect=ue.state.focusColourSelect,this.focusSizeSelect=ue.state.focusSizeSelect,this.preventFocusScroll=ue.state.preventFocusScroll,this.addedToBag=he.observable(!1),this.showProductTick=he.observable(!1),this.failedToAdd=ue.state.showAddToBagError,this.failedToAddMessage=ue.state.addToBagErrorMessage,this.showTryAgain=he.observable(!!ue.showTryAgain&&ue.showTryAgain),this.buttonText=he.observable(this.resources.pdp_cta_add_to_bag),this.isBusy=he.observable(!1),this.ariaLiveText=he.computed((function(){var ue=this.failedToAddMessage();return ue||(this.addedToBag()?this.resources.pdp_status_add_to_bag_success:"")}),this),this.buttonCss=he.computed(function(){return this.failedToAdd()&&this.showTryAgain()?"failed":""}.bind(this)),this.selectedSize.subscribe(function(ue){this.failedToAdd(!1),void 0!==ue&&this.noSizeSelected()&&this.noSizeSelected(!1)}.bind(this)),this.selectedColour.subscribe(function(ue){this.failedToAdd(!1),void 0!==ue&&this.noColourSelected()&&this.noColourSelected(!1)}.bind(this));var pe,be=new me(ue,ue.initiator);this.isValid=function(){return void 0===this.selectedColour()?(this.noColourSelected(!0),!1):void 0!==this.selectedSize()||(this.noSizeSelected(!0),!1)}.bind(this),this.addToBag=function(){this.isBusy()||(this.revertState(),this.isValid()&&(this.isBusy(!0),be.addItems(this.selectedSize(),this.addToBagResult)))},this.focusUnSelected=function(){void 0===this.selectedColour()?this.focusColourSelect(!0):void 0===this.selectedSize()&&this.focusSizeSelect(!0)}.bind(this),this.stickyATBClickedCallback=function(ue){this.preventFocusScroll(!0),"selectButton"===ue?this.focusUnSelected():this.isValid()}.bind(this),ge.asos.eventBus.addListener("stickyATBClicked",this.stickyATBClickedCallback),this.addToBagResult=function(ue){this.isBusy(!1),ue.success?(this.addedToBag(!0),this.showProductTick(!0),this.buttonText(this.resources.pdp_status_add_to_bag_success),this.scrollToTop&&"mobile"!==ve.platform&&fe.scrollToTop(),pe&&clearTimeout(pe),pe=setTimeout(this.revertState,5e3)):(this.showTryAgain()&&this.buttonText(this.resources.pdp_status_error_add_item_try_again),this.failedToAdd(!0),this.failedToAddMessage(ue.error||this.resources.pdp_status_add_to_bag_failure))}.bind(this),this.revertState=function(){this.buttonText(this.resources.pdp_cta_add_to_bag),this.addedToBag(!1),this.showProductTick(!1),this.failedToAdd(!1),this.failedToAddMessage(""),this.isBusy(!1)}.bind(this)},template:pe}})),define("text!Components/fit-analytics/fit-analytics.html",[],(function(){return'<div\n  id="product-size"\n  data-bind=\'component:{\n    name: "product-size",\n    params: {\n        hideLabels: false,\n        hideLowInStock: false,\n        showSizeGuide: true,\n        state: state,\n        data: product,\n        useFitAnalytics: true,\n        hideOnOutOfStock : true,\n        context: "main",\n        selectorIndex: 0}\n    }\'\n></div>\n<div class="aside-action">\n  <div\n    id="product-add"\n    data-bind=\'component:{name: "add-item",\n    params:{\n        productId: product.id,\n        productImage : product.images[0].url,\n        scrollToTop: true,\n        state: state,\n        initiator : "main"\n    }}\'\n  ></div>\n  \x3c!-- ko if : isInStock --\x3e\n  <div data-bind="{attr: {id: \'save-for-later-portal-\' + product.id}, markAndMeasure: \'pdp:save_for_later_interactive\' }" class="save-for-later-portal"></div>\n  \x3c!-- /ko --\x3e\n  <div\n    class="add-item-error error-message"\n    data-bind="visible: state.showAddToBagError, html: state.addToBagErrorMessage"\n    style="display: none"\n  ></div>\n</div>\n<div\n  id="delivery-and-returns-portal"\n  data-bind="template: { afterRender: function() { window.asos.pdp.deliveryAndReturnsPortalReady = true; window.asos.eventBus.emit(\'deliveryAndReturnsPortalReady\'); } }"\n></div>\n'})),define("Components/fit-analytics/fit-analytics",["ko","ProductUtils/ComponentLoader","text!./fit-analytics.html","$","PageConfig","ProductUtils/Window","ProductUtils/Analytics","Providers/SdkProvider","Providers/FeaturesProvider","ProductUtils/NewRelicLogger"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se){return{viewModel:function d(pe){function d(){return this.resources.pdp_fit_analytics_sizing_help_intro}function u(ue){return ue&&ue.split("%{splitPoint}")[0]}function h(ue){return ue&&ue.split("%{splitPoint}")[1].split("%{link}")[0]}function p(ue){return ue&&ue.split("%{link}")[1].split("%{linkEnd}")[0]}function m(ue){return ue&&ue.split("%{linkEnd}")[1]}function f(){switch(fe.storeCode){case"COM":return"GB";case"ROW":return"ASOS_ROW";case"ROE":return"ASOS_ROE";default:return fe.storeCode}}var we=this;this.enabled=!1,this.visible=ue.observable(!1),this.viewData=pe.data,this.state=pe.state,this.product=pe.data,this.widget=void 0,this.resources=pe.state.resources,this.isRecognised=ue.observable(!1),this.fitAssistantLogFeatureValue=ue.observable(0),this.widgetCloseTarget=null,this.isInStock=this.viewData.isInStock,this.components=new he,this.features=pe.state.features,this.state.fitAnalyticsViewModel(this);var xe=[],Ie=!1;this.analyticsContext={analyticsLoadEventFired:!1,hasPreviousPurchases:!1,bodyPart:void 0},this.RecommendationType={None:1,Partial:2,Complete:3,OOS:4},this.recommendation=ue.observable(void 0),this.recommendedSize=ue.observable(),this.recommendedDisplaySize=ue.observable(),this.recommendationText=ue.observable(),this.userInfoLevel=ue.observable(),this.displayLinkText=ue.computed((function(){return-1!==[this.RecommendationType.None,this.RecommendationType.Complete,this.RecommendationType.Partial,this.RecommendationType.OOS].indexOf(this.recommendation())}),this),this.recommendedSize.subscribe(function(ue){this.recommendedDisplaySize(this.trimRecommendationSize(ue))}.bind(this)),this.init=function(){var ue=this.isMobileDevice(fe.platform);this.isEnabled(this.viewData.isInStock,ue,fe.storeCode,this.features)&&(be.getIdentity().then(function(he){he.customer.customerId().then(function(pe){he.customer.isRecognised().then(function(he){this.isRecognised(he);var me=this.createFitData(this.viewData,pe,this.state,ue);this.createWidget(me)}.bind(this))}.bind(this))}.bind(this)),ye.onReady().then(function(){var ue=ye.getFeature("pdp-fit-assistant-logging");if(ue.isEnabled()){var he=ue.getVariables();he.probability&&this.fitAssistantLogFeatureValue(he.probability)}}.bind(this)))},this.createFitData=function(ue,he,pe,me){return he||(he=""),{productId:"asos-"+ue.productCode,thumbnail:pe.mainImage().url,userId:he,showMobile:me,prefetch:!0,shopCountry:f(),language:fe.languageShort,shopSizingSystem:fe.sizeSchema,manufacturedSizes:this.getSizes(ue.variants)}},this.isMobileDevice=function(ue){return"mobile"===ue},this.isEnabled=function(ue,he,pe,me){return!(!ue||!this._hasMoreThanOneSize())&&(he?me.fitAnalyticsEnabledStoresMobile.indexOf(pe.toLowerCase())>-1:me.fitAnalyticsEnabledStores.indexOf(pe.toLowerCase())>-1)},this.getSizes=function(ue){for(var he={},pe=0;pe<ue.length;pe++){he[this.formatSizes(ue[pe].size)]=ue[pe].isInStock}return he},this._hasMoreThanOneSize=function(){return!this.product.isNoSize&&!this.product.isOneSize}.bind(this),this.formatSizes=function(ue){return ue.split("-")[0].replace(/\s+$/,"")};var y=function(){var ue={recommendationType:we.recommendation(),hasPreviousPurchaseData:we.analyticsContext.hasPreviousPurchases,userSignedIn:we.isRecognised(),recommendedSize:we.recommendedSize()};return we.analyticsContext.bodyPart&&(ue.bodyCategory=we.analyticsContext.bodyPart),pe.state.fitAnalyticsContext=ue,ue};this.fireAnalyticsLoadEvent=function(){if(this.visible()&&!this.analyticsContext.analyticsLoadEventFired){var ue=y();ve.fireFitAnalyticsLoadEvent(ue),this.analyticsContext.analyticsLoadEventFired=!0}},this.fireAnalyticsOutOfScaleEvent=function(){var ue=y();ve.fireFitAnalyticsOutOfScaleEvent(ue)},this.trimRecommendationSize=function(ue){return ue?ue.replace(/(in|cm|UK|EU|Chest)/g,"").split("-")[0].trim():ue},this.onRecommendationReceived=function(ue,he){if(this.visible(!0),he&&void 0!==he.hasPastPurchases&&(this.analyticsContext.hasPreviousPurchases=he.hasPastPurchases),this.recommendation(this.RecommendationType.None),this.recommendedSize(void 0),this.recommendationText(this.resources.pdp_fit_analytics_recommendation_profile_none),"new user"!==ue){if(he){if(this.userInfoLevel(he.userInfoLevel),he.outOfScale)return void this.fireAnalyticsOutOfScaleEvent();if(ue&&this.recommendedSize(ue),he.outOfStock)return this.recommendationText(this.resources.pdp_fit_analytics_recommendation_oos.replace("%{size}",ue)),this.recommendation(this.RecommendationType.OOS),void this.fireAnalyticsLoadEvent(y());1===he.userInfoLevel?(this.recommendationText(this.resources.pdp_fit_analytics_recommendation_profile_partial.replace("%{size}",ue)),this.recommendation(this.RecommendationType.Partial)):2===he.userInfoLevel&&(this.recommendationText(this.resources.pdp_fit_analytics_recommendation_profile_complete.replace("%{size}",ue)),this.recommendation(this.RecommendationType.Complete)),this.lastRecommendationDetails=he,this.fireAnalyticsLoadEvent(y())}}else this.fireAnalyticsLoadEvent(y())},this.onLoadReceived=function(ue){ue&&ue.garment&&(this.analyticsContext.bodyPart=ue.garment.category),this.isLoaded(!0),this.fireAnalyticsLoadEvent(y()),this.components.register({type:"size-helper",name:"size-helper",elementId:"size-helper",useComponentTemplate:!0},this)},this.openRecommendations=function(ue,he){if(we.widget){we.widget.open(),we.widgetCloseTarget=he.currentTarget;var pe=y();ve.fireFitAnalyticsOpenWidgetEvent(pe)}},this.onWidgetOpened=function(){Ie=!0},this.onWidgetClosed=function(){var ue=y();ue.widgetScreenEvents=xe.slice(0),ve.fireFitAnalyticsCloseWidgetEvent(ue),Ie=!1,xe.length=0},this.onMetricEventReceived=function(ue,he){Ie&&xe.push({event:ue,value:he})},this.isLoaded=ue.observable(!1),this.executeByProbability=function(ue,he){he>=Math.round(100*Math.random())&&ue()},this.manageFocus=function(){we.widgetCloseTarget&&we.lowerLinkText()?we.widgetCloseTarget.focus():ge.document.getElementById("fit-upper").focus()},this.createWidget=function(ue){ge._fitAnalytics=function(){we.widget=new ge.FitAnalyticsWidget({productId:ue.productId,thumb:ue.thumbnail,manufacturedSizes:ue.manufacturedSizes,userId:ue.userId,language:ue.language,showMobile:ue.showMobile,shopCountry:ue.shopCountry,shopSizingSystem:ue.shopSizingSystem,prefetch:ue.prefetch,close:function(ue,he,pe){we.onRecommendationReceived(he,pe),we.onWidgetClosed(),we.manageFocus()},open:function(){we.onWidgetOpened()},metricEvent:function(ue,he,pe){we.onMetricEventReceived(ue,he,pe)},error:function(ue,he){he&&"product_not_published"!==he.code&&"product_not_found"!==he.code&&we.executeByProbability((function(){var pe=new Error(Se.ERROR_TYPE.FitAssistantError);Se.logError(pe,{productSerial:ue,errorCode:he.code,errorMessage:he.message})}),we.fitAssistantLogFeatureValue())},recommend:function(ue,he,pe){we.onRecommendationReceived(he,pe)},load:function(ue,he){we.onLoadReceived(he),we.widget.getRecommendation(),me("#existing-size-chart").hide()}})};var he=document.createElement("script");he.id="fitAnalyticsScript",he.src="https://widget.fitanalytics.com/widget.js",he.crossOrigin="anonymous",document.body.appendChild(he)},this.showLowerSection=ue.computed(function(){return!!this.isLoaded()&&(2!==this.userInfoLevel()||this.state.showSizeGuide())}.bind(this)),this.getLowerText=function(ue){if(this.recommendation()===this.RecommendationType.None)return ue(this.resources.pdp_fit_analytics_sizing_help_profile_none);switch(this.userInfoLevel()){case 1:return ue(this.resources.pdp_fit_analytics_sizing_help_profile_partial);case 2:return ue(this.resources.pdp_fit_analytics_sizing_help_profile_complete);default:return ue(this.resources.pdp_fit_analytics_sizing_help_profile_none)}},this.lowerHeader=this.resources.pdp_fit_analytics_sizing_help_title,this.lowerPreLinkText=ue.computed(function(){return d.call(this)}.bind(this)),this.lowerPostLinkText=ue.computed(function(){return this.state.showSizeGuide()?this.getLowerText(h):void 0}.bind(this)),this.lowerPostSizeGuideText=ue.computed(function(){var ue=this.getLowerText(m);if(ue&&!(ue.length<=1))return ue}.bind(this)),this.lowerLinkText=ue.computed(function(){var ue=this.getLowerText(u);if(this.lowerPostLinkText())return ue;var he=this.getLowerText(m);return!he||he.length>1?ue:ue+he}.bind(this)),this.sizeGuideDictionary={pdp_size_guide_link:ue.computed(function(){if(this.state.showSizeGuide()){var ue=this.getLowerText(p),he=this.getLowerText(m);return!he||he.length>1?ue:ue+he}}.bind(this)),pdp_misc_close:this.resources.pdp_misc_close,pdp_size_guide_aria_label:this.resources.pdp_size_guide_aria_label},this.handleConsentChanged=function(ue){-1!==ue.indexOf(ge.asos.pdp.config.oneTrustConsentIds.customerPreferences)&&this.init()}.bind(this),ge.asos.eventBus.addListener("onetrust.consentChanged",this.handleConsentChanged)},template:pe}})),define("ProductUtils/EnhanceNewRelicPageView",["PageConfig","ProductUtils/Window"],(function(ue,he){return function(){"object"==typeof he.NREUM&&"function"==typeof he.NREUM.setCustomAttribute&&(he.NREUM.setCustomAttribute("version",ue.version),he.NREUM.setCustomAttribute("storeId",ue.storeCode),he.NREUM.setCustomAttribute("platform",ue.platform),he.NREUM.setCustomAttribute("keyStoreDataversion",ue.keyStoreDataversion),he.NREUM.setCustomAttribute("browseCountry",ue.countryCode),he.NREUM.setCustomAttribute("browseCurrency",ue.currency),he.NREUM.setCustomAttribute("browseLanguage",ue.language),he.NREUM.setCustomAttribute("browseSizeSchema",ue.sizeSchema),he.NREUM.setCustomAttribute("siteChromeTemplateVersion",ue.siteChromeTemplateVersion),he.NREUM.setCustomAttribute("siteChromeTemplateBuild",ue.siteChromeTemplateBuild),he.NREUM.setCustomAttribute("userAgent",he.navigator.userAgent))}})),define("text!Components/ingredients-button/ingredients-button.html",[],(function(){return'\x3c!-- ko if: showIngredientsButton --\x3e\n<button class="ingredients-button" data-bind="click:openIngredientsModal">\n  <span class="product-ingredients-icon"></span>\n  <span\n    data-bind="text: state.resources.pdp_description_ingredients_title"\n  ></span>\n</button>\n\x3c!-- /ko --\x3e\n'})),define("Components/ingredients-button/ingredients-button",["ko","text!./ingredients-button.html","ProductUtils/Window","ProductUtils/Analytics"],(function(ue,he,pe,me){return{viewModel:function s(he){this.state=he.state,this.product=he.data,this.showIngredientsButton=ue.observable(!1),this.openIngredientsModal=function(ue,he){me.firePageInteraction({context:"ingredientsButtonClick",productIID:this.product.id}),pe.asos.eventBus.emit("ingredientsModalOpen",he.target)},this.showIngredientsButton(!pe.isMobile&&this.product.isInStock&&this.state.hasVariantsWithIngredients)},template:he}})),define("text!Components/size-helper/size-helper.html",[],(function(){return'\x3c!-- ko if: data.showLowerSection --\x3e\n<div class="fit-analytics lower">\n  <div class="size-guide-wrapper">\n    <h2 data-bind="text: data.lowerHeader"></h2>\n    <span data-bind="text: data.lowerPreLinkText"></span>\n    \x3c!-- ko if : data.lowerLinkText --\x3e\n    <button\n      class="link fit-lower"\n      data-bind="click: data.openRecommendations, text: data.lowerLinkText"\n    ></button>\n    \x3c!-- /ko --\x3e\n    <span data-bind="text: data.lowerPostLinkText"></span>\n    <div\n      class="fit-analytics-size-guide size-guide"\n      data-bind=\'component: { name: "size-guide", params: { sizeGuideOpened: state.sizeGuideOpened, dictionary: data.sizeGuideDictionary , url: data.product.sizeGuide, visible: state.showSizeGuide, id: data.product.id}}\'\n    ></div>\n    <span data-bind="text: data.lowerPostSizeGuideText"></span>\n  </div>\n</div>\n\x3c!-- /ko --\x3e\n'})),define("Components/size-helper/size-helper",["ko","text!./size-helper.html"],(function(ue,he){return{viewModel:function i(ue){this.data=ue.data,this.state=ue.data.state},template:he}})),define("ProductUtils/OnElementInView",["$","ko"],(function(ue,he){return this.currentlyInView=null,this.target=null,this.sourceElement=null,this.callback=null,this.timer=null,this.cumulativeOffset=function(ue){var he=0,pe=0;do{he+=ue.offsetTop||0,pe+=ue.offsetLeft||0,ue=ue.offsetParent}while(ue);return{top:he,left:pe}},this.checkScrollPosition=function(){var he=!1,pe=ue(this.sourceElement).outerHeight()+this.target.outerHeight()/2,me=window.innerHeight,fe=this.cumulativeOffset(this.target[0]).top+pe;(document.body.scrollTop+me>fe||document.documentElement.scrollTop+me>fe)&&(he=!0),(null===this.currentlyInView||he!==this.currentlyInView)&&(this.currentlyInView=he,this.callback({isInView:he}))},this.onScroll=function(){this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.checkScrollPosition.bind(this),100)},he.bindingHandlers.onElementInView={update:function(pe,me){var fe=me(),ge=he.unwrap(fe);this.target=ue(ge.targetSelector),this.sourceElement=pe,this.callback=ge.callback,ge.enabled?(this.checkScrollPosition(),window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onScroll,!1)):(window.removeEventListener("scroll",this.onScroll,!1),window.removeEventListener("resize",this.onScroll,!1))}},this})),define("ProductUtils/Performance",["ko"],(function(ue){ue.bindingHandlers.markAndMeasure={init:function(he,pe){var me=ue.unwrap(pe());window.asos.performance.markAndMeasure(me)}}})),define("Pages/FullProduct",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","ProductUtils/FeatureTracking","Models/VariantDecorator","Utils","Components/product-image/product-image","Components/product-price/product-price","Components/social-share/social-share","Components/content/content","Components/size-guide/size-guide","Components/product-gallery/product-gallery","Components/product-colour/product-colour","Components/product-size/product-size","Components/shipping-restrictions/shipping-restrictions","Components/stock-price-retry/stock-price-retry","Components/add-item/add-item","ProductUtils/UrlUtils","Components/fit-analytics/fit-analytics","PageConfig","ProductUtils/NewRelicLogger","ProductUtils/EnhanceNewRelicPageView","Providers/SdkProvider","ProductUtils/MergeJson","Components/ingredients-button/ingredients-button","Components/size-helper/size-helper","Components/product-gallery/product-gallery","ProductUtils/ScrollTo","ProductUtils/OnElementInView","ProductUtils/Performance"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se,we,xe,Ie,Pe,_e,Te,ze,Ce,Ee,ke,Ae,Ve,Me,Re,Le){return this.init=function(we){function P(){function t(){he.forEach((function(ue){ue.style.display="none"}))}function n(ue){var he=ue?"pg-in-stock":"pg-out-of-stock",pe=document.querySelectorAll(".asos-product");Array.prototype.forEach.call(pe,(function(ue){ue.classList.add(he)}))}function s(){t(),He.showStockPriceRetry(!1),n(!1),He.productData={isInStock:!1},Ne.register({type:"content",name:"aside-content-oos",elementId:"aside-content-oos",useComponentTemplate:!1},Ue,this.state)}if(!qe){var he=[document.getElementById("size-select-skeleton"),document.getElementById("add-to-bag-skeleton"),document.getElementById("save-for-later-skeleton")];if(Ue.isDeadProduct)s();else{var me=function b(ue){return Be.getStockPrice(Ue,function(ue){n(ue.isInStock),He.productData=(new ge).getData(ue,!Ue.isNoSize),Ne.register({type:"content",name:"asideBelowPrice",elementId:"aside-below-price",useComponentTemplate:!1},ue,He),Ne.register({type:"ingredients-button",name:"ingredients-button",elementId:"ingredients-button",useComponentTemplate:!0},ue,He),Me(),He.showStockPriceRetry(!1)}.bind(this),(function(ue){Ve.logError(new Error(Ve.ERROR_TYPE.AjaxError),{action:"getStockPrice",message:ue}),t(),404!==ue.status||Ue.price&&Ue.price.currency?He.showStockPriceRetry(!0):s()}),ue),b}();this.state.retryCallback=me.bind(this,!0)}Ne.register({type:"content",name:"aside-content-retry",elementId:"aside-content-retry",useComponentTemplate:!1},Ue,this.state),Ne.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},Ue,this.state),ue.components.register("product-gallery",Ie),ue.components.register("size-guide",xe),ue.components.register("product-image",be),ue.components.register("shipping-restrictions",Te),ue.components.register("product-price",ye),ue.components.register("social-share",Se),ue.components.register("stock-price-retry",ze),ue.components.register("product-colour",Pe),ue.components.register("product-size",_e),ue.components.register("asos-video-player-prod",pe.videoPlayer),ue.components.register("asos-spin-viewer-prod",pe.spinViewer),ue.components.register("add-item",Ce),ue.components.register("fit-analytics",ke),qe=!0}}Ve.init(Ve.PAGE_TYPE.PRD),fe.onPageLoadStart();var Re=window.asos.pdp.config.product,Fe=window.asos.pdp.config.translations,De=window.asos.pdp.config.ratings,Oe=window.asos.pdp.config.product.saveCount,Ue="string"==typeof Re?JSON.parse(Re):Re,Be=new me,Ne=new he,We=ve.QueryString.getValue("colourWayId")&&parseInt(decodeURIComponent(ve.QueryString.getValue("colourWayId")).trim(),10);this.isMobile="mobile"===Ae.platform,Ue||Ve.logError(new Error(Ve.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"});var Ge=(new Ee).getVariantFromUrl(window.location.href,Ue.variants);if(!Ge&&We&&Re.totalNumberOfColours>1&&(Re.isOneSize||Re.isNoSize))for(var $e=0;$e<Ue.variants.length;$e++)if(Ue.variants[$e].colourWayId===We){Ge=Ue.variants[$e];break}this.state={selectedColour:ue.observable(),selectedSize:ue.observable(),showNoColourSelectedWarning:ue.observable(!1),showNoSizeSelectedWarning:ue.observable(!1),focusColourSelect:ue.observable(!1),focusSizeSelect:ue.observable(!1),preventFocusScroll:ue.observable(!1),showAddToBagError:ue.observable(!1),addToBagErrorMessage:ue.observable(""),resources:Fe,features:Le(we,window.asos.pdp.config.features),gender:Ue.gender,isInStock:ue.observable(!0),showStockPriceRetry:ue.observable(!1),defaultVariant:Ge,showSizeGuide:ue.observable(!1),fitAnalyticsViewModel:ue.observable(),sellingFast:Ue.sellingFast,ratings:De,saveCount:Oe,sizeGuideOpened:ue.observable(!1),hasVariantsWithIngredients:Ue.hasVariantsWithIngredients};var qe=!1,He=this.state;document.addEventListener("DOMContentLoaded",function(){P.call(this)}.bind(this)),document.getElementById("aside-below-price")&&document.getElementById("gallery-content")&&P.call(this)},this.init})),define("text!Components/mix-and-match/mix-and-match.html",[],(function(){return'<div class="product-hero">\n  \x3c!-- ko if: shouldShowProp65 --\x3e\n  <div class="warning-prop65">\n    <div class="iconContainer">\n      <span class="product-warning-prop65 icon"></span>\n    </div>\n    <p data-bind="text: state.resources.prop65_mandm_message_text"></p>\n  </div>\n  \x3c!-- /ko --\x3e\n\n  <div class="separator"></div>\n</div>\n\n<ul>\n  \x3c!-- ko foreach: products --\x3e\n  <li class="item">\n    <a data-bind="attr: { \n          href: $parent.getProductLink($data), \n          \'aria-label\': $parent.productDetailsText \n    }, \n    click: $parent.navigateToFullProduct.bind($data, $index()), $element)\n    ">\n      <div class="product-image" data-bind="component: {\n        name: \'product-image\', \n        params: {\n          imgUrl: productImage.url,\n          type: \'thumbnail\',\n          size: 75\n        }\n      }">\n      </div>\n    </a>\n    <div class="product-info">\n      \x3c!--Product title--\x3e\n      <a\n        data-bind="attr: { href: $parent.getProductLink($data) }, click: $parent.navigateToFullProduct.bind($data, $index())">\n        <div class="product-title" data-bind="text: name"></div>\n        <div class="product-price"\n          data-bind=\'component: { name: "product-price", params: {state: $parent.getState($index()), showGermanVatMessage: $parent.options.showGermanVatMessage }}\'>\n        </div>\n        <div class="mm-rating" data-bind="attr: {id: \'overall-rating-portal-\' + $data.id}"></div>\n      </a>\n      <div data-bind="attr: {id: \'payment-promo-portal-\' + $data.id}"></div>\n      \x3c!-- ko if: $parent.variantIsOOS($index()) --\x3e\n      <span class="out-of-stock" data-bind="text: $parent.state.resources.pdp_status_mix_and_match_out_of_stock"></span>\n      \x3c!-- /ko --\x3e\n      \x3c!-- ko if: !$parent.variantIsOOS($index()) --\x3e\n      <div class="product-colour" data-bind=\'component:{\n        name: "product-colour",\n        params: {\n            isMixAndMatch: true,\n            useShortSelectColourLabel: true,state: $parent.getState($index()),\n            data: $data}\n        }\'></div>\n      \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- ko if: $parent.variantIsOOS($index()) --\x3e\n    <div class="save-for-later-portal oos" data-bind="attr: {id: \'save-for-later-portal-\' + $data.id}"></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: !$parent.variantIsOOS($index()) --\x3e\n    <div data-bind=\'component:{\n      name: "product-size",\n      params: {\n          hideLabels: false,\n          hideLowInStock: false,\n          hideOnOutOfStock: true,\n          showSizeGuide: true,\n          isMixMatch: true,\n          isMobile: $parent.isMobile,\n          doNotSelectDefaultSize: !$parent.isMobile,\n          displayOnlyAsDropDown: !$parent.isMobile,\n          state: $parent.getState($index()),\n          data: $data,\n          context: "mixmatch",\n          selectorIndex: $index(),\n          sizeGuideOpened: $parent.state.sizeGuideOpened\n          }\n      }\'>\n    </div>\n\n    <div data-bind=\'component:{name: "add-item",\n      params:{\n          state: $parent.getState($index()),\n          initiator : "main",\n          isMixMatch: true,\n      }}\'></div>\n    <div class="save-for-later-portal" data-bind="attr: {id: \'save-for-later-portal-\' + $data.id}"></div>\n    \n    <div class="basic-error-box"\n      data-bind="visible: $parent.getState($index()).showAddToBagError, html: $parent.getState($index()).addToBagErrorMessage"\n      style="display: none"></div>\n\n    <div data-bind="attr: {id: \'delivery-and-returns-portal-\' + ($index())}, template: { afterRender: function() {\n        if($index() === $parent.products.length - 1) {\n            window.asos.pdp.deliveryAndReturnsPortalReady = true; window.asos.eventBus.emit(\'deliveryAndReturnsPortalReady\');\n        } \n      }}">\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: ($index() !== $parent.products.length - 1)--\x3e\n    <div class="separator"></div>\n    \x3c!-- /ko --\x3e\n  </li>\n  \x3c!-- /ko --\x3e\n</ul>'})),define("ProductUtils/Cookies",["Utils"],(function(ue){return function(){this.getXSiteOrigin=function(){var he=ue.Cookies.readCookie("x-site-origin",!0);return he||null}}})),define("ProductUtils/Ajax",["$","uuid","ProductUtils/Cookies","ProductUtils/NewRelicLogger","ProductUtils/UrlUtils"],(function(ue,he,pe,me,fe){return function(){this.execute=function(he){var ge,ve,be="ProductPage",ye=new pe,Se=new fe;he.callerContext?be+="."+he.callerContext:be=!1,ve=void 0!==he.retryCount?he.retryCount:null,ge=void 0!==he.authorization?he.authorization:null,void 0===he.cache&&(he.cache=!0);var we=function r(ue,he){if(!he)return ue;var pe="";return Object.keys(he).sort().forEach((function(me){var fe=he[me];null!=fe&&(ue.indexOf(me+"=")>-1||(pe+="&"+me+"="+fe))})),-1===ue.indexOf("?")&&(pe="?"+pe.slice(1)),ue+pe}(he.url,he.storeParams),xe={},Ie=Se.getUrlParam("x-site-origin")||ye.getXSiteOrigin();return Ie&&(xe["x-site-origin"]=Ie),ue.ajax({cache:he.cache,url:we,data:xe,tryCount:0,retryLimit:ve,dataType:he.dataType,jsonpCallback:he.jsonpCallback,beforeSend:function(ue){this.addRequestHeaders(ue,be,ge)}.bind(this),success:function(ue){this.successRequest(he.successCallback,ue,he.callbackArgs)}.bind(this),error:function(pe){return me.logError(new Error(me.ERROR_TYPE.AjaxError),{apiName:he.apiName,requestUrl:we,status:pe.status,caller:he.callerContext,response:pe.response,xSiteOrigin:Ie,requestHeaders:pe.headers,responseHeaders:pe.getAllResponseHeaders()}),null!==this.retryLimit&&this.tryCount<=this.retryLimit?(this.tryCount++,void ue.ajax(this)):void this.errorRequest(he.errorCallback,pe,he.callbackArgs)}.bind(this)})},this.addRequestHeaders=function(ue,pe,me){if(ue.headers={},!1!==pe){var fe=he();ue.setRequestHeader("asos-c-name",pe),ue.setRequestHeader("asos-cid",fe),ue.headers["asos-c-name"]=pe,ue.headers["asos-cid"]=fe}null!==me&&(ue.setRequestHeader("Authorization",me),ue.headers.Authorization=me)},this.successRequest=function(ue,he,pe){ue&&ue(he,pe)},this.errorRequest=function(ue,he,pe){ue&&ue(he,pe)}}})),define("Components/mix-and-match/mix-and-match",["ko","text!./mix-and-match.html","ProductUtils/Analytics","ProductUtils/UrlUtils","ProductUtils/Window","ProductUtils/Ajax","ProductUtils/NewRelicLogger","PageConfig"],(function(ue,he,pe,me,fe,ge,ve,be){return{viewModel:function c(he){this.context=he.data,this.products=he.data.products,this.state=he.state,this.options=he.options,this.isMobile="mobile"===be.platform,this.showNoSizesSelectedWarning=he.state.showNoSizesSelectedWarning,this.showAddToBagError=he.state.showAddToBagError,this.addToBagErrorMessage=this.state.addToBagErrorMessage,this.variants=[],this.isCaliforniaLocated=ue.observable(!1),this.productDetailsText=this.state.resources.pdp_description_product_details_title;for(var ve="Asos.PDP.Prop65.Should.Show",ye=new me,Se=this.products.length;Se--;)this.variants.push(this.context.States[Se].selectedSize);this.getState=function(ue){return this.context.States[ue]}.bind(this),this.variantIsOOS=function(ue){return!this.getState(ue).productData.isInStock}.bind(this),this.allVariantsOOS=function(){return 0===this.products.filter((function(ue){return!0===ue.isInStock})).length},this.checkSetCaliforniaRegion=function(){var ue=fe.sessionStorage.getItem(ve);return"true"===ue||"false"===ue?void this.isCaliforniaLocated("true"===ue):(this.ajax=new ge,void this.ajax.execute({url:fe.asos.pdp.config.storeApiPath,apiName:"Fashion",callerContext:"Store",storeParams:{keyStoreDataversion:be.keyStoreDataversion},successCallback:this.regionCheckSuccessCallback}))}.bind(this),this.regionCheckSuccessCallback=function(ue){var he=!!ue&&ue.some((function(ue){return"US-CA"===ue.region}));fe.sessionStorage.setItem(ve,he),this.isCaliforniaLocated(he)}.bind(this),this.shouldShowProp65=ue.computed(function(){return"US"===be.storeCode&&(!!this.context.hasVariantsWithProp65Risk&&(!this.allVariantsOOS()&&(this.checkSetCaliforniaRegion(),this.isCaliforniaLocated())))}.bind(this)),this.showOverlay=function(ue,he){pe.firePageInteraction({context:"openModal",modalType:"mixAndMatch",productIID:this.products[ue].id}),fe.asos.eventBus.emit("productModalOpen",he,this.products[ue].id)}.bind(this),this.getProductLink=function(ue){return ye.getProductUrl(ue.name,this.context.brandName,ue.id)+this.getQueryString()}.bind(this),this.navigateToFullProduct=function(ue){var he=this.getProductLink(this.products[ue]);this.navigateTo(he)}.bind(this),this.navigateTo=function(ue){window.location=ue},this.getQueryString=function(){return document.location.search}},template:he}})),define("text!Components/total-price/total-price.html",[],(function(){return'<h2 class="number-of-items" aria-live="polite" data-bind="text: selectedItemsText"></h2>\n<h2 class="total-price" aria-live="polite" data-bind="text: totalPrice"></h2>'})),define("Asos.Web.Currency.Formatter",["exports"],(function(ue){"use strict";var he={cultures:{default:{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"ar-AE":{currencyFormatting:{default:"4"},numberFormat:"1"},"ar-KW":{currencyFormatting:{default:"4"},numberFormat:"1"},"ar-QA":{currencyFormatting:{default:"4"},numberFormat:"1"},"ar-SA":{currencyFormatting:{default:"4"},numberFormat:"1"},"cs-CZ":{currencyFormatting:{default:"4"},numberFormat:"3"},"de-DE":{currencyFormatting:{default:"4"},numberFormat:"2"},"da-DK":{currencyFormatting:{default:"4"},numberFormat:"2"},"en-AU":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"en-GB":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"en-US":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"es-AR":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"es-CL":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"es-ES":{currencyFormatting:{default:"4"},numberFormat:"2"},"es-MX":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"fa-IR":{currencyFormatting:{default:"4"},numberFormat:"1"},"fr-FR":{currencyFormatting:{default:"4"},numberFormat:"3"},"he-IL":{currencyFormatting:{default:"4"},numberFormat:"1"},"hi-IN":{currencyFormatting:{default:"4"},numberFormat:"1"},"it-IT":{currencyFormatting:{default:"4"},numberFormat:"2"},"ja-JP":{currencyFormatting:{default:"2"},numberFormat:"1"},"ko-KR":{currencyFormatting:{default:"2"},numberFormat:"1"},"ms-MY":{currencyFormatting:{default:"2"},numberFormat:"1"},"nl-NL":{currencyFormatting:{default:"2"},numberFormat:"2"},"pl-PL":{currencyFormatting:{default:"4"},numberFormat:"3"},"ru-RU":{currencyFormatting:{default:"4"},numberFormat:"3"},"sv-SE":{currencyFormatting:{default:"4"},numberFormat:"2"},"tr-TR":{currencyFormatting:{default:"4"},numberFormat:"1"},"uk-UA":{currencyFormatting:{default:"4"},numberFormat:"4"}},currencyFormats:{1:{negative:"-{C}{N}",positive:"{C}{N}"},2:{negative:"-{C} {N}",positive:"{C} {N}"},3:{negative:"-{N}{C}",positive:"{N}{C}"},4:{negative:"-{N} {C}",positive:"{N} {C}"}},currencySymbols:{AED:{default:"AED"},AUD:{default:"$"},CAD:{default:"C$"},CHF:{default:"CHF"},CNY:{default:""},CZK:{default:"K"},DKK:{default:"DKK","da-DK":"kr."},EUR:{default:""},GBP:{default:""},HKD:{default:"HKD$"},ILS:{default:"ILS"},INR:{default:"INR"},IRR:{default:"IRR"},JPY:{default:"JPY"},KRW:{default:"KRW"},KWD:{default:"KWD"},MYR:{default:"RM"},NOK:{default:"NOK"},NZD:{default:"NZD$"},PLN:{default:"PLN","pl-PL":"z."},QAR:{default:"QAR"},RUB:{default:"."},SAR:{default:"SAR"},SEK:{default:"SEK"},SGD:{default:"SGD$"},TRY:{default:"TRY"},TWD:{default:"NT$"},UAH:{default:"UAH"},USD:{default:"$"}},numberFormats:{1:"###,###.##",2:"###.###,##",3:"### ###,##",4:"### ###.##"}},pe=new RegExp(/(#+)([^#])(#+)([^#]|$)(#+|$)/g),l=function(ue){var he=ue.split(pe).filter((function(ue){return""!==ue}));if(!(he.length<3))return{digitGroupingLength:he[0].length,digitGroupingSymbol:he[1],digitsBeforeDecimal:he[2].length,decimalSeparator:he[3],decimalPlaces:he[4]?he[4].length:0}},h=function(ue,he){if(he&&!function t(ue){return Math.round(ue)===ue}(ue))throw new Error("Value must be an integer when formatAsInteger is set to true, else numeric precision will be lost")},p=function(ue,pe,me){var fe=Number(ue);if(isNaN(fe)||!isFinite(fe))return ue;h(fe,me);var ge=he.cultures[pe]||he.cultures.default,ve=he.numberFormats[ge.numberFormat],be=l(ve);return be?function(ue,he,pe){var me=pe.digitGroupingSymbol,fe=pe.digitGroupingLength,ge=pe.digitsBeforeDecimal,ve=pe.decimalSeparator,be=pe.decimalPlaces,ye=!!ve&&!he,Se=function(ue){return ue.split("").reverse().join("")}(he?Math.abs(ue).toString():Math.abs(ue).toFixed(be)).split(""),we=ye?be+1+ge:ge,xe=Se.reduce((function(ue,he,pe){return ye||pe!==ge?ye&&pe===be?"".concat(ve).concat(ue):pe>=we&&(pe-we)%fe==0?"".concat(he).concat(me).concat(ue):"".concat(he).concat(ue):"".concat(he).concat(me).concat(ue)}));return 0>ue?"".concat("-").concat(xe):xe}(fe,me,be):ue},g=function(ue,pe){var me=he.currencySymbols[ue];return me?me[pe]||me.default:""},b=function(ue){return!isNaN(ue)&&isFinite(ue)},y=function(ue,pe){var me=he.cultures[ue]||he.cultures.default,fe=me.currencyFormatting[pe]||me.currencyFormatting.default;return he.currencyFormats[fe]};ue.formatPrice=function(ue,he,pe,me){var fe=Number(ue);if(!b(fe))return ue;var ge=g(pe,he),ve=y(he,pe);if(!ge)return ue;var be=p(Math.abs(fe),he,me),ye=(0>fe?ve.negative:ve.positive).replace("{C}",ge);return ye.replace("{N}",be)},ue.formatValue=p,ue.getCurrencySymbol=g,Object.defineProperty(ue,"__esModule",{value:!0})})),define("Components/total-price/total-price",["ko","text!./total-price.html","Asos.Web.Currency.Formatter","PageConfig","ProductUtils/Window"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){var ge=he.variants;this.state=he.state,this.selectedItemsText=ue.observable(""),this.totalPriceValue=ue.observable(0),this.totalPrice=ue.computed(function(){for(var ue=ge.length,ve=0,be=0;ue--;){var ye=ge[ue]();ye&&(ve+=ye.price.current.value,be++)}this.totalPriceValue(ve),this.selectedItemsText(he.state.resources.pdp_status_number_of_selected_items.replace("%{count}",be));var Se=this.totalPriceValue().toFixed(2);return fe.asos.eventBus.emit("totalPrice",Number(Se)),pe.formatPrice(Se,me.language,me.currency)}.bind(this))},template:he}})),define("text!Components/add-items/add-items.html",[],(function(){return'<div class="add-items">\n    <div class="is-add-items-saving" data-bind="visible: isBusy"></div>\n    <span class="aria-live" aria-live="polite" role="status" data-bind="{ text: ariaLiveText}"></span>\n    <button data-testid="add-button" data-bind="click: addToBag, attr: { \'aria-label\': resources.pdp_cta_add_to_bag, disabled: isBusy }, markAndMeasure: \'pdp:add_to_bag_interactive\'">\n        <span class="product-tick" data-bind="visible: addedToBag"></span>\n        <span data-bind="text: buttonText"></span>\n    </button>\n</div>\n'})),define("Components/add-items/add-items",["ko","text!./add-items.html","ProductUtils/Bag","ProductUtils/ScrollTo","$"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){this.variants=he.variants,this.resources=he.state.resources,this.addedToBag=ue.observable(!1),this.productState=he.firstProductState,this.topOfPage=fe("#top-of-page"),this.showNoSizesSelectedWarning=he.state.showNoSizesSelectedWarning,this.showAddToBagError=he.state.showAddToBagError,this.addToBagErrorMessage=he.state.addToBagErrorMessage,this.buttonText=ue.observable(this.resources.pdp_cta_add_to_bag),this.isBusy=ue.observable(!1),this.ariaLiveText=ue.computed((function(){var ue=this.addToBagErrorMessage();return ue||(this.addedToBag()?this.resources.pdp_status_add_to_bag_success:"")}),this),this.selectedVariants=ue.computed(function(){this.showAddToBagError(!1);for(var ue=this.variants.length,he=[];ue--;){var pe=this.variants[ue]();pe&&he.push(pe)}return this.showNoSizesSelectedWarning(!1),this.addedToBag(!1),he}.bind(this));var ge,ve=new pe(he,he.initiator);this.addToBag=function(){return!this.isBusy()&&(this.revertState(),void(0===this.selectedVariants().length?(this.showNoSizesSelectedWarning(!0),this.productState.showNoSizeSelectedWarning(!0)):(this.isBusy(!0),ve.addItems(this.selectedVariants(),this.addToBagResult))))}.bind(this),this.addToBagResult=function(ue){this.isBusy(!1),this.addedToBag(ue.success),ue.success?(this.buttonText(this.resources.pdp_status_add_to_bag_success),me.scrollToElement(this.topOfPage),ge&&window.clearTimeout(ge),ge=setTimeout(this.revertState,5e3)):(this.showAddToBagError(!0),this.addToBagErrorMessage(ue.error||this.resources.pdp_status_add_to_bag_failure))}.bind(this),this.revertState=function(){this.addedToBag(!1),this.showAddToBagError(!1),this.addToBagErrorMessage(""),this.isBusy(!1),this.buttonText(this.resources.pdp_cta_add_to_bag)}.bind(this)},template:he}})),define("Pages/MixAndMatch",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","Models/VariantDecorator","Utils","Components/product-image/product-image","Components/product-price/product-price","Components/add-item/add-item","Components/social-share/social-share","Components/content/content","Components/size-guide/size-guide","Components/mix-and-match/mix-and-match","Components/product-gallery/product-gallery","Components/product-colour/product-colour","Components/product-size/product-size","Components/total-price/total-price","Components/stock-price-retry/stock-price-retry","Components/add-items/add-items","Components/add-item/add-item","PageConfig","ProductUtils/NewRelicLogger","ProductUtils/EnhanceNewRelicPageView","ProductUtils/MergeJson","ProductUtils/ScrollTo","ProductUtils/Performance"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se,we,xe,Ie,Pe,_e,Te,ze,Ce,Ee,ke,Ae,Ve,Me,Re){return this.init=function(ye){function d(){if(!Ne){var he=function n(he){return Ue.getStockPrice(Oe,function(he){Me();for(var pe=0;pe<he.products.length;pe++){var me={selectedColour:ue.observable(),selectedSize:ue.observable(),showNoColourSelectedWarning:ue.observable(!1),showNoSizeSelectedWarning:ue.observable(!1),focusColourSelect:ue.observable(!1),focusSizeSelect:ue.observable(!1),preventFocusScroll:ue.observable(!1),showAddToBagError:ue.observable(!1),addToBagErrorMessage:ue.observable(""),productImage:he.products[pe].productImage.url,resources:Le,features:ye,sizeGuideOpened:Fe.sizeGuideOpened,session:Fe.session};he.products[pe].brandName=we.brandName,me.productData=(new fe).getData(he.products[pe],!0),Be.push(me)}Oe.States=Be,De.register({type:"content",name:"content1",elementId:"aside-content",useComponentTemplate:!1},Oe,Fe),Fe.showStockPriceRetry(!1)}.bind(this),(function(ue){404===ue.status?(Fe.showStockPriceRetry(!1),Fe.productData={isInStock:!1},Oe.categories=[],De.register({type:"content",name:"aside-content-oos",elementId:"aside-content-oos",useComponentTemplate:!1},Oe,Fe)):Fe.showStockPriceRetry(!0)}),he),n}();this.state.retryCallback=he.bind(this,!0),De.register({type:"content",name:"aside-content-retry",elementId:"aside-content-retry",useComponentTemplate:!1},Oe,this.state),De.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},Oe,this.state),ue.components.register("stock-price-retry",Ce),ue.components.register("product-gallery",Pe),ue.components.register("size-guide",xe),ue.components.register("product-image",ve),ue.components.register("product-colour",_e),ue.components.register("product-size",Te),ue.components.register("product-price",be),ue.components.register("social-share",Se),ue.components.register("mix-and-match",Ie),ue.components.register("total-price",ze),ue.components.register("asos-video-player-prod",pe.videoPlayer),ue.components.register("asos-spin-viewer-prod",pe.spinViewer),ue.components.register("add-items",Ee),ue.components.register("add-item",ke),Ne=!0,window.asos.pdp.koComponents=De,window.asos.pdp.koState=Fe,window.asos.eventBus.emit("knockoutInitialised",De,Fe)}}Ve.init(Ve.PAGE_TYPE.GRP);var we=window.asos.pdp.config.product,Le=window.asos.pdp.config.translations;this.state={resources:Le,features:Re(ye,window.asos.pdp.config.features),selectedColour:ue.observable(),showNoSizesSelectedWarning:ue.observable(!1),focusColourSelect:ue.observable(!1),focusSizeSelect:ue.observable(!1),preventFocusScroll:ue.observable(!1),showAddToBagError:ue.observable(!1),addToBagErrorMessage:ue.observable(""),showStockPriceRetry:ue.observable(!1),sizeGuideOpened:ue.observable(!1)},this.isMobile="mobile"===Ae.platform,this.useProductIdForVideos=!0;var Fe=this.state,De=new he,Oe="string"==typeof we?JSON.parse(we):we;Oe||Ve.logError(new Error(Ve.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"});var Ue=new me,Be=[];Oe.defaultProductId=parseInt(ge.QueryString.getValue("iid")||0);var Ne=!1;document.addEventListener("DOMContentLoaded",function(){d.call(this)}.bind(this)),document.getElementById("aside-content")&&document.getElementById("gallery-content")&&d.call(this)},this.init})),define("main",["Pages/FullProduct","Pages/MixAndMatch"],(function(){}));